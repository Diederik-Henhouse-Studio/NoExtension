import{S as Vt,i as xt,s as zt,d as A,M as jt,N as $t,K as Bt,L as Nt,v as Jt,O as Vi,c as U,m as E,w as N,f as L,n as C,p as S,x as M,l as v,q as _,u as k,g as F,J as m,P as at,Q as Yn,E as ne,R as xi,T as At,e as K,U as Xn,V as zi,W as Mr,X as _n,Y as Fe,Z as Ji,y as bt,_ as Le,$ as je,a0 as Gi,a1 as Wi,o as Ur,a2 as Ze,z as lt,A as ct,B as ut,a3 as Qi,k as le,t as _e,C as ft,a4 as Zt,h as Kt,j as er}from"../../chunks/index-da8c466b.js";import{w as Qr,c as It}from"../../chunks/singletons-3a3f354f.js";import{c as Lr,s as Mt}from"../../chunks/supabase-51bcc1ec.js";import{b as Zn}from"../../chunks/preload-helper-d17d48a2.js";import{p as on}from"../../chunks/stores-c176feee.js";var Kn={},ei={},ti={},et={};Object.defineProperty(et,"__esModule",{value:!0});et.isObject=et.pick=et.assertNever=void 0;function ss(n){throw new Error(`Unexpected value should never occur: ${n}`)}et.assertNever=ss;function as(n,e){const t=e.map(r=>[r,n==null?void 0:n[r]]);return Object.fromEntries(t)}et.pick=as;function ls(n){return typeof n=="object"&&n!==null}et.isObject=ls;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.logLevelSeverity=n.makeConsoleLogger=n.LogLevel=void 0;const e=et;var t;(function(o){o.DEBUG="debug",o.INFO="info",o.WARN="warn",o.ERROR="error"})(t=n.LogLevel||(n.LogLevel={}));function r(o){return(s,l,a)=>{console[s](`${o} ${s}:`,l,a)}}n.makeConsoleLogger=r;function i(o){switch(o){case t.DEBUG:return 20;case t.INFO:return 40;case t.WARN:return 60;case t.ERROR:return 80;default:return(0,e.assertNever)(o)}}n.logLevelSeverity=i})(ti);var ri={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.buildRequestError=n.APIResponseError=n.UnknownHTTPResponseError=n.isHTTPResponseError=n.RequestTimeoutError=n.isNotionClientError=n.ClientErrorCode=n.APIErrorCode=void 0;const e=et;var t;(function(p){p.Unauthorized="unauthorized",p.RestrictedResource="restricted_resource",p.ObjectNotFound="object_not_found",p.RateLimited="rate_limited",p.InvalidJSON="invalid_json",p.InvalidRequestURL="invalid_request_url",p.InvalidRequest="invalid_request",p.ValidationError="validation_error",p.ConflictError="conflict_error",p.InternalServerError="internal_server_error",p.ServiceUnavailable="service_unavailable"})(t=n.APIErrorCode||(n.APIErrorCode={}));var r;(function(p){p.RequestTimeout="notionhq_client_request_timeout",p.ResponseError="notionhq_client_response_error"})(r=n.ClientErrorCode||(n.ClientErrorCode={}));class i extends Error{}function o(p){return(0,e.isObject)(p)&&p instanceof i}n.isNotionClientError=o;function s(p,w){return o(p)&&p.code in w}class l extends i{constructor(w="Request to Notion API has timed out"){super(w),this.code=r.RequestTimeout,this.name="RequestTimeoutError"}static isRequestTimeoutError(w){return s(w,{[r.RequestTimeout]:!0})}static rejectAfterTimeout(w,I){return new Promise((q,R)=>{const V=setTimeout(()=>{R(new l)},I);w.then(q).catch(R).then(()=>clearTimeout(V))})}}n.RequestTimeoutError=l;class a extends i{constructor(w){super(w.message),this.name="HTTPResponseError";const{code:I,status:q,headers:R,rawBodyText:V}=w;this.code=I,this.status=q,this.headers=R,this.body=V}}const c={[r.ResponseError]:!0,[t.Unauthorized]:!0,[t.RestrictedResource]:!0,[t.ObjectNotFound]:!0,[t.RateLimited]:!0,[t.InvalidJSON]:!0,[t.InvalidRequestURL]:!0,[t.InvalidRequest]:!0,[t.ValidationError]:!0,[t.ConflictError]:!0,[t.InternalServerError]:!0,[t.ServiceUnavailable]:!0};function u(p){return!!s(p,c)}n.isHTTPResponseError=u;class f extends a{constructor(w){var I;super({...w,code:r.ResponseError,message:(I=w.message)!==null&&I!==void 0?I:`Request to Notion API failed with status: ${w.status}`}),this.name="UnknownHTTPResponseError"}static isUnknownHTTPResponseError(w){return s(w,{[r.ResponseError]:!0})}}n.UnknownHTTPResponseError=f;const d={[t.Unauthorized]:!0,[t.RestrictedResource]:!0,[t.ObjectNotFound]:!0,[t.RateLimited]:!0,[t.InvalidJSON]:!0,[t.InvalidRequestURL]:!0,[t.InvalidRequest]:!0,[t.ValidationError]:!0,[t.ConflictError]:!0,[t.InternalServerError]:!0,[t.ServiceUnavailable]:!0};class h extends a{constructor(){super(...arguments),this.name="APIResponseError"}static isAPIResponseError(w){return s(w,d)}}n.APIResponseError=h;function y(p,w){const I=b(w);return I!==void 0?new h({code:I.code,message:I.message,headers:p.headers,status:p.status,rawBodyText:w}):new f({message:void 0,headers:p.headers,status:p.status,rawBodyText:w})}n.buildRequestError=y;function b(p){if(typeof p!="string")return;let w;try{w=JSON.parse(p)}catch{return}if(!(!(0,e.isObject)(w)||typeof w.message!="string"||!g(w.code)))return{...w,code:w.code,message:w.message}}function g(p){return typeof p=="string"&&p in d}})(ri);var $={};Object.defineProperty($,"__esModule",{value:!0});$.listComments=$.createComment=$.search=$.createDatabase=$.listDatabases=$.queryDatabase=$.updateDatabase=$.getDatabase=$.appendBlockChildren=$.listBlockChildren=$.deleteBlock=$.updateBlock=$.getBlock=$.getPageProperty=$.updatePage=$.getPage=$.createPage=$.listUsers=$.getUser=$.getSelf=void 0;$.getSelf={method:"get",pathParams:[],queryParams:[],bodyParams:[],path:()=>"users/me"};$.getUser={method:"get",pathParams:["user_id"],queryParams:[],bodyParams:[],path:n=>`users/${n.user_id}`};$.listUsers={method:"get",pathParams:[],queryParams:["start_cursor","page_size"],bodyParams:[],path:()=>"users"};$.createPage={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","properties","icon","cover","content","children"],path:()=>"pages"};$.getPage={method:"get",pathParams:["page_id"],queryParams:[],bodyParams:[],path:n=>`pages/${n.page_id}`};$.updatePage={method:"patch",pathParams:["page_id"],queryParams:[],bodyParams:["properties","icon","cover","archived"],path:n=>`pages/${n.page_id}`};$.getPageProperty={method:"get",pathParams:["page_id","property_id"],queryParams:["start_cursor","page_size"],bodyParams:[],path:n=>`pages/${n.page_id}/properties/${n.property_id}`};$.getBlock={method:"get",pathParams:["block_id"],queryParams:[],bodyParams:[],path:n=>`blocks/${n.block_id}`};$.updateBlock={method:"patch",pathParams:["block_id"],queryParams:[],bodyParams:["embed","type","archived","bookmark","image","video","pdf","file","audio","code","equation","divider","breadcrumb","table_of_contents","link_to_page","table_row","heading_1","heading_2","heading_3","paragraph","bulleted_list_item","numbered_list_item","quote","to_do","toggle","template","callout","synced_block","table"],path:n=>`blocks/${n.block_id}`};$.deleteBlock={method:"delete",pathParams:["block_id"],queryParams:[],bodyParams:[],path:n=>`blocks/${n.block_id}`};$.listBlockChildren={method:"get",pathParams:["block_id"],queryParams:["start_cursor","page_size"],bodyParams:[],path:n=>`blocks/${n.block_id}/children`};$.appendBlockChildren={method:"patch",pathParams:["block_id"],queryParams:[],bodyParams:["children"],path:n=>`blocks/${n.block_id}/children`};$.getDatabase={method:"get",pathParams:["database_id"],queryParams:[],bodyParams:[],path:n=>`databases/${n.database_id}`};$.updateDatabase={method:"patch",pathParams:["database_id"],queryParams:[],bodyParams:["title","description","icon","cover","properties","is_inline","archived"],path:n=>`databases/${n.database_id}`};$.queryDatabase={method:"post",pathParams:["database_id"],queryParams:[],bodyParams:["sorts","filter","start_cursor","page_size","archived"],path:n=>`databases/${n.database_id}/query`};$.listDatabases={method:"get",pathParams:[],queryParams:["start_cursor","page_size"],bodyParams:[],path:()=>"databases"};$.createDatabase={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","properties","icon","cover","title","description","is_inline"],path:()=>"databases"};$.search={method:"post",pathParams:[],queryParams:[],bodyParams:["sort","query","start_cursor","page_size","filter"],path:()=>"search"};$.createComment={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","rich_text","discussion_id"],path:()=>"comments"};$.listComments={method:"get",pathParams:[],queryParams:["block_id","start_cursor","page_size"],bodyParams:[],path:()=>"comments"};var hn={exports:{}};(function(n,e){var t=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof r<"u")return r;throw new Error("unable to locate global object")},r=t();n.exports=e=r.fetch,r.fetch&&(e.default=r.fetch.bind(r)),e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response})(hn,hn.exports);const cs="@notionhq/client",us="2.1.1",fs="A simple and easy to use client for the Notion API",ds={node:">=12"},_s="https://developers.notion.com/docs/getting-started",hs={url:"https://github.com/makenotion/notion-sdk-js/issues"},ps={type:"git",url:"https://github.com/makenotion/notion-sdk-js/"},gs=["notion","notionapi","rest","notion-api"],vs="./build/src",ms="./build/src/index.d.ts",bs={prepare:"npm run build",prepublishOnly:"npm run checkLoggedIn && npm run lint && npm run test",build:"tsc",prettier:"prettier --write .",lint:"prettier --check . && eslint . --ext .ts && cspell '**/*' ",test:"jest ./test","check-links":"git ls-files | grep md$ | xargs -n 1 markdown-link-check",prebuild:"npm run clean",clean:"rm -rf ./build",checkLoggedIn:"./scripts/verifyLoggedIn.sh"},ys="",ws="MIT",ks=["build/package.json","build/src/**"],Ss={"@types/node-fetch":"^2.5.10","node-fetch":"^2.6.1"},Ps={"@types/jest":"^28.1.4","@typescript-eslint/eslint-plugin":"^4.22.0","@typescript-eslint/parser":"^4.22.0",cspell:"^5.4.1",eslint:"^7.24.0",jest:"^28.1.2","markdown-link-check":"^3.8.7",prettier:"^2.3.0","ts-jest":"^28.0.5",typescript:"^4.2.4"},Es={name:cs,version:us,description:fs,engines:ds,homepage:_s,bugs:hs,repository:ps,keywords:gs,main:vs,types:ms,scripts:bs,author:ys,license:ws,files:ks,dependencies:Ss,devDependencies:Ps};var nt=Lr&&Lr.__classPrivateFieldSet||function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},it=Lr&&Lr.__classPrivateFieldGet||function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Pr,Er,Cr,Or,Ir,Rr,Fr,Dr,Tr;Object.defineProperty(ei,"__esModule",{value:!0});const pt=ti,pr=ri,H=et,O=$,Cs=hn.exports,Si=Es;class Yr{constructor(e){var t,r,i,o,s,l;Pr.set(this,void 0),Er.set(this,void 0),Cr.set(this,void 0),Or.set(this,void 0),Ir.set(this,void 0),Rr.set(this,void 0),Fr.set(this,void 0),Dr.set(this,void 0),Tr.set(this,void 0),this.blocks={retrieve:a=>this.request({path:O.getBlock.path(a),method:O.getBlock.method,query:(0,H.pick)(a,O.getBlock.queryParams),body:(0,H.pick)(a,O.getBlock.bodyParams),auth:a==null?void 0:a.auth}),update:a=>this.request({path:O.updateBlock.path(a),method:O.updateBlock.method,query:(0,H.pick)(a,O.updateBlock.queryParams),body:(0,H.pick)(a,O.updateBlock.bodyParams),auth:a==null?void 0:a.auth}),delete:a=>this.request({path:O.deleteBlock.path(a),method:O.deleteBlock.method,query:(0,H.pick)(a,O.deleteBlock.queryParams),body:(0,H.pick)(a,O.deleteBlock.bodyParams),auth:a==null?void 0:a.auth}),children:{append:a=>this.request({path:O.appendBlockChildren.path(a),method:O.appendBlockChildren.method,query:(0,H.pick)(a,O.appendBlockChildren.queryParams),body:(0,H.pick)(a,O.appendBlockChildren.bodyParams),auth:a==null?void 0:a.auth}),list:a=>this.request({path:O.listBlockChildren.path(a),method:O.listBlockChildren.method,query:(0,H.pick)(a,O.listBlockChildren.queryParams),body:(0,H.pick)(a,O.listBlockChildren.bodyParams),auth:a==null?void 0:a.auth})}},this.databases={list:a=>this.request({path:O.listDatabases.path(),method:O.listDatabases.method,query:(0,H.pick)(a,O.listDatabases.queryParams),body:(0,H.pick)(a,O.listDatabases.bodyParams),auth:a==null?void 0:a.auth}),retrieve:a=>this.request({path:O.getDatabase.path(a),method:O.getDatabase.method,query:(0,H.pick)(a,O.getDatabase.queryParams),body:(0,H.pick)(a,O.getDatabase.bodyParams),auth:a==null?void 0:a.auth}),query:a=>this.request({path:O.queryDatabase.path(a),method:O.queryDatabase.method,query:(0,H.pick)(a,O.queryDatabase.queryParams),body:(0,H.pick)(a,O.queryDatabase.bodyParams),auth:a==null?void 0:a.auth}),create:a=>this.request({path:O.createDatabase.path(),method:O.createDatabase.method,query:(0,H.pick)(a,O.createDatabase.queryParams),body:(0,H.pick)(a,O.createDatabase.bodyParams),auth:a==null?void 0:a.auth}),update:a=>this.request({path:O.updateDatabase.path(a),method:O.updateDatabase.method,query:(0,H.pick)(a,O.updateDatabase.queryParams),body:(0,H.pick)(a,O.updateDatabase.bodyParams),auth:a==null?void 0:a.auth})},this.pages={create:a=>this.request({path:O.createPage.path(),method:O.createPage.method,query:(0,H.pick)(a,O.createPage.queryParams),body:(0,H.pick)(a,O.createPage.bodyParams),auth:a==null?void 0:a.auth}),retrieve:a=>this.request({path:O.getPage.path(a),method:O.getPage.method,query:(0,H.pick)(a,O.getPage.queryParams),body:(0,H.pick)(a,O.getPage.bodyParams),auth:a==null?void 0:a.auth}),update:a=>this.request({path:O.updatePage.path(a),method:O.updatePage.method,query:(0,H.pick)(a,O.updatePage.queryParams),body:(0,H.pick)(a,O.updatePage.bodyParams),auth:a==null?void 0:a.auth}),properties:{retrieve:a=>this.request({path:O.getPageProperty.path(a),method:O.getPageProperty.method,query:(0,H.pick)(a,O.getPageProperty.queryParams),body:(0,H.pick)(a,O.getPageProperty.bodyParams),auth:a==null?void 0:a.auth})}},this.users={retrieve:a=>this.request({path:O.getUser.path(a),method:O.getUser.method,query:(0,H.pick)(a,O.getUser.queryParams),body:(0,H.pick)(a,O.getUser.bodyParams),auth:a==null?void 0:a.auth}),list:a=>this.request({path:O.listUsers.path(),method:O.listUsers.method,query:(0,H.pick)(a,O.listUsers.queryParams),body:(0,H.pick)(a,O.listUsers.bodyParams),auth:a==null?void 0:a.auth}),me:a=>this.request({path:O.getSelf.path(),method:O.getSelf.method,query:(0,H.pick)(a,O.getSelf.queryParams),body:(0,H.pick)(a,O.getSelf.bodyParams),auth:a==null?void 0:a.auth})},this.comments={create:a=>this.request({path:O.createComment.path(),method:O.createComment.method,query:(0,H.pick)(a,O.createComment.queryParams),body:(0,H.pick)(a,O.createComment.bodyParams),auth:a==null?void 0:a.auth}),list:a=>this.request({path:O.listComments.path(),method:O.listComments.method,query:(0,H.pick)(a,O.listComments.queryParams),body:(0,H.pick)(a,O.listComments.bodyParams),auth:a==null?void 0:a.auth})},this.search=a=>this.request({path:O.search.path(),method:O.search.method,query:(0,H.pick)(a,O.search.queryParams),body:(0,H.pick)(a,O.search.bodyParams),auth:a==null?void 0:a.auth}),nt(this,Pr,e==null?void 0:e.auth,"f"),nt(this,Er,(t=e==null?void 0:e.logLevel)!==null&&t!==void 0?t:pt.LogLevel.WARN,"f"),nt(this,Cr,(r=e==null?void 0:e.logger)!==null&&r!==void 0?r:(0,pt.makeConsoleLogger)(Si.name),"f"),nt(this,Or,((i=e==null?void 0:e.baseUrl)!==null&&i!==void 0?i:"https://api.notion.com")+"/v1/","f"),nt(this,Ir,(o=e==null?void 0:e.timeoutMs)!==null&&o!==void 0?o:6e4,"f"),nt(this,Rr,(s=e==null?void 0:e.notionVersion)!==null&&s!==void 0?s:Yr.defaultNotionVersion,"f"),nt(this,Fr,(l=e==null?void 0:e.fetch)!==null&&l!==void 0?l:Cs.default,"f"),nt(this,Dr,e==null?void 0:e.agent,"f"),nt(this,Tr,`notionhq-client/${Si.version}`,"f")}async request({path:e,method:t,query:r,body:i,auth:o}){this.log(pt.LogLevel.INFO,"request start",{method:t,path:e});const s=!i||Object.entries(i).length===0?void 0:JSON.stringify(i),l=new URL(`${it(this,Or,"f")}${e}`);if(r)for(const[c,u]of Object.entries(r))u!==void 0&&l.searchParams.append(c,String(u));const a={...this.authAsHeaders(o),"Notion-Version":it(this,Rr,"f"),"user-agent":it(this,Tr,"f")};s!==void 0&&(a["content-type"]="application/json");try{const c=await pr.RequestTimeoutError.rejectAfterTimeout(it(this,Fr,"f").call(this,l.toString(),{method:t.toUpperCase(),headers:a,body:s,agent:it(this,Dr,"f")}),it(this,Ir,"f")),u=await c.text();if(!c.ok)throw(0,pr.buildRequestError)(c,u);const f=JSON.parse(u);return this.log(pt.LogLevel.INFO,"request success",{method:t,path:e}),f}catch(c){throw(0,pr.isNotionClientError)(c)&&(this.log(pt.LogLevel.WARN,"request fail",{code:c.code,message:c.message}),(0,pr.isHTTPResponseError)(c)&&this.log(pt.LogLevel.DEBUG,"failed response body",{body:c.body})),c}}log(e,t,r){(0,pt.logLevelSeverity)(e)>=(0,pt.logLevelSeverity)(it(this,Er,"f"))&&it(this,Cr,"f").call(this,e,t,r)}authAsHeaders(e){const t={},r=e!=null?e:it(this,Pr,"f");return r!==void 0&&(t.authorization=`Bearer ${r}`),t}}ei.default=Yr;Pr=new WeakMap,Er=new WeakMap,Cr=new WeakMap,Or=new WeakMap,Ir=new WeakMap,Rr=new WeakMap,Fr=new WeakMap,Dr=new WeakMap,Tr=new WeakMap;Yr.defaultNotionVersion="2022-06-28";var ke={};Object.defineProperty(ke,"__esModule",{value:!0});ke.isFullComment=ke.isFullUser=ke.isFullDatabase=ke.isFullPage=ke.isFullBlock=ke.collectPaginatedAPI=ke.iteratePaginatedAPI=void 0;async function*Yi(n,e){let t=e.start_cursor;do{const r=await n({...e,start_cursor:t});yield*r.results,t=r.next_cursor}while(t)}ke.iteratePaginatedAPI=Yi;async function Os(n,e){const t=[];for await(const r of Yi(n,e))t.push(r);return t}ke.collectPaginatedAPI=Os;function Is(n){return"type"in n}ke.isFullBlock=Is;function Rs(n){return"url"in n}ke.isFullPage=Rs;function Fs(n){return"title"in n}ke.isFullDatabase=Fs;function Ds(n){return"type"in n}ke.isFullUser=Ds;function Ts(n){return"created_by"in n}ke.isFullComment=Ts;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isFullComment=n.isFullUser=n.isFullPage=n.isFullDatabase=n.isFullBlock=n.iteratePaginatedAPI=n.collectPaginatedAPI=n.isNotionClientError=n.RequestTimeoutError=n.UnknownHTTPResponseError=n.APIResponseError=n.ClientErrorCode=n.APIErrorCode=n.LogLevel=n.Client=void 0;var e=ei;Object.defineProperty(n,"Client",{enumerable:!0,get:function(){return e.default}});var t=ti;Object.defineProperty(n,"LogLevel",{enumerable:!0,get:function(){return t.LogLevel}});var r=ri;Object.defineProperty(n,"APIErrorCode",{enumerable:!0,get:function(){return r.APIErrorCode}}),Object.defineProperty(n,"ClientErrorCode",{enumerable:!0,get:function(){return r.ClientErrorCode}}),Object.defineProperty(n,"APIResponseError",{enumerable:!0,get:function(){return r.APIResponseError}}),Object.defineProperty(n,"UnknownHTTPResponseError",{enumerable:!0,get:function(){return r.UnknownHTTPResponseError}}),Object.defineProperty(n,"RequestTimeoutError",{enumerable:!0,get:function(){return r.RequestTimeoutError}}),Object.defineProperty(n,"isNotionClientError",{enumerable:!0,get:function(){return r.isNotionClientError}});var i=ke;Object.defineProperty(n,"collectPaginatedAPI",{enumerable:!0,get:function(){return i.collectPaginatedAPI}}),Object.defineProperty(n,"iteratePaginatedAPI",{enumerable:!0,get:function(){return i.iteratePaginatedAPI}}),Object.defineProperty(n,"isFullBlock",{enumerable:!0,get:function(){return i.isFullBlock}}),Object.defineProperty(n,"isFullDatabase",{enumerable:!0,get:function(){return i.isFullDatabase}}),Object.defineProperty(n,"isFullPage",{enumerable:!0,get:function(){return i.isFullPage}}),Object.defineProperty(n,"isFullUser",{enumerable:!0,get:function(){return i.isFullUser}}),Object.defineProperty(n,"isFullComment",{enumerable:!0,get:function(){return i.isFullComment}})})(Kn);const jr=async()=>new Promise((n,e)=>{chrome.storage.local.get(null,t=>{t?(console.log("Retrieved config from storage",t),n(t)):(console.log("Could not retrieve config from storage"),e())})}),$r=async n=>{console.log("Saving config to storage:",n),chrome.storage.local.set(n)},sn=async n=>{const e=await jr();console.log("Updating config",n);const t=Hr(e,n);$r(t)},Hr=(...n)=>{const e={},t=r=>{let i;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(Object.prototype.toString.call(r[i])==="[object Object]"?e[i]=Hr(e[i]||{},r[i]):e[i]=r[i])};for(let r=0;r<n.length;r++)t(n[r]);return e};function pn(n){return n!=null&&typeof n=="object"}function Xi(n,e){return pn(n)&&Object.entries(e).map(([t,r])=>t in n&&(!pn(r)||Xi(n[t],e[t]))).every(Boolean)}const qe={notion_api_token:"",profile_config:{name:{label:"Name",type:"title",target:""},location:{label:"Location",type:"rich_text",target:""},company:{label:"Company",type:"rich_text",target:""},jobTitle:{label:"Job title",type:"rich_text",target:""},profileUrl:{label:"Profile URL",type:"url",target:""},bio:{label:"Bio",type:"rich_text",target:""},bioUrl:{label:"Bio URL",type:"url",target:""},pictureUrl:{label:"Picture",type:"files",target:""}},isSetCover:!1};function Pi(n){return Xi(n,qe)}function As(n){return Array.isArray(n)&&n.map(e=>Kn.isFullDatabase(e)).every(Boolean)}const tt=n=>n,qs=Qr("home"),Gt=Qr(void 0);function Bs(){const{subscribe:n,set:e,update:t}=Qr(JSON.parse(JSON.stringify(qe)));return{subscribe:n,reset:()=>e(JSON.parse(JSON.stringify(qe))),update:t,set:e}}const fe=Bs(),Dt=Qr(""),{Object:Ns}=Vi,Ce="src/components/Settings.svelte";function gr(n,e,t){const r=n.slice();r[10]=e[t][0],r[11]=e[t][1],r[13]=e,r[14]=t;const i=r[2].profile_config[tt(r[10])];return r[12]=i,r}function vr(n,e,t){const r=n.slice();return r[17]=e[t][0],r[18]=e[t][1],r}function an(n){const e=n.slice(),t=Object.entries(e[15]).filter(([,r])=>e[12].type===r.type);return e[16]=t,e}function Zi(n){let e,t,r=n[11].label+"",i,o,s,l,a,c,u,f,d,h,y={ctx:n,current:null,token:null,hasCatch:!0,pending:oo,then:eo,catch:Ki,value:15};At(l=n[1],y);function b(){n[4].call(s,n[10])}const g={c:function(){e=E("div"),t=E("label"),i=N(r),o=U(),s=E("select"),y.block.c(),u=U(),f=E("div"),this.h()},l:function(w){e=C(w,"DIV",{class:!0});var I=S(e);t=C(I,"LABEL",{for:!0,class:!0,title:!0});var q=S(t);i=M(q,r),q.forEach(v),o=L(I),s=C(I,"SELECT",{id:!0,class:!0});var R=S(s);y.block.l(R),R.forEach(v),I.forEach(v),u=L(w),f=C(w,"DIV",{class:!0}),S(f).forEach(v),this.h()},h:function(){var w,I;_(t,"for",n[10]+"_select"),_(t,"class","w-20 flex-none text-sm"),_(t,"title",`type: ${n[11].type}`),k(t,Ce,19,3,709),_(s,"id",n[10]+"_select"),_(s,"class",a="btn "+(n[12].target?"font-normal":"disabled")+" "+(n[12].label==="Name"&&n[2].profile_config.name.target===""&&((w=n[2].db)==null?void 0:w.id)?"ring-2 ring-red-500":"")+" text-sm w-full border-r-8 border-transparent"),s.disabled=c=!((I=n[2].db)!=null&&I.id),n[2].profile_config[tt(n[10])].target===void 0&&zi(b),k(s,Ce,22,3,841),_(e,"class","flex gap-4 items-center w-full"),k(e,Ce,18,2,661),_(f,"class","p-[0.35rem]"),k(f,Ce,70,2,2717)},m:function(w,I){F(w,e,I),m(e,t),m(t,i),m(e,o),m(e,s),y.block.m(s,y.anchor=null),y.mount=()=>s,y.anchor=null,Mr(s,n[2].profile_config[tt(n[10])].target),F(w,u,I),F(w,f,I),d||(h=[at(s,"change",b),at(s,"change",n[5],!1,!1,!1)],d=!0)},p:function(w,I){var q,R;n=w,y.ctx=n,I&2&&l!==(l=n[1])&&At(l,y)||_n(y,n,I),I&6&&a!==(a="btn "+(n[12].target?"font-normal":"disabled")+" "+(n[12].label==="Name"&&n[2].profile_config.name.target===""&&((q=n[2].db)==null?void 0:q.id)?"ring-2 ring-red-500":"")+" text-sm w-full border-r-8 border-transparent")&&_(s,"class",a),I&6&&c!==(c=!((R=n[2].db)!=null&&R.id))&&Fe(s,"disabled",c),I&6&&Mr(s,n[2].profile_config[tt(n[10])].target)},d:function(w){w&&v(e),y.block.d(),y.token=null,y=null,w&&v(u),w&&v(f),d=!1,Ji(h)}};return A("SvelteRegisterBlock",{block:g,id:Zi.name,type:"if",source:"(18:1) {#if k_field !== 'pictureUrl'}",ctx:n}),g}function Ki(n){let e,t;const r={c:function(){e=E("option"),t=N("- connection error -"),this.h()},l:function(o){e=C(o,"OPTION",{});var s=S(e);t=M(s,"- connection error -"),s.forEach(v),this.h()},h:function(){e.selected=!0,e.disabled=!0,e.__value=" - connection error - ",e.value=e.__value,k(e,Ce,66,5,2622)},m:function(o,s){F(o,e,s),m(e,t)},p:ne,d:function(o){o&&v(e)}};return A("SvelteRegisterBlock",{block:r,id:Ki.name,type:"catch",source:"(66:4) {:catch}",ctx:n}),r}function eo(n){let e,t=n[15]&&gn(an(n));const r={c:function(){t&&t.c(),e=K()},l:function(o){t&&t.l(o),e=K()},m:function(o,s){t&&t.m(o,s),F(o,e,s)},p:function(o,s){o[15]?t?t.p(an(o),s):(t=gn(an(o)),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d:function(o){t&&t.d(o),o&&v(e)}};return A("SvelteRegisterBlock",{block:r,id:eo.name,type:"then",source:"(34:4) {:then available_fields}",ctx:n}),r}function gn(n){let e;function t(s,l){return s[16].length?ro:to}let r=t(n),i=r(n);const o={c:function(){i.c(),e=K()},l:function(l){i.l(l),e=K()},m:function(l,a){i.m(l,a),F(l,e,a)},p:function(l,a){r===(r=t(l))&&i?i.p(l,a):(i.d(1),i=r(l),i&&(i.c(),i.m(e.parentNode,e)))},d:function(l){i.d(l),l&&v(e)}};return A("SvelteRegisterBlock",{block:o,id:gn.name,type:"if",source:"(35:5) {#if available_fields}",ctx:n}),o}function to(n){let e,t;const r={c:function(){e=E("option"),t=N("- no matching fields -"),this.h()},l:function(o){e=C(o,"OPTION",{class:!0});var s=S(e);t=M(s,"- no matching fields -"),s.forEach(v),this.h()},h:function(){e.selected=!0,e.disabled=!0,e.__value="",e.value=e.__value,_(e,"class","font-thin"),k(e,Ce,61,7,2390)},m:function(o,s){F(o,e,s),m(e,t)},p:ne,d:function(o){o&&v(e)}};return A("SvelteRegisterBlock",{block:r,id:to.name,type:"else",source:"(61:6) {:else}",ctx:n}),r}function ro(n){let e,t=n[12].target&&Object.values(n[15]).filter(l).length<1,r,i=[],o=new Map,s;function l(...b){return n[3](n[12],...b)}function a(b,g){return b[10]!=="name"?io:no}let u=a(n)(n),f=t&&vn(n),d=n[16];jt(d);const h=b=>b[18].id;$t(n,d,vr,h);for(let b=0;b<d.length;b+=1){let g=vr(n,d,b),p=h(g);o.set(p,i[b]=mn(p,g))}const y={c:function(){u.c(),e=K(),f&&f.c(),r=K();for(let g=0;g<i.length;g+=1)i[g].c();s=K()},l:function(g){u.l(g),e=K(),f&&f.l(g),r=K();for(let p=0;p<i.length;p+=1)i[p].l(g);s=K()},m:function(g,p){u.m(g,p),F(g,e,p),f&&f.m(g,p),F(g,r,p);for(let w=0;w<i.length;w+=1)i[w].m(g,p);F(g,s,p)},p:function(g,p){n=g,p&6&&(t=n[12].target&&Object.values(n[15]).filter(l).length<1),t?f?f.p(n,p):(f=vn(n),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null),p&6&&(d=n[16],jt(d),$t(n,d,vr,h),i=Yn(i,p,h,1,n,d,o,s.parentNode,Xn,mn,s,vr))},d:function(g){u.d(g),g&&v(e),f&&f.d(g),g&&v(r);for(let p=0;p<i.length;p+=1)i[p].d(g);g&&v(s)}};return A("SvelteRegisterBlock",{block:y,id:ro.name,type:"if",source:"(40:6) {#if matching_fields.length}",ctx:n}),y}function no(n){let e,t;const r={c:function(){e=E("option"),t=N("- required - "),this.h()},l:function(o){e=C(o,"OPTION",{class:!0});var s=S(e);t=M(s,"- required - "),s.forEach(v),this.h()},h:function(){e.hidden=!0,e.__value="",e.value=e.__value,_(e,"class","font-normal"),k(e,Ce,43,8,1743)},m:function(o,s){F(o,e,s),m(e,t)},d:function(o){o&&v(e)}};return A("SvelteRegisterBlock",{block:r,id:no.name,type:"else",source:"(43:7) {:else}",ctx:n}),r}function io(n){let e,t;const r={c:function(){e=E("option"),t=N("- disabled - "),this.h()},l:function(o){e=C(o,"OPTION",{class:!0});var s=S(e);t=M(s,"- disabled - "),s.forEach(v),this.h()},h:function(){e.__value="",e.value=e.__value,_(e,"class","font-thin"),k(e,Ce,41,8,1661)},m:function(o,s){F(o,e,s),m(e,t)},d:function(o){o&&v(e)}};return A("SvelteRegisterBlock",{block:r,id:io.name,type:"if",source:"(41:7) {#if k_field !== 'name'}",ctx:n}),r}function vn(n){let e,t,r;const i={c:function(){e=E("option"),t=N(`- property missing -
								`),this.h()},l:function(s){e=C(s,"OPTION",{class:!0});var l=S(e);t=M(l,`- property missing -
								`),l.forEach(v),this.h()},h:function(){e.selected=!0,e.disabled=!0,e.__value=r=n[2].profile_config[tt(n[10])].target,e.value=e.__value,_(e,"class","font-thin text-red-500"),k(e,Ce,46,8,1949)},m:function(s,l){F(s,e,l),m(e,t)},p:function(s,l){l&6&&r!==(r=s[2].profile_config[tt(s[10])].target)&&(Fe(e,"__value",r),e.value=e.__value)},d:function(s){s&&v(e)}};return A("SvelteRegisterBlock",{block:i,id:vn.name,type:"if",source:"(46:7) {#if field.target && Object.values(available_fields).filter((props) => props.id === field.target).length < 1}",ctx:n}),i}function mn(n,e){let t,r=e[17]+"",i,o,s,l;const a={key:n,first:null,c:function(){t=E("option"),i=N(r),o=U(),this.h()},l:function(u){t=C(u,"OPTION",{});var f=S(t);i=M(f,r),o=L(f),f.forEach(v),this.h()},h:function(){t.selected=s=e[18].id===e[12].target,t.__value=l=e[18].id,t.value=t.__value,k(t,Ce,56,8,2253),this.first=t},m:function(u,f){F(u,t,f),m(t,i),m(t,o)},p:function(u,f){e=u,f&6&&r!==(r=e[17]+"")&&bt(i,r),f&6&&s!==(s=e[18].id===e[12].target)&&Fe(t,"selected",s),f&6&&l!==(l=e[18].id)&&(Fe(t,"__value",l),t.value=t.__value)},d:function(u){u&&v(t)}};return A("SvelteRegisterBlock",{block:a,id:mn.name,type:"each",source:"(56:7) {#each matching_fields as [av_field, props] (props.id)}",ctx:e}),a}function oo(n){let e,t,r;const i={c:function(){e=E("option"),t=N("loading..."),this.h()},l:function(s){e=C(s,"OPTION",{});var l=S(e);t=M(l,"loading..."),l.forEach(v),this.h()},h:function(){e.__value=r=n[12].target,e.value=e.__value,e.selected=!0,e.disabled=!0,k(e,Ce,32,5,1329)},m:function(s,l){F(s,e,l),m(e,t)},p:function(s,l){l&6&&r!==(r=s[12].target)&&(Fe(e,"__value",r),e.value=e.__value)},d:function(s){s&&v(e)}};return A("SvelteRegisterBlock",{block:i,id:oo.name,type:"pending",source:"(32:22)       <option value={field.target}",ctx:n}),i}function bn(n,e){let t,r,i=e[10]!=="pictureUrl"&&Zi(e);const o={key:n,first:null,c:function(){t=K(),i&&i.c(),r=K(),this.h()},l:function(l){t=K(),i&&i.l(l),r=K(),this.h()},h:function(){this.first=t},m:function(l,a){F(l,t,a),i&&i.m(l,a),F(l,r,a)},p:function(l,a){e=l,e[10]!=="pictureUrl"&&i.p(e,a)},d:function(l){l&&v(t),i&&i.d(l),l&&v(r)}};return A("SvelteRegisterBlock",{block:o,id:bn.name,type:"each",source:"(16:0) {#each Object.entries(defaultChromeConfig.profile_config) as [k_field, k_value] (k_field)}",ctx:e}),o}function yn(n){let e=[],t=new Map,r,i,o,s,l,a,c,u,f,d,h=Object.entries(qe.profile_config);jt(h);const y=g=>g[10];$t(n,h,gr,y);for(let g=0;g<h.length;g+=1){let p=gr(n,h,g),w=y(p);t.set(w,e[g]=bn(w,p))}const b={c:function(){for(let p=0;p<e.length;p+=1)e[p].c();r=U(),i=E("div"),o=E("label"),s=N("Set picture as cover image"),l=U(),a=E("input"),c=U(),u=E("div"),this.h()},l:function(p){for(let q=0;q<e.length;q+=1)e[q].l(p);r=L(p),i=C(p,"DIV",{class:!0});var w=S(i);o=C(w,"LABEL",{for:!0,class:!0});var I=S(o);s=M(I,"Set picture as cover image"),I.forEach(v),l=L(w),a=C(w,"INPUT",{type:!0,id:!0}),w.forEach(v),c=L(p),u=C(p,"DIV",{class:!0}),S(u).forEach(v),this.h()},h:function(){_(o,"for","set_cover"),_(o,"class","text-sm font-extralight"),k(o,Ce,75,1,2810),_(a,"type","checkbox"),_(a,"id","set_cover"),k(a,Ce,76,1,2903),_(i,"class","flex items-center gap-4 mt-[-8px]"),k(i,Ce,74,0,2761),_(u,"class","p-2"),k(u,Ce,79,0,2976)},m:function(p,w){for(let I=0;I<e.length;I+=1)e[I].m(p,w);F(p,r,w),F(p,i,w),m(i,o),m(o,s),m(i,l),m(i,a),a.checked=n[0],F(p,c,w),F(p,u,w),f||(d=at(a,"change",n[6]),f=!0)},p:function(p,[w]){w&6&&(h=Object.entries(qe.profile_config),jt(h),$t(p,h,gr,y),e=Yn(e,w,y,1,p,h,t,r.parentNode,Xn,bn,r,gr)),w&1&&(a.checked=p[0])},i:ne,o:ne,d:function(p){for(let w=0;w<e.length;w+=1)e[w].d(p);p&&v(r),p&&v(i),p&&v(c),p&&v(u),f=!1,d()}};return A("SvelteRegisterBlock",{block:b,id:yn.name,type:"component",source:"",ctx:n}),b}function Ms(n,e,t){let r;Bt(fe,"config"),Nt(n,fe,g=>t(2,r=g));let{$$slots:i={},$$scope:o}=e;Jt("Settings",i,[]);let{setCover:s}=e,{DB_fields:l}=e;const a=Object.keys(qe.profile_config),c=g=>g in a,u=g=>{if(c(g))return r.profile_config[g]},f=["setCover","DB_fields"];Ns.keys(e).forEach(g=>{!~f.indexOf(g)&&g.slice(0,2)!=="$$"&&g!=="slot"&&console.warn(`<Settings> was created with unknown prop '${g}'`)});const d=(g,p)=>p.id===g.target;function h(g){r.profile_config[tt(g)].target=xi(this),fe.set(r),t(1,l)}const y=()=>{fe.set(r)};function b(){s=this.checked,t(0,s)}return n.$$set=g=>{"setCover"in g&&t(0,s=g.setCover),"DB_fields"in g&&t(1,l=g.DB_fields)},n.$capture_state=()=>({defaultChromeConfig:qe,asKeyOfProfileConfig:tt,config:fe,field_options:qs,setCover:s,DB_fields:l,defaultFields:a,isKeyOfProfileConfig:c,getField:u,$config:r}),n.$inject_state=g=>{"setCover"in g&&t(0,s=g.setCover),"DB_fields"in g&&t(1,l=g.DB_fields)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[s,l,r,d,h,y,b]}class so extends Vt{constructor(e){super(e),xt(this,e,Ms,yn,zt,{setCover:0,DB_fields:1}),A("SvelteRegisterComponent",{component:this,tagName:"Settings",options:e,id:yn.name});const{ctx:t}=this.$$,r=e.props||{};t[0]===void 0&&!("setCover"in r)&&console.warn("<Settings> was created without expected prop 'setCover'"),t[1]===void 0&&!("DB_fields"in r)&&console.warn("<Settings> was created without expected prop 'DB_fields'")}get setCover(){throw new Error("<Settings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set setCover(e){throw new Error("<Settings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get DB_fields(){throw new Error("<Settings>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set DB_fields(e){throw new Error("<Settings>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function ao(n=100,e=999){return n=Math.ceil(n),e=Math.floor(e),Math.floor(Math.random()*(e-n+1))+n}const Us=async n=>{try{const e=await chrome.runtime.sendMessage({listDB:!0,token:n,id:ao()});return console.log("Queried DB list",e),console.log("Queried DB list",e.status,e.message),e.results}catch(e){throw console.log("Couldn't connect to Notion",e),new Error("Couldn't connect to Notion")}},Ei=async(n,e)=>{let t;if(n)await new Promise(r=>setTimeout(r,500)),console.log("Sending request for database list to service-worker"),t=Us(n).then(r=>{if(console.log("Response recieved!",r),As(r)){const i=r.find(o=>o.id===e);return i?[i].concat(r.filter(o=>o.id!=i.id)):r}else return console.log("DB_list response contains no databases"),Promise.reject(new Error("No databases found"))});else return console.log("request DB error: notion API token is undefined"),Promise.reject(new Error("Notion is not connected"));return t},Ls=async(n,e)=>{try{const t=await chrome.runtime.sendMessage({database:e,token:n,id:ao()});if(console.log("Queried DB fields",t),console.log("Queried DB fields",t.status,t.message),t.status!="OK")throw new Error("DB Query response contains error - check logs");return t.results}catch(t){throw console.log("Couldn't connect to Notion",t),new Error("Couldn't connect to Notion")}},js=async(n,e)=>{if(e)return console.log("Sending request for database fields to service-worker"),await Ls(n,e.id).then(r=>{if(Kn.isFullDatabase(r))return console.log("[requestDBfields] Response recieved!",r),r.properties;throw new Error("[requestDBfields] Uncomplete response from Notion")}).catch(r=>{throw console.log(r),new Error(r)});console.log("Error, no database id found in config")},$e="src/components/Icon.svelte";function lo(n){let e,t;const r={c:function(){e=Le("svg"),t=Le("path"),this.h()},l:function(o){e=je(o,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=S(e);t=je(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),S(t).forEach(v),s.forEach(v),this.h()},h:function(){_(t,"stroke-linecap","round"),_(t,"stroke-linejoin","round"),_(t,"d","M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"),k(t,$e,85,2,2977),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"fill","none"),_(e,"viewBox","0 0 24 24"),_(e,"stroke-width","1.5"),_(e,"stroke",n[2]),_(e,"class",n[1]),k(e,$e,77,1,2836)},m:function(o,s){F(o,e,s),m(e,t)},p:function(o,s){s&4&&_(e,"stroke",o[2]),s&2&&_(e,"class",o[1])},d:function(o){o&&v(e)}};return A("SvelteRegisterBlock",{block:r,id:lo.name,type:"if",source:"(77:42) ",ctx:n}),r}function co(n){let e,t;const r={c:function(){e=Le("svg"),t=Le("path"),this.h()},l:function(o){e=je(o,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=S(e);t=je(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),S(t).forEach(v),s.forEach(v),this.h()},h:function(){_(t,"stroke-linecap","round"),_(t,"stroke-linejoin","round"),_(t,"d","M19.5 8.25l-7.5 7.5-7.5-7.5"),k(t,$e,74,2,2696),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"fill","none"),_(e,"viewBox","0 0 24 24"),_(e,"stroke-width","1.5"),_(e,"stroke",n[2]),_(e,"class",n[1]),k(e,$e,66,1,2555)},m:function(o,s){F(o,e,s),m(e,t)},p:function(o,s){s&4&&_(e,"stroke",o[2]),s&2&&_(e,"class",o[1])},d:function(o){o&&v(e)}};return A("SvelteRegisterBlock",{block:r,id:co.name,type:"if",source:"(66:32) ",ctx:n}),r}function uo(n){let e,t;const r={c:function(){e=Le("svg"),t=Le("path"),this.h()},l:function(o){e=je(o,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=S(e);t=je(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),S(t).forEach(v),s.forEach(v),this.h()},h:function(){_(t,"fill-rule","evenodd"),_(t,"d","M3.75 12a.75.75 0 01.75-.75h15a.75.75 0 010 1.5h-15a.75.75 0 01-.75-.75z"),_(t,"clip-rule","evenodd"),k(t,$e,63,4,2385),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"fill","none"),_(e,"viewBox","0 0 24 24"),_(e,"stroke-width","1.5"),_(e,"stroke",n[2]),_(e,"class",n[1]),k(e,$e,55,1,2242)},m:function(o,s){F(o,e,s),m(e,t)},p:function(o,s){s&4&&_(e,"stroke",o[2]),s&2&&_(e,"class",o[1])},d:function(o){o&&v(e)}};return A("SvelteRegisterBlock",{block:r,id:uo.name,type:"if",source:"(55:28) ",ctx:n}),r}function fo(n){let e,t;const r={c:function(){e=Le("svg"),t=Le("path"),this.h()},l:function(o){e=je(o,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=S(e);t=je(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),S(t).forEach(v),s.forEach(v),this.h()},h:function(){_(t,"fill-rule","evenodd"),_(t,"d","M19.916 4.626a.75.75 0 01.208 1.04l-9 13.5a.75.75 0 01-1.154.114l-6-6a.75.75 0 011.06-1.06l5.353 5.353 8.493-12.739a.75.75 0 011.04-.208z"),_(t,"clip-rule","evenodd"),k(t,$e,48,2,2001),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"fill","none"),_(e,"viewBox","0 0 24 24"),_(e,"stroke-width","1.5"),_(e,"stroke",n[2]),_(e,"class",n[1]),k(e,$e,40,1,1860)},m:function(o,s){F(o,e,s),m(e,t)},p:function(o,s){s&4&&_(e,"stroke",o[2]),s&2&&_(e,"class",o[1])},d:function(o){o&&v(e)}};return A("SvelteRegisterBlock",{block:r,id:fo.name,type:"if",source:"(39:28) ",ctx:n}),r}function _o(n){let e,t;const r={c:function(){e=Le("svg"),t=Le("path"),this.h()},l:function(o){e=je(o,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=S(e);t=je(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),S(t).forEach(v),s.forEach(v),this.h()},h:function(){_(t,"fill-rule","evenodd"),_(t,"d","M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z"),_(t,"clip-rule","evenodd"),k(t,$e,32,2,1647),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"fill","none"),_(e,"viewBox","0 0 24 24"),_(e,"stroke-width","1.5"),_(e,"stroke",n[2]),_(e,"class",n[1]),k(e,$e,24,1,1506)},m:function(o,s){F(o,e,s),m(e,t)},p:function(o,s){s&4&&_(e,"stroke",o[2]),s&2&&_(e,"class",o[1])},d:function(o){o&&v(e)}};return A("SvelteRegisterBlock",{block:r,id:_o.name,type:"if",source:"(23:33) ",ctx:n}),r}function ho(n){let e,t;const r={c:function(){e=Le("svg"),t=Le("path"),this.h()},l:function(o){e=je(o,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=S(e);t=je(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),S(t).forEach(v),s.forEach(v),this.h()},h:function(){_(t,"fill-rule","evenodd"),_(t,"d","M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 00-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 00-2.282.819l-.922 1.597a1.875 1.875 0 00.432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 000 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 00-.432 2.385l.922 1.597a1.875 1.875 0 002.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 002.28-.819l.923-1.597a1.875 1.875 0 00-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 000-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 00-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 00-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 00-1.85-1.567h-1.843zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z"),_(t,"clip-rule","evenodd"),k(t,$e,15,2,356),_(e,"xmlns","http://www.w3.org/2000/svg"),_(e,"fill","none"),_(e,"viewBox","0 0 24 24"),_(e,"stroke-width","1.5"),_(e,"stroke",n[2]),_(e,"class",n[1]),k(e,$e,7,1,215)},m:function(o,s){F(o,e,s),m(e,t)},p:function(o,s){s&4&&_(e,"stroke",o[2]),s&2&&_(e,"class",o[1])},d:function(o){o&&v(e)}};return A("SvelteRegisterBlock",{block:r,id:ho.name,type:"if",source:"(7:0) {#if icon === 'settings'}",ctx:n}),r}function wn(n){let e;function t(s,l){if(s[0]==="settings")return ho;if(s[0]==="left_arrow")return _o;if(s[0]==="check")return fo;if(s[0]==="minus")return uo;if(s[0]==="arrow_down")return co;if(s[0]==="question-mark-circle")return lo}let r=t(n),i=r&&r(n);const o={c:function(){i&&i.c(),e=K()},l:function(l){i&&i.l(l),e=K()},m:function(l,a){i&&i.m(l,a),F(l,e,a)},p:function(l,[a]){r===(r=t(l))&&i?i.p(l,a):(i&&i.d(1),i=r&&r(l),i&&(i.c(),i.m(e.parentNode,e)))},i:ne,o:ne,d:function(l){i&&i.d(l),l&&v(e)}};return A("SvelteRegisterBlock",{block:o,id:wn.name,type:"component",source:"",ctx:n}),o}function $s(n,e,t){let{$$slots:r={},$$scope:i}=e;Jt("Icon",r,[]);let{icon:o=""}=e,{css_class:s="absolute top-14 left-12 w-6 h-6 text-gray-600"}=e,{color:l="currentColor"}=e;const a=["icon","css_class","color"];return Object.keys(e).forEach(c=>{!~a.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<Icon> was created with unknown prop '${c}'`)}),n.$$set=c=>{"icon"in c&&t(0,o=c.icon),"css_class"in c&&t(1,s=c.css_class),"color"in c&&t(2,l=c.color)},n.$capture_state=()=>({icon:o,css_class:s,color:l}),n.$inject_state=c=>{"icon"in c&&t(0,o=c.icon),"css_class"in c&&t(1,s=c.css_class),"color"in c&&t(2,l=c.color)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[o,s,l]}class sr extends Vt{constructor(e){super(e),xt(this,e,$s,wn,zt,{icon:0,css_class:1,color:2}),A("SvelteRegisterComponent",{component:this,tagName:"Icon",options:e,id:wn.name})}get icon(){throw new Error("<Icon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set icon(e){throw new Error("<Icon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get css_class(){throw new Error("<Icon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set css_class(e){throw new Error("<Icon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get color(){throw new Error("<Icon>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set color(e){throw new Error("<Icon>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const{Error:Tt,Object:Hs,console:Vs}=Vi,re="src/components/Home.svelte";function mr(n,e,t){const r=n.slice();return r[19]=e[t],r}function ln(n){const e=n.slice(),t=e[2].db;return e[19]=t,e}function kn(n){let e,t,r,i,o,s,l,a,c;const u={c:function(){e=E("div"),t=E("div"),r=E("img"),o=U(),s=E("button"),l=N("Log out"),this.h()},l:function(d){e=C(d,"DIV",{class:!0});var h=S(e);t=C(h,"DIV",{class:!0});var y=S(t);r=C(y,"IMG",{src:!0,alt:!0,class:!0}),y.forEach(v),o=L(h),s=C(h,"BUTTON",{class:!0});var b=S(s);l=M(b,"Log out"),b.forEach(v),h.forEach(v),this.h()},h:function(){Zt(r.src,i="peopletonotion_full_logo.svg")||_(r,"src",i),_(r,"alt","peopletonotion"),_(r,"class","h-[38px] s-_fp33DPJbrm1"),k(r,re,152,4,6247),_(t,"class","flex gap-2 items-center s-_fp33DPJbrm1"),k(t,re,151,3,6205),_(s,"class","btn ghost font-light -mr-[18px] s-_fp33DPJbrm1"),k(s,re,156,3,6531),_(e,"class","flex gap-2 items-center justify-between w-full s-_fp33DPJbrm1"),k(e,re,150,2,6141)},m:function(d,h){F(d,e,h),m(e,t),m(t,r),m(e,o),m(e,s),m(s,l),a||(c=at(s,"click",n[10],!1,!1,!1),a=!0)},p:ne,d:function(d){d&&v(e),a=!1,c()}};return A("SvelteRegisterBlock",{block:u,id:kn.name,type:"if",source:"(150:1) {#if !minimalDisplay}",ctx:n}),u}function po(n){let e,t=n[22].message+"",r,i;const o={c:function(){e=E("option"),r=N(t),this.h()},l:function(l){e=C(l,"OPTION",{class:!0});var a=S(e);r=M(a,t),a.forEach(v),this.h()},h:function(){e.disabled=!0,e.selected=!0,e.__value=i=n[2].db,e.value=e.__value,_(e,"class","s-_fp33DPJbrm1"),k(e,re,203,5,8388)},m:function(l,a){F(l,e,a),m(e,r)},p:function(l,a){a&8&&t!==(t=l[22].message+"")&&bt(r,t),a&12&&i!==(i=l[2].db)&&(Fe(e,"__value",i),e.value=e.__value)},d:function(l){l&&v(e)}};return A("SvelteRegisterBlock",{block:o,id:po.name,type:"catch",source:"(203:4) {:catch error}",ctx:n}),o}function go(n){let e;function t(s,l){return s[18]&&s[18].length?mo:vo}let r=t(n),i=r(n);const o={c:function(){i.c(),e=K()},l:function(l){i.l(l),e=K()},m:function(l,a){i.m(l,a),F(l,e,a)},p:function(l,a){r===(r=t(l))&&i?i.p(l,a):(i.d(1),i=r(l),i&&(i.c(),i.m(e.parentNode,e)))},d:function(l){i.d(l),l&&v(e)}};return A("SvelteRegisterBlock",{block:o,id:go.name,type:"then",source:"(183:4) {:then database_list}",ctx:n}),o}function vo(n){let e,t,r;const i={c:function(){e=E("option"),t=N("- need permissions -"),this.h()},l:function(s){e=C(s,"OPTION",{class:!0});var l=S(e);t=M(l,"- need permissions -"),l.forEach(v),this.h()},h:function(){e.disabled=!0,e.selected=!0,e.__value=r=n[2].db,e.value=e.__value,_(e,"class","s-_fp33DPJbrm1"),k(e,re,200,6,8276)},m:function(s,l){F(s,e,l),m(e,t)},p:function(s,l){l&12&&r!==(r=s[2].db)&&(Fe(e,"__value",r),e.value=e.__value)},d:function(s){s&&v(e)}};return A("SvelteRegisterBlock",{block:i,id:vo.name,type:"else",source:"(200:5) {:else}",ctx:n}),i}function mo(n){let e,t=[],r=new Map,i,o=n[2].db&&n[5]&&Sn(ln(n)),s=n[18];jt(s);const l=c=>c[19].id;$t(n,s,mr,l);for(let c=0;c<s.length;c+=1){let u=mr(n,s,c),f=l(u);r.set(f,t[c]=Pn(f,u))}const a={c:function(){o&&o.c(),e=K();for(let u=0;u<t.length;u+=1)t[u].c();i=K()},l:function(u){o&&o.l(u),e=K();for(let f=0;f<t.length;f+=1)t[f].l(u);i=K()},m:function(u,f){o&&o.m(u,f),F(u,e,f);for(let d=0;d<t.length;d+=1)t[d].m(u,f);F(u,i,f)},p:function(u,f){u[2].db&&u[5]?o?o.p(ln(u),f):(o=Sn(ln(u)),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),f&12&&(s=u[18],jt(s),$t(u,s,mr,l),t=Yn(t,f,l,1,u,s,r,i.parentNode,Xn,Pn,i,mr))},d:function(u){o&&o.d(u),u&&v(e);for(let f=0;f<t.length;f+=1)t[f].d(u);u&&v(i)}};return A("SvelteRegisterBlock",{block:a,id:mo.name,type:"if",source:"(184:5) {#if database_list && database_list.length}",ctx:n}),a}function Sn(n){var f,d,h;let e,t=(((f=n[19].icon)==null?void 0:f.type)=="emoji"?(d=n[19].icon)==null?void 0:d.emoji:"")+"",r,i,o=(((h=n[19].title[0])==null?void 0:h.plain_text)||"")+"",s,l,a,c;const u={c:function(){e=E("option"),r=N(t),i=U(),s=N(o),l=U(),this.h()},l:function(b){e=C(b,"OPTION",{class:!0});var g=S(e);r=M(g,t),i=L(g),s=M(g,o),l=L(g),g.forEach(v),this.h()},h:function(){var b;e.disabled=!0,e.selected=a=n[19].id==((b=n[2].db)==null?void 0:b.id),e.__value=c=n[19],e.value=e.__value,_(e,"class","s-_fp33DPJbrm1"),k(e,re,186,7,7593)},m:function(b,g){F(b,e,g),m(e,r),m(e,i),m(e,s),m(e,l)},p:function(b,g){var p,w,I,q;g&4&&t!==(t=(((p=b[19].icon)==null?void 0:p.type)=="emoji"?(w=b[19].icon)==null?void 0:w.emoji:"")+"")&&bt(r,t),g&4&&o!==(o=(((I=b[19].title[0])==null?void 0:I.plain_text)||"")+"")&&bt(s,o),g&12&&a!==(a=b[19].id==((q=b[2].db)==null?void 0:q.id))&&Fe(e,"selected",a),g&12&&c!==(c=b[19])&&(Fe(e,"__value",c),e.value=e.__value)},d:function(b){b&&v(e)}};return A("SvelteRegisterBlock",{block:u,id:Sn.name,type:"if",source:"(185:6) {#if $config.db && missing_db}",ctx:n}),u}function Pn(n,e){var d,h,y;let t,r=(((d=e[19].icon)==null?void 0:d.type)=="emoji"?(h=e[19].icon)==null?void 0:h.emoji:"")+"",i,o,s=(((y=e[19].title[0])==null?void 0:y.plain_text)||"")+"",l,a,c,u;const f={key:n,first:null,c:function(){t=E("option"),i=N(r),o=U(),l=N(s),a=U(),this.h()},l:function(g){t=C(g,"OPTION",{class:!0});var p=S(t);i=M(p,r),o=L(p),l=M(p,s),a=L(p),p.forEach(v),this.h()},h:function(){var g;t.selected=c=e[19].id==((g=e[2].db)==null?void 0:g.id),t.__value=u=e[19],t.value=t.__value,_(t,"class","s-_fp33DPJbrm1"),k(t,re,193,7,7959),this.first=t},m:function(g,p){F(g,t,p),m(t,i),m(t,o),m(t,l),m(t,a)},p:function(g,p){var w,I,q,R;e=g,p&8&&r!==(r=(((w=e[19].icon)==null?void 0:w.type)=="emoji"?(I=e[19].icon)==null?void 0:I.emoji:"")+"")&&bt(i,r),p&8&&s!==(s=(((q=e[19].title[0])==null?void 0:q.plain_text)||"")+"")&&bt(l,s),p&12&&c!==(c=e[19].id==((R=e[2].db)==null?void 0:R.id))&&Fe(t,"selected",c),p&8&&u!==(u=e[19])&&(Fe(t,"__value",u),t.value=t.__value)},d:function(g){g&&v(t)}};return A("SvelteRegisterBlock",{block:f,id:Pn.name,type:"each",source:"(193:6) {#each database_list as database (database.id)}",ctx:e}),f}function bo(n){let e,t,r;const i={c:function(){e=E("option"),t=N("loading..."),this.h()},l:function(s){e=C(s,"OPTION",{class:!0});var l=S(e);t=M(l,"loading..."),l.forEach(v),this.h()},h:function(){e.disabled=!0,e.selected=!0,e.__value=r=n[2].db,e.value=e.__value,_(e,"class","s-_fp33DPJbrm1"),k(e,re,181,5,7369)},m:function(s,l){F(s,e,l),m(e,t)},p:function(s,l){l&12&&r!==(r=s[2].db)&&(Fe(e,"__value",r),e.value=e.__value)},d:function(s){s&&v(e)}};return A("SvelteRegisterBlock",{block:i,id:bo.name,type:"pending",source:"(173:20)       <!-- {#if $config.db}",ctx:n}),i}function yo(n){let e;const t={c:function(){e=E("p"),this.h()},l:function(i){e=C(i,"P",{class:!0}),S(e).forEach(v),this.h()},h:function(){_(e,"class","s-_fp33DPJbrm1"),k(e,re,225,4,9095)},m:function(i,o){F(i,e,o)},p:ne,i:ne,o:ne,d:function(i){i&&v(e)}};return A("SvelteRegisterBlock",{block:t,id:yo.name,type:"catch",source:"(225:3) {:catch}",ctx:n}),t}function wo(n){let e,t,r=!(n[18]&&n[18].length)&&En(n);const i={c:function(){r&&r.c(),e=K()},l:function(s){r&&r.l(s),e=K()},m:function(s,l){r&&r.m(s,l),F(s,e,l),t=!0},p:function(s,l){s[18]&&s[18].length?r&&(Kt(),_e(r,1,1,()=>{r=null}),er()):r?l&8&&le(r,1):(r=En(s),r.c(),le(r,1),r.m(e.parentNode,e))},i:function(s){t||(le(r),t=!0)},o:function(s){_e(r),t=!1},d:function(s){r&&r.d(s),s&&v(e)}};return A("SvelteRegisterBlock",{block:i,id:wo.name,type:"then",source:"(207:38)      {#if !(database_list && database_list.length)}",ctx:n}),i}function En(n){let e,t,r,i,o,s;o=new sr({props:{icon:"question-mark-circle",css_class:"w-6 h-6 opacity-70 group-hover:opacity-100"},$$inline:!0});const l={c:function(){e=E("a"),t=E("div"),r=E("span"),i=U(),lt(o.$$.fragment),this.h()},l:function(c){e=C(c,"A",{href:!0,target:!0,class:!0});var u=S(e);t=C(u,"DIV",{class:!0});var f=S(t);r=C(f,"SPAN",{class:!0}),S(r).forEach(v),f.forEach(v),i=L(u),ct(o.$$.fragment,u),u.forEach(v),this.h()},h:function(){_(r,"class","inline-flex h-5 w-5 rounded-full bg-sky-400 opacity-75 animate-ping group-hover:invisible s-_fp33DPJbrm1"),k(r,re,214,7,8806),_(t,"class","absolute flex flex-col items-center justify-center w-full h-full s-_fp33DPJbrm1"),k(t,re,213,6,8720),_(e,"href","https://www.peopletonotion.com/notion-permissions"),_(e,"target","_blank"),_(e,"class","absolute -right-8 group s-_fp33DPJbrm1"),k(e,re,208,5,8581)},m:function(c,u){F(c,e,u),m(e,t),m(t,r),m(e,i),ut(o,e,null),s=!0},i:function(c){s||(le(o.$$.fragment,c),s=!0)},o:function(c){_e(o.$$.fragment,c),s=!1},d:function(c){c&&v(e),ft(o)}};return A("SvelteRegisterBlock",{block:l,id:En.name,type:"if",source:"(208:4) {#if !(database_list && database_list.length)}",ctx:n}),l}function ko(n){const e={c:ne,l:ne,m:ne,p:ne,i:ne,o:ne,d:ne};return A("SvelteRegisterBlock",{block:e,id:ko.name,type:"pending",source:'(1:0) <script lang=\\"ts\\">import { onMount }',ctx:n}),e}function So(n){let e=n[0]?"Save config":"Config saved",t;const r={c:function(){t=N(e)},l:function(o){t=M(o,e)},m:function(o,s){F(o,t,s)},p:function(o,s){s&1&&e!==(e=o[0]?"Save config":"Config saved")&&bt(t,e)},d:function(o){o&&v(t)}};return A("SvelteRegisterBlock",{block:r,id:So.name,type:"else",source:"(240:2) {:else}",ctx:n}),r}function Po(n){let e=(n[0]?n[8][0]:n[8][1])+"",t;const r={c:function(){t=N(e)},l:function(o){t=M(o,e)},m:function(o,s){F(o,t,s)},p:function(o,s){s&1&&e!==(e=(o[0]?o[8][0]:o[8][1])+"")&&bt(t,e)},d:function(o){o&&v(t)}};return A("SvelteRegisterBlock",{block:r,id:Po.name,type:"if",source:"(238:2) {#if !minimalDisplay}",ctx:n}),r}function Cn(n){let e,t,r,i,o,s,l,a,c;const u={c:function(){e=E("p"),t=E("a"),r=N("Give feedback, report bug"),i=U(),o=E("span"),s=N("or"),l=U(),a=E("a"),c=N("manage subscription"),this.h()},l:function(d){e=C(d,"P",{class:!0});var h=S(e);t=C(h,"A",{href:!0,target:!0,class:!0});var y=S(t);r=M(y,"Give feedback, report bug"),y.forEach(v),i=L(h),o=C(h,"SPAN",{class:!0});var b=S(o);s=M(b,"or"),b.forEach(v),l=L(h),a=C(h,"A",{href:!0,target:!0,class:!0});var g=S(a);c=M(g,"manage subscription"),g.forEach(v),h.forEach(v),this.h()},h:function(){_(t,"href","https://peopletonotion.com/contact/"),_(t,"target","_blank"),_(t,"class","feedback -mb-4 s-_fp33DPJbrm1"),k(t,re,246,3,9511),_(o,"class","opacity-70 s-_fp33DPJbrm1"),k(o,re,249,3,9638),_(a,"href","https://billing.stripe.com/p/login/9AQ29i7s2dir2ycdQQ"),_(a,"target","_blank"),_(a,"class","feedback -mb-4 s-_fp33DPJbrm1"),k(a,re,250,3,9678),_(e,"class","text-xs s-_fp33DPJbrm1"),k(e,re,245,2,9488)},m:function(d,h){F(d,e,h),m(e,t),m(t,r),m(e,i),m(e,o),m(o,s),m(e,l),m(e,a),m(a,c)},d:function(d){d&&v(e)}};return A("SvelteRegisterBlock",{block:u,id:Cn.name,type:"if",source:"(245:1) {#if !minimalDisplay}",ctx:n}),u}function On(n){let e,t,r,i,o,s,l,a,c,u,f,d,h,y,b,g,p,w,I,q,R,V,j,P,B,ee,Q,Ie,D=!n[1]&&kn(n),Y={ctx:n,current:null,token:null,hasCatch:!0,pending:bo,then:go,catch:po,value:18,error:22};At(f=n[3],Y);let x={ctx:n,current:null,token:null,hasCatch:!0,pending:ko,then:wo,catch:yo,value:18,blocks:[,,,]};At(y=n[3],x);function W(de){n[15](de)}let J={DB_fields:n[4]};n[2].isSetCover!==void 0&&(J.setCover=n[2].isSetCover),w=new so({props:J,$$inline:!0}),Gi.push(()=>Wi(w,"setCover",W));function X(de,ue){return de[1]?So:Po}let se=X(n),ae=se(n),ce=!n[1]&&Cn(n);const be={c:function(){e=E("div"),D&&D.c(),t=U(),r=E("div"),i=U(),o=E("div"),s=E("label"),l=N("Database"),a=U(),c=E("div"),u=E("select"),Y.block.c(),h=U(),x.block.c(),b=U(),g=E("div"),p=U(),lt(w.$$.fragment),q=U(),R=E("div"),V=U(),j=E("button"),ae.c(),B=U(),ce&&ce.c(),this.h()},l:function(ue){e=C(ue,"DIV",{class:!0});var T=S(e);D&&D.l(T),t=L(T),r=C(T,"DIV",{class:!0}),S(r).forEach(v),i=L(T),o=C(T,"DIV",{class:!0});var G=S(o);s=C(G,"LABEL",{for:!0,class:!0});var Ue=S(s);l=M(Ue,"Database"),Ue.forEach(v),a=L(G),c=C(G,"DIV",{class:!0});var Ve=S(c);u=C(Ve,"SELECT",{id:!0,class:!0,placeholder:!0});var Qe=S(u);Y.block.l(Qe),Qe.forEach(v),h=L(Ve),x.block.l(Ve),Ve.forEach(v),G.forEach(v),b=L(T),g=C(T,"DIV",{class:!0}),S(g).forEach(v),p=L(T),ct(w.$$.fragment,T),q=L(T),R=C(T,"DIV",{class:!0}),S(R).forEach(v),V=L(T),j=C(T,"BUTTON",{class:!0});var dt=S(j);ae.l(dt),dt.forEach(v),B=L(T),ce&&ce.l(T),T.forEach(v),this.h()},h:function(){_(r,"class","p-4 s-_fp33DPJbrm1"),k(r,re,159,1,6634),_(s,"for","db_list"),_(s,"class","text-sm w-20 flex-none s-_fp33DPJbrm1"),k(s,re,162,2,6703),_(u,"id","db_list"),_(u,"class","btn "+(n[7]?"light":"")+" w-full border-r-8 border-transparent s-_fp33DPJbrm1"),u.disabled=d=!n[2].notion_api_token,_(u,"placeholder","- select database -"),n[2].db===void 0&&zi(()=>n[14].call(u)),k(u,re,164,3,6833),_(c,"class","flex items-center gap-1 w-full relative s-_fp33DPJbrm1"),k(c,re,163,2,6776),_(o,"class","flex gap-4 items-center w-full s-_fp33DPJbrm1"),k(o,re,161,1,6656),_(g,"class","p-[0.35rem] s-_fp33DPJbrm1"),k(g,re,230,1,9132),_(R,"class","p-2 s-_fp33DPJbrm1"),k(R,re,234,1,9224),j.disabled=P=!n[6],_(j,"class","btn primary w-full s-_fp33DPJbrm1"),k(j,re,236,1,9246),_(e,"class","flex flex-col items-center max-w-xs w-full s-_fp33DPJbrm1"),k(e,re,148,0,6059)},m:function(ue,T){F(ue,e,T),D&&D.m(e,null),m(e,t),m(e,r),m(e,i),m(e,o),m(o,s),m(s,l),m(o,a),m(o,c),m(c,u),Y.block.m(u,Y.anchor=null),Y.mount=()=>u,Y.anchor=null,Mr(u,n[2].db),m(c,h),x.block.m(c,x.anchor=null),x.mount=()=>c,x.anchor=null,m(e,b),m(e,g),m(e,p),ut(w,e,null),m(e,q),m(e,R),m(e,V),m(e,j),ae.m(j,null),m(e,B),ce&&ce.m(e,null),ee=!0,Q||(Ie=[at(u,"change",n[14]),at(u,"change",n[11],!1,!1,!1),at(j,"click",n[9],!1,!1,!1)],Q=!0)},p:function(ue,[T]){n=ue,n[1]?D&&(D.d(1),D=null):D?D.p(n,T):(D=kn(n),D.c(),D.m(e,t)),Y.ctx=n,T&8&&f!==(f=n[3])&&At(f,Y)||_n(Y,n,T),(!ee||T&12&&d!==(d=!n[2].notion_api_token))&&Fe(u,"disabled",d),T&12&&Mr(u,n[2].db),x.ctx=n,T&8&&y!==(y=n[3])&&At(y,x)||_n(x,n,T);const G={};T&16&&(G.DB_fields=n[4]),!I&&T&4&&(I=!0,G.setCover=n[2].isSetCover,Qi(()=>I=!1)),w.$set(G),se===(se=X(n))&&ae?ae.p(n,T):(ae.d(1),ae=se(n),ae&&(ae.c(),ae.m(j,null))),(!ee||T&64&&P!==(P=!n[6]))&&Fe(j,"disabled",P),n[1]?ce&&(ce.d(1),ce=null):ce||(ce=Cn(n),ce.c(),ce.m(e,null))},i:function(ue){ee||(le(x.block),le(w.$$.fragment,ue),ee=!0)},o:function(ue){for(let T=0;T<3;T+=1){const G=x.blocks[T];_e(G)}_e(w.$$.fragment,ue),ee=!1},d:function(ue){ue&&v(e),D&&D.d(),Y.block.d(),Y.token=null,Y=null,x.block.d(),x.token=null,x=null,ft(w),ae.d(),ce&&ce.d(),Q=!1,Ji(Ie)}};return A("SvelteRegisterBlock",{block:be,id:On.name,type:"component",source:"",ctx:n}),be}function Ci(n){return new Promise(e=>setTimeout(e,n))}function xs(n,e,t){let r,i;Bt(fe,"config"),Nt(n,fe,P=>t(2,r=P)),Bt(Dt,"idOfProfileConfig"),Nt(n,Dt,P=>t(16,i=P));let{$$slots:o={},$$scope:s}=e;Jt("Home",o,[]);let l,{isSave:a=!0}=e,{minimalDisplay:c=!1}=e,{timeout:u=0}=e,f=!1,d;const h=["Save config & close","Config saved"];async function y(){const{error:P}=await Mt.auth.signOut();console.log(P||"User has signed out",Mt.auth.getUser())}const b=()=>{a&&(t(0,a=!1),$r(r),t(13,d=JSON.parse(JSON.stringify(r))),c||setTimeout(()=>{t(0,a=!0),window.close()},500))},g=()=>{console.log("Deleting saved config"),chrome.storage.local.clear(),fe.reset(),y()};console.log("Reading default profile_config 2",qe.profile_config);const p=async()=>{console.log("New database selected!"),t(5,I=!1),r.db&&(t(4,w=l.then(P=>{var B;return(B=P==null?void 0:P.find(ee=>{var Q;return ee.id===((Q=r.db)==null?void 0:Q.id)}))==null?void 0:B.properties}).then(P=>(console.log("DB_fields set to",P),P))),console.log("serverConfig is",d),console.log("local config is",r),console.log("Reading default profile_config 1",qe.profile_config),i!==r.db.id&&((d==null?void 0:d.db)&&d.db.id===r.db.id?(Ze(fe,r.profile_config=JSON.parse(JSON.stringify(d.profile_config||qe.profile_config)),r),Ze(Dt,i=r.db.id,i),console.log("Setting profile_config to server if any or default",r.profile_config)):(console.log("Reading default profile_config 0",qe.profile_config),Ze(fe,r.profile_config=JSON.parse(JSON.stringify(qe.profile_config)),r),console.log("Setting profile_config to default",r.profile_config),Ze(Dt,i=r.db.id,i))))};let w,I=!1;Ur(async()=>{Ci(u).then(()=>jr()).then(P=>{var B,ee,Q,Ie;Pi(P)?(console.log("Copying over serverConfig",P),fe.set(P),t(13,d=JSON.parse(JSON.stringify(P)))):(console.log("ServerConfig has improper structure or is empty"),fe.set(Hr(r,P))),console.log("Selected config",r),console.log("Database ID in config is",(B=r.db)==null?void 0:B.id),console.log("Database name in config is",(ee=r.db)==null?void 0:ee.title[0].plain_text),Ze(Dt,i=(Q=r.db)==null?void 0:Q.id,i),r.db,console.log("Finished reading ServerConfig"),t(3,l=Ei(r.notion_api_token,(Ie=r.db)==null?void 0:Ie.id)),t(4,w=l.then(D=>{var Y,x;if(!((Y=r.db)!=null&&Y.id)&&D)return Ze(fe,r.db=D[0],r),console.log("Database ID in config is not set, taking first one in the list",r.db),D[0].properties;if(D!=null&&D.find(W=>{var J;return W.id===((J=r.db)==null?void 0:J.id)}))return Ze(fe,r.db=D==null?void 0:D.find(W=>{var J;return W.id===((J=r.db)==null?void 0:J.id)}),r),(x=D==null?void 0:D.find(W=>{var J;return W.id===((J=r.db)==null?void 0:J.id)}))==null?void 0:x.properties;throw console.log("Error: database was not found"),t(5,I=!0),new Error("- database missing -")}).then(D=>(Object.entries(r.profile_config).filter(([Y,x])=>{x.target}).forEach(([Y,x])=>{Object.values(D).every(W=>{W.id!=x.target})&&(console.log("Resetting field:",Y),Ze(fe,r.profile_config[tt(Y)].target="",r))}),console.log("DB_fields set to",D),D)))})});let q=!1;const R=["isSave","minimalDisplay","timeout"];Hs.keys(e).forEach(P=>{!~R.indexOf(P)&&P.slice(0,2)!=="$$"&&P!=="slot"&&Vs.warn(`<Home> was created with unknown prop '${P}'`)});function V(){r.db=xi(this),fe.set(r),t(3,l)}function j(P){n.$$.not_equal(r.isSetCover,P)&&(r.isSetCover=P,fe.set(r))}return n.$$set=P=>{"isSave"in P&&t(0,a=P.isSave),"minimalDisplay"in P&&t(1,c=P.minimalDisplay),"timeout"in P&&t(12,u=P.timeout)},n.$capture_state=()=>({onMount:Ur,config:fe,idOfProfileConfig:Dt,defaultChromeConfig:qe,asKeyOfProfileConfig:tt,isChromeConfig:Pi,getUserConfig:jr,isObject:pn,merge:Hr,setUserConfig:$r,Settings:so,supabase:Mt,requestDB:Ei,requestDBfields:js,Icon:sr,DB_list:l,isSave:a,minimalDisplay:c,timeout:u,isError:f,serverConfig:d,saveString:h,signout:y,onSave:b,onClear:g,onChangeDB:p,DB_fields:w,missing_db:I,delay:Ci,canSave:q,$config:r,$idOfProfileConfig:i}),n.$inject_state=P=>{"DB_list"in P&&t(3,l=P.DB_list),"isSave"in P&&t(0,a=P.isSave),"minimalDisplay"in P&&t(1,c=P.minimalDisplay),"timeout"in P&&t(12,u=P.timeout),"isError"in P&&t(7,f=P.isError),"serverConfig"in P&&t(13,d=P.serverConfig),"DB_fields"in P&&t(4,w=P.DB_fields),"missing_db"in P&&t(5,I=P.missing_db),"canSave"in P&&t(6,q=P.canSave)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),n.$$.update=()=>{var P;n.$$.dirty&8197&&t(6,q=!!r.notion_api_token&&a&&!!((P=r.profile_config)!=null&&P.name.target)&&(d!==r||d.profile_config!==r.profile_config))},[a,c,r,l,w,I,q,f,h,b,g,p,u,d,V,j]}class ar extends Vt{constructor(e){super(e),xt(this,e,xs,On,zt,{isSave:0,minimalDisplay:1,timeout:12}),A("SvelteRegisterComponent",{component:this,tagName:"Home",options:e,id:On.name})}get isSave(){throw new Tt("<Home>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isSave(e){throw new Tt("<Home>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get minimalDisplay(){throw new Tt("<Home>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set minimalDisplay(e){throw new Tt("<Home>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get timeout(){throw new Tt("<Home>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set timeout(e){throw new Tt("<Home>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}It.disable_scroll_handling;const Vr=It.goto;It.invalidate;It.prefetch;It.prefetch_routes;It.before_navigate;It.after_navigate;const St="src/components/Login.svelte";function In(n){let e,t,r,i,o,s,l,a,c,u,f,d,h,y,b,g,p,w;const I={c:function(){e=E("img"),r=U(),i=E("div"),o=U(),s=E("img"),a=U(),c=E("div"),u=U(),f=E("button"),d=E("img"),y=U(),b=E("p"),g=N("Connect to Notion"),this.h()},l:function(R){e=C(R,"IMG",{src:!0,alt:!0}),r=L(R),i=C(R,"DIV",{class:!0}),S(i).forEach(v),o=L(R),s=C(R,"IMG",{src:!0,alt:!0,class:!0}),a=L(R),c=C(R,"DIV",{class:!0}),S(c).forEach(v),u=L(R),f=C(R,"BUTTON",{class:!0});var V=S(f);d=C(V,"IMG",{src:!0,alt:!0,class:!0}),y=L(V),b=C(V,"P",{});var j=S(b);g=M(j,"Connect to Notion"),j.forEach(v),V.forEach(v),this.h()},h:function(){Zt(e.src,t="peopletonotion_logo_128.png")||_(e,"src",t),_(e,"alt","logo"),k(e,St,20,0,500),_(i,"class","p-2"),k(i,St,21,0,553),Zt(s.src,l="peopletonotion_full_logo.svg")||_(s,"src",l),_(s,"alt","peopletonotion"),_(s,"class","h-[70px] w-[235px] object-cover object-right"),k(s,St,22,2,575),_(c,"class","p-4"),k(c,St,23,0,690),Zt(d.src,h="notion_icon_64_64.png")||_(d,"src",h),_(d,"alt","logo"),_(d,"class","w-5 h-5"),k(d,St,26,1,833),k(b,St,27,1,897),_(f,"class","btn primary flex gap-3 items-center justify-evenly font-inter text-base min-h-[42px]"),k(f,St,25,0,711)},m:function(R,V){F(R,e,V),F(R,r,V),F(R,i,V),F(R,o,V),F(R,s,V),F(R,a,V),F(R,c,V),F(R,u,V),F(R,f,V),m(f,d),m(f,y),m(f,b),m(b,g),p||(w=at(f,"click",n[0],!1,!1,!1),p=!0)},p:ne,i:ne,o:ne,d:function(R){R&&v(e),R&&v(r),R&&v(i),R&&v(o),R&&v(s),R&&v(a),R&&v(c),R&&v(u),R&&v(f),p=!1,w()}};return A("SvelteRegisterBlock",{block:I,id:In.name,type:"component",source:"",ctx:n}),I}function zs(n,e,t){let{$$slots:r={},$$scope:i}=e;Jt("Login",r,[]);const o=!1,s=()=>{window.location.hash==="#tab"?Vr("/login"):chrome.tabs.create({url:chrome.runtime.getURL("login.html")})},l=[];return Object.keys(e).forEach(a=>{!~l.indexOf(a)&&a.slice(0,2)!=="$$"&&a!=="slot"&&console.warn(`<Login> was created with unknown prop '${a}'`)}),n.$capture_state=()=>({ssr:o,browser:Zn,goto:Vr,openTab:s}),[s,o]}class Eo extends Vt{constructor(e){super(e),xt(this,e,zs,In,zt,{ssr:1}),A("SvelteRegisterComponent",{component:this,tagName:"Login",options:e,id:In.name})}get ssr(){return this.$$.ctx[1]}set ssr(e){throw new Error("<Login>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function Oi(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function me(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Oi(Object(t),!0).forEach(function(r){nr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Oi(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function yt(n){return yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(n)}function De(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ii(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Te(n,e,t){return e&&Ii(n.prototype,e),t&&Ii(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function nr(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Co(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Rn(n,e)}function xr(n){return xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xr(n)}function Rn(n,e){return Rn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Rn(n,e)}function Js(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gs(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ws(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gs(n)}function Oo(n){var e=Js();return function(){var r=xr(n),i;if(e){var o=xr(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Ws(this,i)}}function ni(n,e){return Ys(n)||Zs(n,e)||ii(n,e)||ea()}function Fn(n){return Qs(n)||Xs(n)||ii(n)||Ks()}function Qs(n){if(Array.isArray(n))return Dn(n)}function Ys(n){if(Array.isArray(n))return n}function Xs(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Zs(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],i=!0,o=!1,s,l;try{for(t=t.call(n);!(i=(s=t.next()).done)&&(r.push(s.value),!(e&&r.length===e));i=!0);}catch(a){o=!0,l=a}finally{try{!i&&t.return!=null&&t.return()}finally{if(o)throw l}}return r}}function ii(n,e){if(!!n){if(typeof n=="string")return Dn(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Dn(n,e)}}function Dn(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ks(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ea(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ir(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=ii(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(a){throw a},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,s=!1,l;return{s:function(){t=t.call(n)},n:function(){var a=t.next();return o=a.done,a},e:function(a){s=!0,l=a},f:function(){try{!o&&t.return!=null&&t.return()}finally{if(s)throw l}}}}var Pt=String.fromCharCode,Ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Fi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",br={};function Di(n,e){if(!br[n]){br[n]={};for(var t=0;t<n.length;t++)br[n][n.charAt(t)]=t}return br[n][e]}var Ae={compressToBase64:function(e){if(e==null)return"";var t=Ae._compress(e,6,function(r){return Ri.charAt(r)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(e){return e==null?"":e==""?null:Ae._decompress(e.length,32,function(t){return Di(Ri,e.charAt(t))})},compressToUTF16:function(e){return e==null?"":Ae._compress(e,15,function(t){return Pt(t+32)})+" "},decompressFromUTF16:function(e){return e==null?"":e==""?null:Ae._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=Ae.compress(e),r=new Uint8Array(t.length*2),i=0,o=t.length;i<o;i++){var s=t.charCodeAt(i);r[i*2]=s>>>8,r[i*2+1]=s%256}return r},decompressFromUint8Array:function(e){if(e==null)return Ae.decompress(e);for(var t=new Array(e.length/2),r=0,i=t.length;r<i;r++)t[r]=e[r*2]*256+e[r*2+1];var o=[];return t.forEach(function(s){o.push(Pt(s))}),Ae.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return e==null?"":Ae._compress(e,6,function(t){return Fi.charAt(t)})},decompressFromEncodedURIComponent:function(e){return e==null?"":e==""?null:(e=e.replace(/ /g,"+"),Ae._decompress(e.length,32,function(t){return Di(Fi,e.charAt(t))}))},compress:function(e){return Ae._compress(e,16,function(t){return Pt(t)})},_compress:function(e,t,r){if(e==null)return"";var i,o,s="",l="",a="",c=2,u=3,f=2,d=0,h=0,y,b={},g={},p=[];for(y=0;y<e.length;y+=1)if(s=e.charAt(y),Object.prototype.hasOwnProperty.call(b,s)||(b[s]=u++,g[s]=!0),l=a+s,Object.prototype.hasOwnProperty.call(b,l))a=l;else{if(Object.prototype.hasOwnProperty.call(g,a)){if(a.charCodeAt(0)<256){for(i=0;i<f;i++)d=d<<1,h==t-1?(h=0,p.push(r(d)),d=0):h++;for(o=a.charCodeAt(0),i=0;i<8;i++)d=d<<1|o&1,h==t-1?(h=0,p.push(r(d)),d=0):h++,o=o>>1}else{for(o=1,i=0;i<f;i++)d=d<<1|o,h==t-1?(h=0,p.push(r(d)),d=0):h++,o=0;for(o=a.charCodeAt(0),i=0;i<16;i++)d=d<<1|o&1,h==t-1?(h=0,p.push(r(d)),d=0):h++,o=o>>1}c--,c==0&&(c=Math.pow(2,f),f++),delete g[a]}else for(o=b[a],i=0;i<f;i++)d=d<<1|o&1,h==t-1?(h=0,p.push(r(d)),d=0):h++,o=o>>1;c--,c==0&&(c=Math.pow(2,f),f++),b[l]=u++,a=String(s)}if(a!==""){if(Object.prototype.hasOwnProperty.call(g,a)){if(a.charCodeAt(0)<256){for(i=0;i<f;i++)d=d<<1,h==t-1?(h=0,p.push(r(d)),d=0):h++;for(o=a.charCodeAt(0),i=0;i<8;i++)d=d<<1|o&1,h==t-1?(h=0,p.push(r(d)),d=0):h++,o=o>>1}else{for(o=1,i=0;i<f;i++)d=d<<1|o,h==t-1?(h=0,p.push(r(d)),d=0):h++,o=0;for(o=a.charCodeAt(0),i=0;i<16;i++)d=d<<1|o&1,h==t-1?(h=0,p.push(r(d)),d=0):h++,o=o>>1}c--,c==0&&(c=Math.pow(2,f),f++),delete g[a]}else for(o=b[a],i=0;i<f;i++)d=d<<1|o&1,h==t-1?(h=0,p.push(r(d)),d=0):h++,o=o>>1;c--,c==0&&(c=Math.pow(2,f),f++)}for(o=2,i=0;i<f;i++)d=d<<1|o&1,h==t-1?(h=0,p.push(r(d)),d=0):h++,o=o>>1;for(;;)if(d=d<<1,h==t-1){p.push(r(d));break}else h++;return p.join("")},decompress:function(e){return e==null?"":e==""?null:Ae._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(e,t,r){var i=[],o=[],s={val:r(0),position:t,index:1},l=4,a=4,c=3,u="",f,d,h,y,b,g,p;for(f=0;f<3;f+=1)i[f]=f;for(h=0,b=Math.pow(2,2),g=1;g!=b;)y=s.val&s.position,s.position>>=1,s.position==0&&(s.position=t,s.val=r(s.index++)),h|=(y>0?1:0)*g,g<<=1;switch(h){case 0:for(h=0,b=Math.pow(2,8),g=1;g!=b;)y=s.val&s.position,s.position>>=1,s.position==0&&(s.position=t,s.val=r(s.index++)),h|=(y>0?1:0)*g,g<<=1;p=Pt(h);break;case 1:for(h=0,b=Math.pow(2,16),g=1;g!=b;)y=s.val&s.position,s.position>>=1,s.position==0&&(s.position=t,s.val=r(s.index++)),h|=(y>0?1:0)*g,g<<=1;p=Pt(h);break;case 2:return""}for(i[3]=p,d=p,o.push(p);;){if(s.index>e)return"";for(h=0,b=Math.pow(2,c),g=1;g!=b;)y=s.val&s.position,s.position>>=1,s.position==0&&(s.position=t,s.val=r(s.index++)),h|=(y>0?1:0)*g,g<<=1;switch(p=h){case 0:for(h=0,b=Math.pow(2,8),g=1;g!=b;)y=s.val&s.position,s.position>>=1,s.position==0&&(s.position=t,s.val=r(s.index++)),h|=(y>0?1:0)*g,g<<=1;i[a++]=Pt(h),p=a-1,l--;break;case 1:for(h=0,b=Math.pow(2,16),g=1;g!=b;)y=s.val&s.position,s.position>>=1,s.position==0&&(s.position=t,s.val=r(s.index++)),h|=(y>0?1:0)*g,g<<=1;i[a++]=Pt(h),p=a-1,l--;break;case 2:return o.join("")}if(l==0&&(l=Math.pow(2,c),c++),i[p])u=i[p];else if(p===a)u=d+d.charAt(0);else return null;o.push(u),i[a++]=d+u.charAt(0),l--,d=u,l==0&&(l=Math.pow(2,c),c++)}}},ta="1.30.0",He={DEBUG:!1,LIB_VERSION:ta},Io=Array.prototype,Ro=Object.prototype,Xr=Ro.toString,ra=Ro.hasOwnProperty,ge=typeof window<"u"?window:{},Yt=ge.navigator||{userAgent:""},Be=ge.document||{},ze=Yt.userAgent,zr=Io.forEach,Ti=Io.indexOf,na=Array.isArray,Jr={},Se={log:function(){if(He.DEBUG&&!We(window.console)&&window.console){for(var e=("__rrweb_original__"in window.console.log)?window.console.log.__rrweb_original__:window.console.log,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];try{e.apply(window.console,r)}catch{vt(r,function(s){e(s)})}}},error:function(){if(He.DEBUG&&!We(window.console)&&window.console){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=["PostHog error:"].concat(t),o="__rrweb_original__"in window.console.error?window.console.error.__rrweb_original__:window.console.error;try{o.apply(window.console,i)}catch{vt(i,function(l){o(l)})}}},critical:function(){if(!We(window.console)&&window.console){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=["PostHog error:"].concat(t),o="__rrweb_original__"in window.console.error?window.console.error.__rrweb_original__:window.console.error;try{o.apply(window.console,i)}catch{vt(i,function(l){o(l)})}}}},Tn=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},ia=function(e){for(var t in e)typeof e[t]=="function"&&(e[t]=e[t].bind(e))};function ie(n,e,t){if(n!=null){if(zr&&Array.isArray(n)&&n.forEach===zr)n.forEach(e,t);else if("length"in n&&n.length===+n.length){for(var r=0,i=n.length;r<i;r++)if(r in n&&e.call(t,n[r],r)===Jr)return}else for(var o in n)if(ra.call(n,o)&&e.call(t,n[o],o)===Jr)return}}function vt(n,e,t){if(Array.isArray(n)){if(zr&&n.forEach===zr)n.forEach(e,t);else if("length"in n&&n.length===+n.length){for(var r=0,i=n.length;r<i;r++)if(r in n&&e.call(t,n[r],r)===Jr)return}}}var ye=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return vt(r,function(o){for(var s in o)o[s]!==void 0&&(e[s]=o[s])}),e},st=na||function(n){return Xr.call(n)==="[object Array]"},Fo=function(e){try{return/^\s*\bfunction\b/.test(e)}catch{return!1}},oa=function(e,t){var r=!1;return e===null?r:Ti&&e.indexOf===Ti?e.indexOf(t)!=-1:(ie(e,function(i){if(r||(r=i===t))return Jr}),r)};function te(n,e){return n.indexOf(e)!==-1}var mt=function(e){return e===Object(e)&&!st(e)},We=function(e){return e===void 0},Do=function(e){return Xr.call(e)=="[object String]"},sa=function(e){return Xr.call(e)=="[object Date]"},aa=function(e){return Xr.call(e)=="[object Number]"},la=function n(e){return ie(e,function(t,r){sa(t)?e[r]=ua(t):mt(t)&&(e[r]=n(t))}),e},ca=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},ua=function(e){function t(r){return r<10?"0"+r:r}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())},To=function(e){return function(){try{for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.apply(this,r)}catch(o){Se.critical("Implementation error. Please turn on debug and contact support@posthog.com."),He.DEBUG&&Se.critical(o)}}},fa=function(e,t){for(var r=0;r<t.length;r++)e.prototype[t[r]]=To(e.prototype[t[r]])},da=function(e){for(var t in e)typeof e[t]=="function"&&(e[t]=To(e[t]))},An=function(e){var t={};return ie(e,function(r,i){Do(r)&&r.length>0&&(t[i]=r)}),t},yr=typeof Symbol<"u"?Symbol("__deepCircularCopyInProgress__"):"__deepCircularCopyInProgress__";function qn(n,e,t){if(n!==Object(n))return e?e(n,t):n;if(!n[yr]){n[yr]=!0;var r;return st(n)?(r=[],vt(n,function(i){r.push(qn(i,e))})):(r={},ie(n,function(i,o){o!==yr&&(r[o]=qn(i,e,o))})),delete n[yr],r}}var _a=["$performance_raw"];function Ao(n,e){return qn(n,function(t,r){return r&&_a.indexOf(r)>-1?t:typeof t=="string"&&e!==null?t.slice(0,e):t})}function Zr(n){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t,r,i,o,s,l,a,c,u=0,f=0,d="",h=[];if(!n)return n;n=ha(n);do t=n.charCodeAt(u++),r=n.charCodeAt(u++),i=n.charCodeAt(u++),c=t<<16|r<<8|i,o=c>>18&63,s=c>>12&63,l=c>>6&63,a=c&63,h[f++]=e.charAt(o)+e.charAt(s)+e.charAt(l)+e.charAt(a);while(u<n.length);switch(d=h.join(""),n.length%3){case 1:d=d.slice(0,-2)+"==";break;case 2:d=d.slice(0,-1)+"=";break}return d}var ha=function(e){e=(e+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`);var t="",r,i,o=0,s;for(r=i=0,o=e.length,s=0;s<o;s++){var l=e.charCodeAt(s),a=null;l<128?i++:l>127&&l<2048?a=String.fromCharCode(l>>6|192,l&63|128):a=String.fromCharCode(l>>12|224,l>>6&63|128,l&63|128),a!==null&&(i>r&&(t+=e.substring(r,i)),t+=a,r=i=s+1)}return i>r&&(t+=e.substring(r,e.length)),t},Ut=function(){var n=function(){for(var i=new Date().valueOf(),o=0;i==new Date().valueOf();)o++;return i.toString(16)+o.toString(16)},e=function(){return Math.random().toString(16).replace(".","")},t=function(){var i=ze,o,s,l=0,a=[];function c(u,f){var d,h=0;for(d=0;d<f.length;d++)h|=a[d]<<d*8;return u^h}for(o=0;o<i.length;o++)s=i.charCodeAt(o),a.unshift(s&255),a.length>=4&&(l=c(l,a),a=[]);return a.length>0&&(l=c(l,a)),l.toString(16)};return function(){var r=(window.screen.height*window.screen.width).toString(16);return n()+"-"+e()+"-"+t()+"-"+r+"-"+n()}}(),pa=function(e){return!!/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp|ahrefsbot|facebookexternalhit|facebookcatalog)/i.test(e)},ga=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",r,i,o=[];return ie(e,function(s,l){r=encodeURIComponent(s.toString()),i=encodeURIComponent(l),o[o.length]=i+"="+r}),o.join(t)},Ai=function(e,t){var r=t.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i="[\\?&]"+r+"=([^&#]*)",o=new RegExp(i),s=o.exec(e);if(s===null||s&&typeof s[1]!="string"&&s[1].length)return"";var l=s[1];try{l=decodeURIComponent(l)}catch{Se.error("Skipping decoding for malformed query param: "+l)}return l.replace(/\+/g," ")},qi=function(e,t){var r=e.match(new RegExp(t+"=([^&]*)"));return r?r[1]:null},tr=function(){var n=function(i,o,s,l,a){if(!i){Se.error("No valid element provided to register_event");return}if(i.addEventListener&&!l)i.addEventListener(o,s,!!a);else{var c="on"+o,u=i[c];i[c]=e(i,s,u)}};function e(r,i,o){return function(s){if(s=s||t(window.event),!!s){var l=!0,a;Fo(o)&&(a=o(s));var c=i.call(r,s);return(a===!1||c===!1)&&(l=!1),l}}}function t(r){return r&&(r.preventDefault=t.preventDefault,r.stopPropagation=t.stopPropagation),r}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},n}(),Ee={campaignParams:function(){var e="utm_source utm_medium utm_campaign utm_content utm_term gclid fbclid msclkid".split(" "),t={};return ie(e,function(r){var i=Ai(Be.URL,r);i.length&&(t[r]=i)}),t},searchEngine:function(e){return e.search("https?://(.*)google.([^/?]*)")===0?"google":e.search("https?://(.*)bing.com")===0?"bing":e.search("https?://(.*)yahoo.com")===0?"yahoo":e.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null},searchInfo:function(e){var t=Ee.searchEngine(e),r=t!="yahoo"?"q":"p",i={};if(t!==null){i.$search_engine=t;var o=Ai(e,r);o.length&&(i.ph_keyword=o)}return i},browser:function(e,t,r){return t=t||"",r||te(e," OPR/")?te(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":te(e,"IEMobile")||te(e,"WPDesktop")?"Internet Explorer Mobile":te(e,"SamsungBrowser/")?"Samsung Internet":te(e,"Edge")||te(e,"Edg/")?"Microsoft Edge":te(e,"FBIOS")?"Facebook Mobile":te(e,"Chrome")?"Chrome":te(e,"CriOS")?"Chrome iOS":te(e,"UCWEB")||te(e,"UCBrowser")?"UC Browser":te(e,"FxiOS")?"Firefox iOS":te(t,"Apple")?te(e,"Mobile")?"Mobile Safari":"Safari":te(e,"Android")?"Android Mobile":te(e,"Konqueror")?"Konqueror":te(e,"Firefox")?"Firefox":te(e,"MSIE")||te(e,"Trident/")?"Internet Explorer":te(e,"Gecko")?"Mozilla":""},browserVersion:function(e,t,r){var i=Ee.browser(e,t,r),o={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/},s=o[i];if(s===void 0)return null;var l=e.match(s);return l?parseFloat(l[l.length-2]):null},os:function(){var e=ze;return/Windows/i.test(e)?/Phone/.test(e)||/WPDesktop/.test(e)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":/CrOS/.test(e)?"Chrome OS":""},device:function(e){return/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)&&!/Mobile/.test(e)?"Android Tablet":/Android/.test(e)?"Android":""},deviceType:function(e){var t=this.device(e);return t==="iPad"||t==="Android Tablet"?"Tablet":t?"Mobile":"Desktop"},referringDomain:function(e){var t=e.split("/");return t.length>=3?t[2]:""},properties:function(){return ye(An({$os:Ee.os(),$browser:Ee.browser(ze,Yt.vendor,window.opera),$device:Ee.device(ze),$device_type:Ee.deviceType(ze)}),{$current_url:window.location.href,$host:window.location.host,$pathname:window.location.pathname,$browser_version:Ee.browserVersion(ze,Yt.vendor,window.opera),$screen_height:window.screen.height,$screen_width:window.screen.width,$viewport_height:window.innerHeight,$viewport_width:window.innerWidth,$lib:"web",$lib_version:He.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:ca()/1e3})},people_properties:function(){return ye(An({$os:Ee.os(),$browser:Ee.browser(ze,Yt.vendor,window.opera)}),{$browser_version:Ee.browserVersion(ze,Yt.vendor,window.opera)})}};function Gr(n){switch(yt(n.className)){case"string":return n.className;case"object":return("baseVal"in n.className?n.className.baseVal:null)||n.getAttribute("class")||"";default:return""}}function Bi(n){var e="";return Nn(n)&&!Mo(n)&&n.childNodes&&n.childNodes.length&&ie(n.childNodes,function(t){Bo(t)&&t.textContent&&(e+=Tn(t.textContent).split(/(\s+)/).filter(Ar).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}),Tn(e)}function qo(n){return!!n&&n.nodeType===1}function Ct(n,e){return!!n&&!!n.tagName&&n.tagName.toLowerCase()===e.toLowerCase()}function Bo(n){return!!n&&n.nodeType===3}function No(n){return!!n&&n.nodeType===11}var Bn=["a","button","form","input","select","textarea","label"];function va(n,e){if(!n||Ct(n,"html")||!qo(n))return!1;for(var t=!1,r=[n],i=!0,o=n;o.parentNode&&!Ct(o,"body");){if(No(o.parentNode)){r.push(o.parentNode.host),o=o.parentNode.host;continue}if(i=o.parentNode||!1,!i)break;if(Bn.indexOf(i.tagName.toLowerCase())>-1)t=!0;else{var s=window.getComputedStyle(i);s&&s.getPropertyValue("cursor")==="pointer"&&(t=!0)}r.push(i),o=i}var l=window.getComputedStyle(n);if(l&&l.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var a=n.tagName.toLowerCase();switch(a){case"html":return!1;case"form":return e.type==="submit";case"input":return e.type==="change"||e.type==="click";case"select":case"textarea":return e.type==="change"||e.type==="click";default:return t?e.type==="click":e.type==="click"&&(Bn.indexOf(a)>-1||n.getAttribute("contenteditable")==="true")}}function Nn(n){for(var e=n;e.parentNode&&!Ct(e,"body");e=e.parentNode){var t=Gr(e).split(" ");if(te(t,"ph-sensitive")||te(t,"ph-no-capture"))return!1}if(te(Gr(n).split(" "),"ph-include"))return!0;var r=n.type||"";if(typeof r=="string")switch(r.toLowerCase()){case"hidden":return!1;case"password":return!1}var i=n.name||n.id||"";if(typeof i=="string"){var o=/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i;if(o.test(i.replace(/[^a-zA-Z0-9]/g,"")))return!1}return!0}function Mo(n){var e=["button","checkbox","submit","reset"];return!!(Ct(n,"input")&&!e.includes(n.type)||Ct(n,"select")||Ct(n,"textarea")||n.getAttribute("contenteditable")==="true")}function Ar(n){if(n===null||We(n))return!1;if(typeof n=="string"){n=Tn(n);var e=/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/;if(e.test((n||"").replace(/[- ]/g,"")))return!1;var t=/(^\d{3}-?\d{2}-?\d{4}$)/;if(t.test(n))return!1}return!0}function ma(n){return typeof n=="string"?n.substring(0,10)==="_ngcontent"||n.substring(0,7)==="_nghost":!1}function Uo(n,e){var t=document.createElement("script");t.type="text/javascript",t.src=n,t.onload=e;var r=document.getElementsByTagName("script");if(r.length>0){var i;(i=r[0].parentNode)===null||i===void 0||i.insertBefore(t,r[0])}else document.body.appendChild(t)}var ba=30,ya=1e3,wa=3,ka=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.get_config("rageclick");De(this,n),this.clicks=[],this.instance=e,this.enabled=t}return Te(n,[{key:"click",value:function(t,r,i){if(!!this.enabled){var o=this.clicks[this.clicks.length-1];o&&Math.abs(t-o.x)+Math.abs(r-o.y)<ba&&i-o.timestamp<ya?(this.clicks.push({x:t,y:r,timestamp:i}),this.clicks.length===wa&&this.instance.capture("$rageclick")):this.clicks=[{x:t,y:r,timestamp:i}]}}}]),n}(),Lt={_initializedTokens:[],_previousElementSibling:function(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do t=t.previousSibling;while(t&&!qo(t));return t},_getPropertiesFromElement:function(e,t,r){var i=e.tagName.toLowerCase(),o={tag_name:i};Bn.indexOf(i)>-1&&!r&&(o.$el_text=Bi(e));var s=Gr(e);s.length>0&&(o.classes=s.split(" ").filter(function(u){return u!==""})),ie(e.attributes,function(u){Mo(e)&&["name","id","class"].indexOf(u.name)===-1||!t&&Ar(u.value)&&!ma(u.name)&&(o["attr__"+u.name]=u.value)});for(var l=1,a=1,c=e;c=this._previousElementSibling(c);)l++,c.tagName===e.tagName&&a++;return o.nth_child=l,o.nth_of_type=a,o},_getDefaultProperties:function(e){return{$event_type:e,$ce_version:1}},_extractCustomPropertyValue:function(e){var t=[];return ie(document.querySelectorAll(e.css_selector),function(r){var i;["input","select"].indexOf(r.tagName.toLowerCase())>-1?i=r.value:r.textContent&&(i=r.textContent),Ar(i)&&t.push(i)}),t.join(", ")},_getCustomProperties:function(e){var t=this,r={};return ie(this._customProperties,function(i){ie(i.event_selectors,function(o){var s=document.querySelectorAll(o);ie(s,function(l){te(e,l)&&Nn(l)&&(r[i.name]=t._extractCustomPropertyValue(i))})})}),r},_getEventTarget:function(e){if(typeof e.target>"u")return e.srcElement||null;var t;return(t=e.target)!==null&&t!==void 0&&t.shadowRoot?e.composedPath()[0]||null:e.target||null},_captureEvent:function(e,t){var r=this,i=this._getEventTarget(e);if(Bo(i)&&(i=i.parentNode||null),e.type==="click"&&e instanceof MouseEvent){var o;(o=this.rageclicks)===null||o===void 0||o.click(e.clientX,e.clientY,new Date().getTime())}if(i&&va(i,e)){for(var s=[i],l=i;l.parentNode&&!Ct(l,"body");){if(No(l.parentNode)){s.push(l.parentNode.host),l=l.parentNode.host;continue}s.push(l.parentNode),l=l.parentNode}var a=[],c,u=!1;if(ie(s,function(d){var h=Nn(d);d.tagName.toLowerCase()==="a"&&(c=d.getAttribute("href"),c=h&&Ar(c)&&c);var y=Gr(d).split(" ");te(y,"ph-no-capture")&&(u=!0),a.push(r._getPropertiesFromElement(d,t.get_config("mask_all_element_attributes"),t.get_config("mask_all_text")))}),t.get_config("mask_all_text")||(a[0].$el_text=Bi(i)),c&&(a[0].attr__href=c),u)return!1;var f=ye(this._getDefaultProperties(e.type),{$elements:a},this._getCustomProperties(s));return t.capture("$autocapture",f),!0}},_navigate:function(e){window.location.href=e},_addDomEventHandlers:function(e){var t=this,r=function(o){o=o||window.event,t._captureEvent(o,e)};tr(document,"submit",r,!1,!0),tr(document,"change",r,!1,!0),tr(document,"click",r,!1,!0)},_customProperties:[],rageclicks:null,init:function(e){this.rageclicks=new ka(e)},afterDecideResponse:function(e,t){var r=t.get_config("token");if(this._initializedTokens.indexOf(r)>-1){Se.log('autocapture already initialized for token "'+r+'"');return}this._initializedTokens.push(r),e&&e.config&&e.config.enable_collect_everything&&t.get_config("autocapture")?(e.custom_properties&&(this._customProperties=e.custom_properties),this._addDomEventHandlers(t)):t.__autocapture_enabled=!1},enabledForProject:function(e,t,r){if(!e)return!0;t=We(t)?10:t,r=We(r)?10:r;for(var i=0,o=0;o<e.length;o++)i+=e.charCodeAt(o);return i%t<r},isBrowserSupported:function(){return Fo(document.querySelectorAll)}};ia(Lt);da(Lt);var Sa=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,Ke={is_supported:function(){return!0},error:function(e){Se.error("cookieStore error: "+e)},get:function(e){try{for(var t=e+"=",r=document.cookie.split(";"),i=0;i<r.length;i++){for(var o=r[i];o.charAt(0)==" ";)o=o.substring(1,o.length);if(o.indexOf(t)===0)return decodeURIComponent(o.substring(t.length,o.length))}}catch{}return null},parse:function(e){var t;try{t=JSON.parse(Ke.get(e))||{}}catch{}return t},set:function(e,t,r,i,o){try{var s="",l="",a="";if(i){var c=document.location.hostname.match(Sa),u=c?c[0]:"";s=u?"; domain=."+u:""}if(r){var f=new Date;f.setTime(f.getTime()+r*24*60*60*1e3),l="; expires="+f.toUTCString()}o&&(a="; secure");var d=e+"="+encodeURIComponent(JSON.stringify(t))+l+"; path=/"+s+a;return document.cookie=d,d}catch{return}},remove:function(e,t){try{Ke.set(e,"",-1,t)}catch{return}}},cn=null,pe={is_supported:function(){if(cn!==null)return cn;var e=!0;if(window)try{var t="__mplssupport__",r="xyz";pe.set(t,r),pe.get(t)!=='"xyz"'&&(e=!1),pe.remove(t)}catch{e=!1}else e=!1;return e||Se.error("localStorage unsupported; falling back to cookie store"),cn=e,e},error:function(e){Se.error("localStorage error: "+e)},get:function(e){try{return window.localStorage.getItem(e)}catch(t){pe.error(t)}return null},parse:function(e){try{return JSON.parse(pe.get(e))||{}}catch{}return null},set:function(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(r){pe.error(r)}},remove:function(e){try{window.localStorage.removeItem(e)}catch(t){pe.error(t)}}},Mn=me(me({},pe),{},{parse:function(e){try{var t={};try{t=Ke.parse(e)||{},t.distinct_id&&Ke.set(e,{distinct_id:t.distinct_id})}catch{}var r=ye(t,JSON.parse(pe.get(e)||"{}"));return pe.set(e,r),r}catch{}return null},set:function(e,t,r,i,o){try{pe.set(e,t),t.distinct_id&&Ke.set(e,{distinct_id:t.distinct_id},r,i,o)}catch(s){pe.error(s)}},remove:function(e,t){try{window.localStorage.removeItem(e),Ke.remove(e,t)}catch(r){pe.error(r)}}}),wr={},Pa={is_supported:function(){return!0},error:function(e){Se.error("memoryStorage error: "+e)},get:function(e){return wr[e]||null},parse:function(e){return wr[e]||null},set:function(e,t){wr[e]=t},remove:function(e){delete wr[e]}},Et=null,Je={is_supported:function(){if(Et!==null)return Et;if(Et=!0,window)try{var e="__support__",t="xyz";Je.set(e,t),Je.get(e)!=='"xyz"'&&(Et=!1),Je.remove(e)}catch{Et=!1}else Et=!1;return Et},error:function(e){He.DEBUG&&Se.error("sessionStorage error: ",e)},get:function(e){try{return window.sessionStorage.getItem(e)}catch(t){Je.error(t)}return null},parse:function(e){try{return JSON.parse(Je.get(e))||null}catch{}return null},set:function(e,t){try{window.sessionStorage.setItem(e,JSON.stringify(t))}catch(r){Je.error(r)}},remove:function(e){try{window.sessionStorage.removeItem(e)}catch(t){Je.error(t)}}},Ea="__ph_opt_in_out_";function Ca(n,e){$o(!0,n,e)}function Oa(n,e){$o(!1,n,e)}function Ia(n,e){return jo(n,e)==="1"}function Lo(n,e){return Fa(e)?!0:jo(n,e)==="0"}function Ra(n,e){e=e||{},oi(e).remove(si(n,e),!!e.crossSubdomainCookie)}function oi(n){return n=n||{},n.persistenceType==="localStorage"?pe:n.persistenceType==="localStorage+cookie"?Mn:Ke}function si(n,e){return e=e||{},(e.persistencePrefix||Ea)+n}function jo(n,e){return oi(e).get(si(n,e))}function Fa(n){if(n&&n.respectDnt){var e=n&&n.window||ge,t=e.navigator||{},r=!1;return ie([t.doNotTrack,t.msDoNotTrack,e.doNotTrack],function(i){te([!0,1,"1","yes"],i)&&(r=!0)}),r}return!1}function $o(n,e,t){if(!Do(e)||!e.length){console.error("gdpr."+(n?"optIn":"optOut")+" called with an invalid token");return}t=t||{},oi(t).set(si(e,t),n?1:0,aa(t.cookieExpiration)?t.cookieExpiration:null,t.crossSubdomainCookie,t.secureCookie),t.capture&&n&&t.capture(t.captureEventName||"$opt_in",t.captureProperties||{},{send_instantly:!0})}function Ho(n,e){var t=!1;try{var r=n.get_config("token"),i=n.get_config("respect_dnt"),o=n.get_config("opt_out_capturing_persistence_type"),s=n.get_config("opt_out_capturing_cookie_prefix")||void 0,l=n.get_config("window");r&&(t=Lo(r,{respectDnt:i,persistenceType:o,persistencePrefix:s,window:l}))}catch(a){e||console.error("Unexpected error when checking capturing opt-out status: "+a)}return t}function Ni(n,e,t){return function(){for(var r=Ho(n,t),i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];if(!r)return e.apply(this,o);var l=o[o.length-1];typeof l=="function"&&l(0)}}var un="$set",Da="$set_once",Ta=function(){function n(e){var t=this;De(this,n),this._posthog=e,this.set=Ni(e,function(r,i,o){var s=t.set_action(r,i);return mt(r)&&(o=i),t._get_config("save_referrer")&&t._posthog.persistence.update_referrer_info(document.referrer),s[un]=ye({},Ee.people_properties(),t._posthog.persistence.get_referrer_info(),s[un]),t._send_request(s,o)}),this.set_once=Ni(e,function(r,i,o){var s=t.set_once_action(r,i);return mt(r)&&(o=i),t._send_request(s,o)})}return Te(n,[{key:"toString",value:function(){return this._posthog.toString()+".people"}},{key:"_send_request",value:function(t,r){t.$token=this._get_config("token"),t.$distinct_id=this._posthog.get_distinct_id();var i=this._posthog.get_property("$device_id"),o=this._posthog.get_property("$user_id"),s=this._posthog.get_property("$had_persisted_distinct_id");i&&(t.$device_id=i),o&&(t.$user_id=o),s&&(t.$had_persisted_distinct_id=s);var l=la(t),a=Ao(l,this._get_config("properties_string_max_length")),c=JSON.stringify(l),u=Zr(c);return this._posthog._send_request(this._get_config("api_host")+"/engage/",{data:u},{},this._posthog._prepare_callback(r,a)),a}},{key:"_get_config",value:function(t){return this._posthog.get_config(t)}},{key:"_is_reserved_property",value:function(t){return t==="$distinct_id"||t==="$token"||t==="$device_id"||t==="$user_id"||t==="$had_persisted_distinct_id"}},{key:"set_action",value:function(t,r){return this.apiActionParser(un,t,r)}},{key:"set_once_action",value:function(t,r){return this.apiActionParser(Da,t,r)}},{key:"apiActionParser",value:function(t,r,i){var o=this,s={},l={};return mt(r)?ie(r,function(a,c){o._is_reserved_property(c)||(l[c]=a)}):l[r]=i,s[t]=l,s}}]),n}(),Aa=function(e,t){var r=e.featureFlags;if(r)if(Array.isArray(r)){var i={};if(r)for(var o=0;o<r.length;o++)i[r[o]]=!0;t&&t.register({$active_feature_flags:r,$enabled_feature_flags:i})}else t&&t.register({$active_feature_flags:Object.keys(r||{}),$enabled_feature_flags:r||{}});else t&&(t.unregister("$active_feature_flags"),t.unregister("$enabled_feature_flags"))},qa=function(){function n(e){De(this,n),this.instance=e,this._override_warning=!1,this.flagCallReported={},this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return Te(n,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var t=this.instance.get_property("$enabled_feature_flags"),r=this.instance.get_property("$override_feature_flags");if(!r)return t||{};for(var i=ye({},t),o=Object.keys(r),s=0;s<o.length;s++)r[o[s]]===!1?delete i[o[s]]:i[o[s]]=r[o[s]];return this._override_warning||(console.warn("[PostHog] Overriding feature flags!",{enabledFlags:t,overriddenFlags:r,finalFlags:i}),this._override_warning=!0),i}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(t){this.$anon_distinct_id=t}},{key:"setReloadingPaused",value:function(t){this.reloadFeatureFlagsInAction=t}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var t=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(function(){!t.reloadFeatureFlagsInAction&&t.reloadFeatureFlagsQueued&&(t.reloadFeatureFlagsQueued=!1,t._reloadFeatureFlagsRequest())},5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var t=this;this.setReloadingPaused(!0);var r=this.instance.get_config("token"),i=JSON.stringify({token:r,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id}),o=Zr(i);this.instance._send_request(this.instance.get_config("api_host")+"/decide/?v=2",{data:o},{method:"POST"},this.instance._prepare_callback(function(s){t.$anon_distinct_id=void 0,t.receivedFeatureFlags(s),t.setReloadingPaused(!1),t._startReloadTimer()}))}},{key:"getFeatureFlag",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.getFlags())return console.warn('getFeatureFlag for key "'+t+`" failed. Feature flags didn't load in time.`),!1;var i=this.getFlagVariants()[t];return(r.send_event||!("send_event"in r))&&!this.flagCallReported[t]&&(this.flagCallReported[t]=!0,this.instance.capture("$feature_flag_called",{$feature_flag:t,$feature_flag_response:i})),i}},{key:"isFeatureEnabled",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.getFlags()?!!this.getFeatureFlag(t,r):(console.warn('isFeatureEnabled for key "'+t+`" failed. Feature flags didn't load in time.`),!1)}},{key:"addFeatureFlagsHandler",value:function(t){this.featureFlagEventHandlers.push(t)}},{key:"receivedFeatureFlags",value:function(t){this.instance.decideEndpointWasHit=!0,Aa(t,this.instance.persistence);var r=this.getFlags(),i=this.getFlagVariants();this.featureFlagEventHandlers.forEach(function(o){return o(r,i)})}},{key:"override",value:function(t){if(this._override_warning=!1,t===!1)this.instance.persistence.unregister("$override_feature_flags");else if(Array.isArray(t)){for(var r={},i=0;i<t.length;i++)r[t[i]]=!0;this.instance.persistence.register({$override_feature_flags:r})}else this.instance.persistence.register({$override_feature_flags:t})}},{key:"onFeatureFlags",value:function(t){if(this.addFeatureFlagsHandler(t),this.instance.decideEndpointWasHit){var r=this.getFlags(),i=this.getFlagVariants();t(r,i)}}}]),n}(),Ba="__mps",Na="__mpso",Ma="__mpus",Ua="__mpa",La="__mpap",ja="__mpr",$a="__mpu",Vo="$people_distinct_id",qr="__alias",Ha="__cmpns",Xt="__timers",Un="$session_recording_enabled_server_side",Ln="$sesid",xo="$enabled_feature_flags",Va=[Ba,Na,Ma,Ua,La,ja,$a,Vo,qr,Ha,Xt,Un,Ln,xo],xa=function(){function n(e){De(this,n);var t="";e.token&&(t=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),this.props={},this.campaign_params_saved=!1,e.persistence_name?this.name="ph_"+e.persistence_name:this.name="ph_"+t+"_posthog";var r=e.persistence.toLowerCase();r!=="cookie"&&r.indexOf("localstorage")===-1&&r!=="memory"&&(Se.critical("Unknown persistence type "+r+"; falling back to cookie"),r=e.persistence="cookie"),r==="localstorage"&&pe.is_supported()?this.storage=pe:r==="localstorage+cookie"&&Mn.is_supported()?this.storage=Mn:r==="memory"?this.storage=Pa:this.storage=Ke,this.load(),this.update_config(e),this.save()}return Te(n,[{key:"properties",value:function(){var t={};return ie(this.props,function(r,i){if(i===xo&&yt(r)==="object")for(var o=Object.keys(r),s=0;s<o.length;s++)t["$feature/".concat(o[s])]=r[o[s]];else oa(Va,i)||(t[i]=r)}),t}},{key:"load",value:function(){if(!this.disabled){var t=this.storage.parse(this.name);t&&(this.props=ye({},t))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(t,r,i){var o=this;return mt(t)?(typeof r>"u"&&(r="None"),this.expire_days=typeof i>"u"?this.default_expiry:i,ie(t,function(s,l){(!o.props.hasOwnProperty(l)||o.props[l]===r)&&(o.props[l]=s)}),this.save(),!0):!1}},{key:"register",value:function(t,r){return mt(t)?(this.expire_days=typeof r>"u"?this.default_expiry:r,ye(this.props,t),this.save(),!0):!1}},{key:"unregister",value:function(t){t in this.props&&(delete this.props[t],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(Ee.campaignParams()),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(t){this.register(Ee.searchInfo(t))}},{key:"update_referrer_info",value:function(t){this.register({$referrer:t||this.props.$referrer||"$direct",$referring_domain:Ee.referringDomain(t)||this.props.$referring_domain||"$direct"})}},{key:"get_referrer_info",value:function(){return An({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"safe_merge",value:function(t){return ie(this.props,function(r,i){i in t||(t[i]=r)}),t}},{key:"update_config",value:function(t){this.default_expiry=this.expire_days=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie)}},{key:"set_disabled",value:function(t){this.disabled=t,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(t){t!==this.cross_subdomain&&(this.cross_subdomain=t,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(t){t!==this.secure&&(this.secure=t,this.remove(),this.save())}},{key:"set_event_timer",value:function(t,r){var i=this.props[Xt]||{};i[t]=r,this.props[Xt]=i,this.save()}},{key:"remove_event_timer",value:function(t){var r=this.props[Xt]||{},i=r[t];return We(i)||(delete this.props[Xt][t],this.save()),i}}]),n}(),za="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNOCAwSDE2TDAgMTZWOEw4IDBaIiBmaWxsPSIjMkQyRDJEIi8+CjxwYXRoIGQ9Ik0xNiA4VjE2SDhMMTYgOFoiIGZpbGw9IiMyRDJEMkQiLz4KPC9zdmc+Cg==";function Ja(n){if(n&&yt(n)==="object"){var e=JSON.stringify(n);if(e.length>5e6){var t=/data:([\w\/\-\.]+);(\w+),([^)"]*)/gim,r=e.matchAll(t),i=ir(r),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;s[1].toLocaleLowerCase().slice(0,6)==="image/"?e=e.replace(s[0],za):e=e.replace(s[0],"")}}catch(l){i.e(l)}finally{i.f()}}return JSON.parse(e)}return n}var Ga="rrweb/console@1";function Wa(n){var e=2e3,t=10;if(n&&yt(n)==="object"&&n.type===Za&&yt(n.data)==="object"&&n.data.plugin===Ga){n.data.payload.payload.length>t&&(n.data.payload.payload=n.data.payload.payload.slice(0,t),n.data.payload.payload.push("...[truncated]"));for(var r=[],i=0;i<n.data.payload.payload.length;i++)n.data.payload.payload[i]&&n.data.payload.payload[i].length>e?r.push(n.data.payload.payload[i].slice(0,e)+"...[truncated]"):r.push(n.data.payload.payload[i]);return n.data.payload.payload=r,n}return n}var Qa="/e/",Mi=2,Ya=4,Xa=3,Za=6,Ka=0,el=function(){function n(e){De(this,n),this.instance=e,this.captureStarted=!1,this.snapshots=[],this.emit=!1,this.endpoint=Qa,this.stopRrweb=void 0,this.windowId=null,this.sessionId=null,this.receivedDecide=!1}return Te(n,[{key:"startRecordingIfEnabled",value:function(){this.isRecordingEnabled()?this.startCaptureAndTrySendingQueuedSnapshots():this.stopRecording()}},{key:"started",value:function(){return this.captureStarted}},{key:"stopRecording",value:function(){this.captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this.captureStarted=!1)}},{key:"isRecordingEnabled",value:function(){var t=!!this.instance.get_property(Un),r=!this.instance.get_config("disable_session_recording");return t&&r}},{key:"afterDecideResponse",value:function(t){var r;if(this.receivedDecide=!0,this.instance.persistence&&this.instance.persistence.register(nr({},Un,!!t.sessionRecording)),(r=t.sessionRecording)!==null&&r!==void 0&&r.endpoint){var i;this.endpoint=(i=t.sessionRecording)===null||i===void 0?void 0:i.endpoint}this.startRecordingIfEnabled()}},{key:"startCaptureAndTrySendingQueuedSnapshots",value:function(){var t=this;this.receivedDecide&&(this.emit=!0,this.snapshots.forEach(function(r){return t._captureSnapshot(r)})),this._startCapture()}},{key:"_startCapture",value:function(){typeof Object.assign>"u"||!this.captureStarted&&!this.instance.get_config("disable_session_recording")&&(this.captureStarted=!0,Uo(this.instance.get_config("api_host")+"/static/recorder.js?v="+He.LIB_VERSION,this._onScriptLoaded.bind(this)))}},{key:"_updateWindowAndSessionIds",value:function(t){var r,i=t.type===Xa&&((r=t.data)===null||r===void 0?void 0:r.source)===Ka,o=this.instance.sessionManager.checkAndGetSessionAndWindowId(i,t.timestamp),s=o.windowId,l=o.sessionId;if((this.windowId!==s||this.sessionId!==l)&&[Mi,Ya].indexOf(t.type)===-1){var a;(a=this.rrwebRecord)===null||a===void 0||a.takeFullSnapshot()}this.windowId=s,this.sessionId=l}},{key:"_onScriptLoaded",value:function(){var t,r=this,i={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskAllInputs:!0,maskInputOptions:{},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0};this.rrwebRecord=window.rrweb?window.rrweb.record:window.rrwebRecord;for(var o=this.instance.get_config("session_recording"),s=0,l=Object.entries(o||{});s<l.length;s++){var a=ni(l[s],2),c=a[0],u=a[1];c in i&&(i[c]=u)}this.stopRrweb=(t=this.rrwebRecord)===null||t===void 0?void 0:t.call(this,me({emit:function(d){d=Wa(Ja(d)),r._updateWindowAndSessionIds(d);var h={$snapshot_data:d,$session_id:r.sessionId,$window_id:r.windowId};r.instance._captureMetrics.incr("rrweb-record"),r.instance._captureMetrics.incr("rrweb-record-".concat(d.type)),r.emit?r._captureSnapshot(h):r.snapshots.push(h)},plugins:window.rrwebConsoleRecord&&this.instance.get_config("enable_recording_console_log")?[window.rrwebConsoleRecord.getRecordConsolePlugin()]:[]},i)),this.instance._addCaptureHook(function(f){if(f==="$pageview"){var d;(d=r.rrwebRecord)===null||d===void 0||d.addCustomEvent("$pageview",{href:window.location.href})}})}},{key:"_captureSnapshot",value:function(t){this.instance.capture("$snapshot",t,{transport:"XHR",method:"POST",endpoint:this.endpoint,_noTruncate:!0,_batchKey:"sessionRecording",_metrics:{rrweb_full_snapshot:t.$snapshot_data.type===Mi}})}}]),n}(),tl=function(){function n(e){De(this,n),this.instance=e,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return Te(n,[{key:"call",value:function(){var t=this,r=JSON.stringify({token:this.instance.get_config("token"),distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups()}),i=Zr(r);this.instance._send_request("".concat(this.instance.get_config("api_host"),"/decide/?v=2"),{data:i,verbose:!0},{method:"POST"},function(o){return t.parseDecideResponse(o)})}},{key:"parseDecideResponse",value:function(t){var r=this,i;if((t==null?void 0:t.status)===0){console.error("Failed to fetch feature flags from PostHog.");return}if(this.instance.decideEndpointWasHit=!0,!(document&&document.body)){console.log("document not ready yet, trying again in 500 milliseconds..."),setTimeout(function(){r.parseDecideResponse(t)},500);return}if(this.instance.toolbar.afterDecideResponse(t),(i=this.instance.sessionRecording)===null||i===void 0||i.afterDecideResponse(t),Lt.afterDecideResponse(t,this.instance),this.instance.featureFlags.receivedFeatureFlags(t),t.supportedCompression){var o={},s=ir(t.supportedCompression),l;try{for(s.s();!(l=s.n()).done;){var a=l.value;o[a]=!0}}catch(c){s.e(c)}finally{s.f()}this.instance.compression=o}else this.instance.compression={}}}]),n}(),rl=function(){function n(e){De(this,n),this.instance=e}return Te(n,[{key:"afterDecideResponse",value:function(t){var r=t.editorParams||(t.toolbarVersion?{toolbarVersion:t.toolbarVersion}:{});t.isAuthenticated&&r.toolbarVersion&&r.toolbarVersion.indexOf("toolbar")===0&&this._loadEditor(me(me({},r),{},{apiURL:this.instance.get_config("api_host")}))}},{key:"maybeLoadEditor",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.location,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window.history;try{if(!r){try{window.localStorage.setItem("test","test"),window.localStorage.removeItem("test")}catch{return!1}r=window.localStorage}var o=qi(t.hash,"__posthog")||qi(t.hash,"state"),s=o?JSON.parse(decodeURIComponent(o)):null,l=s&&(s.action==="mpeditor"||s.action==="ph_authorize"),a;return l?(a=s,a&&Object.keys(a).length>0&&(r.setItem("_postHogEditorParams",JSON.stringify(a)),s.desiredHash?t.hash=s.desiredHash:i?i.replaceState("",document.title,t.pathname+t.search):t.hash="")):(a=JSON.parse(r.getItem("_postHogEditorParams")||"{}"),delete a.userIntent),a.apiURL||(a.apiURL=this.instance.get_config("api_host")),a.token&&this.instance.get_config("token")===a.token?(this._loadEditor(a),!0):!1}catch{return!1}}},{key:"_loadEditor",value:function(t){var r=this;if(!window._postHogToolbarLoaded){window._postHogToolbarLoaded=!0;var i=t.jsURL||t.apiURL||this.instance.get_config("api_host"),o="toolbar.js",s=i+(i.endsWith("/")?"":"/")+"static/"+o+"?_ts="+new Date().getTime(),l=this.instance.get_config("api_host")!=="https://app.posthog.com"&&this.instance.get_config("advanced_disable_toolbar_metrics");return t=me(me({},t),l?{instrument:!1}:{}),Uo(s,function(){window.ph_load_editor(t,r.instance)}),tr(window,"turbolinks:load",function(){window._postHogToolbarLoaded=!1,r._loadEditor(t)}),!0}return!1}}]),n}(),zo=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3e3;De(this,n),this.isPolling=!0,this._event_queue=[],this._empty_queue_count=0,this._poller=void 0,this._pollInterval=e}return Te(n,[{key:"setPollInterval",value:function(t){this._pollInterval=t,this.isPolling&&this.poll()}},{key:"poll",value:function(){}},{key:"unload",value:function(){}},{key:"getTime",value:function(){return new Date().getTime()}}]),n}(),nl=function(n){Co(t,n);var e=Oo(t);function t(r,i){var o,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3e3;return De(this,t),o=e.call(this,s),o.handlePollRequest=i,o.captureMetrics=r,o}return Te(t,[{key:"enqueue",value:function(i,o,s){this.captureMetrics.incr("batch-enqueue"),this._event_queue.push({url:i,data:o,options:s}),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var i=this;clearTimeout(this._poller),this._poller=setTimeout(function(){if(i._event_queue.length>0){var o=i.formatQueue(),s=function(c){var u=o[c],f=u.url,d=u.data,h=u.options;ie(d,function(y,b){d[b].offset=Math.abs(d[b].timestamp-i.getTime()),delete d[b].timestamp}),i.handlePollRequest(f,d,h),i.captureMetrics.incr("batch-requests"),i.captureMetrics.incr("batch-requests-".concat(f.slice(f.length-2))),i.captureMetrics.incr("batch-handle",d.length),i.captureMetrics.incr("batch-handle-".concat(f.slice(f.length-2)),d.length)};for(var l in o)s(l);i._event_queue.length=0,i._empty_queue_count=0}else i._empty_queue_count++;i._empty_queue_count>4&&(i.isPolling=!1,i._empty_queue_count=0),i.isPolling&&i.poll()},this._pollInterval)}},{key:"updateUnloadMetrics",value:function(){var i=this.formatQueue();for(var o in i){var s=i[o],l=s.url,a=s.data;this.captureMetrics.incr("batch-unload-requests"),this.captureMetrics.incr("batch-unload-requests-".concat(l.slice(l.length-2))),this.captureMetrics.incr("batch-unload",a.length),this.captureMetrics.incr("batch-unload-".concat(l.slice(l.length-2)),a.length)}}},{key:"unload",value:function(){var i=this;clearTimeout(this._poller);var o=this._event_queue.length>0?this.formatQueue():{};this._event_queue.length=0;var s=Object.values(o),l=[].concat(Fn(s.filter(function(a){return a.url.indexOf("/e")===0})),Fn(s.filter(function(a){return a.url.indexOf("/e")!==0})));l.map(function(a){var c=a.url,u=a.data,f=a.options;i.handlePollRequest(c,u,me(me({},f),{},{transport:"sendBeacon"}))})}},{key:"formatQueue",value:function(){var i={};return ie(this._event_queue,function(o){var s=o.url,l=o.data,a=o.options,c=(a?a._batchKey:null)||s;i[c]===void 0&&(i[c]={data:[],url:s,options:a}),a&&i[c].options&&i[c].options._metrics&&!i[c].options._metrics.rrweb_full_snapshot&&(i[c].options._metrics.rrweb_full_snapshot=a._metrics.rrweb_full_snapshot),i[c].data.push(l)}),i}}]),t}(zo),il=function(){function n(e){De(this,n),this.enabled=e,this.metrics={}}return Te(n,[{key:"incr",value:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.enabled&&(t="phjs-".concat(t),this.metrics[t]=(this.metrics[t]||0)+r)}},{key:"decr",value:function(t){this.enabled&&(t="phjs-".concat(t),this.metrics[t]=(this.metrics[t]||0)-1)}}]),n}(),Me=Uint8Array,Oe=Uint16Array,Ht=Uint32Array,ai=new Me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),li=new Me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ui=new Me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Jo=function(e,t){for(var r=new Oe(31),i=0;i<31;++i)r[i]=t+=1<<e[i-1];for(var o=new Ht(r[30]),i=1;i<30;++i)for(var s=r[i];s<r[i+1];++s)o[s]=s-r[i]<<5|i;return[r,o]},Go=Jo(ai,2),ol=Go[0],jn=Go[1];ol[28]=258,jn[258]=28;var sl=Jo(li,0),Li=sl[1],$n=new Oe(32768);for(var oe=0;oe<32768;++oe){var gt=(oe&43690)>>>1|(oe&21845)<<1;gt=(gt&52428)>>>2|(gt&13107)<<2,gt=(gt&61680)>>>4|(gt&3855)<<4,$n[oe]=((gt&65280)>>>8|(gt&255)<<8)>>>1}var rr=function(e,t,r){for(var i=e.length,o=0,s=new Oe(t);o<i;++o)++s[e[o]-1];var l=new Oe(t);for(o=0;o<t;++o)l[o]=l[o-1]+s[o-1]<<1;var a;if(r){a=new Oe(1<<t);var c=15-t;for(o=0;o<i;++o)if(e[o])for(var u=o<<4|e[o],f=t-e[o],d=l[e[o]-1]++<<f,h=d|(1<<f)-1;d<=h;++d)a[$n[d]>>>c]=u}else for(a=new Oe(i),o=0;o<i;++o)a[o]=$n[l[e[o]-1]++]>>>15-e[o];return a},Ot=new Me(288);for(var oe=0;oe<144;++oe)Ot[oe]=8;for(var oe=144;oe<256;++oe)Ot[oe]=9;for(var oe=256;oe<280;++oe)Ot[oe]=7;for(var oe=280;oe<288;++oe)Ot[oe]=8;var Wr=new Me(32);for(var oe=0;oe<32;++oe)Wr[oe]=5;var al=rr(Ot,9,0),ll=rr(Wr,5,0),Wo=function(e){return(e/8>>0)+(e&7&&1)},Qo=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var i=new(e instanceof Oe?Oe:e instanceof Ht?Ht:Me)(r-t);return i.set(e.subarray(t,r)),i},ot=function(e,t,r){r<<=t&7;var i=t/8>>0;e[i]|=r,e[i+1]|=r>>>8},Wt=function(e,t,r){r<<=t&7;var i=t/8>>0;e[i]|=r,e[i+1]|=r>>>8,e[i+2]|=r>>>16},fn=function(e,t){for(var r=[],i=0;i<e.length;++i)e[i]&&r.push({s:i,f:e[i]});var o=r.length,s=r.slice();if(!o)return[new Me(0),0];if(o==1){var l=new Me(r[0].s+1);return l[r[0].s]=1,[l,1]}r.sort(function(V,j){return V.f-j.f}),r.push({s:-1,f:25001});var a=r[0],c=r[1],u=0,f=1,d=2;for(r[0]={s:-1,f:a.f+c.f,l:a,r:c};f!=o-1;)a=r[r[u].f<r[d].f?u++:d++],c=r[u!=f&&r[u].f<r[d].f?u++:d++],r[f++]={s:-1,f:a.f+c.f,l:a,r:c};for(var h=s[0].s,i=1;i<o;++i)s[i].s>h&&(h=s[i].s);var y=new Oe(h+1),b=cl(r[f-1],y,0);if(b>t){var i=0,g=0,p=b-t,w=1<<p;for(s.sort(function(j,P){return y[P.s]-y[j.s]||j.f-P.f});i<o;++i){var I=s[i].s;if(y[I]>t)g+=w-(1<<b-y[I]),y[I]=t;else break}for(g>>>=p;g>0;){var q=s[i].s;y[q]<t?g-=1<<t-y[q]++-1:++i}for(;i>=0&&g;--i){var R=s[i].s;y[R]==t&&(--y[R],++g)}b=t}return[new Me(y),b]},cl=function n(e,t,r){return e.s==-1?Math.max(n(e.l,t,r+1),n(e.r,t,r+1)):t[e.s]=r},ji=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Oe(++t),i=0,o=e[0],s=1,l=function(u){r[i++]=u},a=1;a<=t;++a)if(e[a]==o&&a!=t)++s;else{if(!o&&s>2){for(;s>138;s-=138)l(32754);s>2&&(l(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(l(o),--s;s>6;s-=6)l(8304);s>2&&(l(s-3<<5|8208),s=0)}for(;s--;)l(o);s=1,o=e[a]}return[r.subarray(0,i),t]},Qt=function(e,t){for(var r=0,i=0;i<t.length;++i)r+=e[i]*t[i];return r},Br=function(e,t,r){var i=r.length,o=Wo(t+2);e[o]=i&255,e[o+1]=i>>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var s=0;s<i;++s)e[o+s+4]=r[s];return(o+4+i)*8},$i=function(e,t,r,i,o,s,l,a,c,u,f){ot(t,f++,r),++o[256];for(var d=fn(o,15),h=d[0],y=d[1],b=fn(s,15),g=b[0],p=b[1],w=ji(h),I=w[0],q=w[1],R=ji(g),V=R[0],j=R[1],P=new Oe(19),B=0;B<I.length;++B)P[I[B]&31]++;for(var B=0;B<V.length;++B)P[V[B]&31]++;for(var ee=fn(P,7),Q=ee[0],Ie=ee[1],D=19;D>4&&!Q[Ui[D-1]];--D);var Y=u+5<<3,x=Qt(o,Ot)+Qt(s,Wr)+l,W=Qt(o,h)+Qt(s,g)+l+14+3*D+Qt(P,Q)+(2*P[16]+3*P[17]+7*P[18]);if(Y<=x&&Y<=W)return Br(t,f,e.subarray(c,c+u));var J,X,se,ae;if(ot(t,f,1+(W<x)),f+=2,W<x){J=rr(h,y,0),X=h,se=rr(g,p,0),ae=g;var ce=rr(Q,Ie,0);ot(t,f,q-257),ot(t,f+5,j-1),ot(t,f+10,D-4),f+=14;for(var B=0;B<D;++B)ot(t,f+3*B,Q[Ui[B]]);f+=3*D;for(var be=[I,V],de=0;de<2;++de)for(var ue=be[de],B=0;B<ue.length;++B){var T=ue[B]&31;ot(t,f,ce[T]),f+=Q[T],T>15&&(ot(t,f,ue[B]>>>5&127),f+=ue[B]>>>12)}}else J=al,X=Ot,se=ll,ae=Wr;for(var B=0;B<a;++B)if(i[B]>255){var T=i[B]>>>18&31;Wt(t,f,J[T+257]),f+=X[T+257],T>7&&(ot(t,f,i[B]>>>23&31),f+=ai[T]);var G=i[B]&31;Wt(t,f,se[G]),f+=ae[G],G>3&&(Wt(t,f,i[B]>>>5&8191),f+=li[G])}else Wt(t,f,J[i[B]]),f+=X[i[B]];return Wt(t,f,J[256]),f+X[256]},ul=new Ht([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),fl=new Me(0),dl=function(e,t,r,i,o,s){var l=e.length,a=new Me(i+l+5*(1+Math.floor(l/7e3))+o),c=a.subarray(i,a.length-o),u=0;if(!t||l<8)for(var f=0;f<=l;f+=65535){var d=f+65535;d<l?u=Br(c,u,e.subarray(f,d)):(c[f]=s,u=Br(c,u,e.subarray(f,l)))}else{for(var h=ul[t-1],y=h>>>13,b=h&8191,g=(1<<r)-1,p=new Oe(32768),w=new Oe(g+1),I=Math.ceil(r/3),q=2*I,R=function(kt){return(e[kt]^e[kt+1]<<I^e[kt+2]<<q)&g},V=new Ht(25e3),j=new Oe(288),P=new Oe(32),B=0,ee=0,f=0,Q=0,Ie=0,D=0;f<l;++f){var Y=R(f),x=f&32767,W=w[Y];if(p[x]=W,w[Y]=x,Ie<=f){var J=l-f;if((B>7e3||Q>24576)&&J>423){u=$i(e,c,0,V,j,P,ee,Q,D,f-D,u),Q=B=ee=0,D=f;for(var X=0;X<286;++X)j[X]=0;for(var X=0;X<30;++X)P[X]=0}var se=2,ae=0,ce=b,be=x-W&32767;if(J>2&&Y==R(f-be))for(var de=Math.min(y,J)-1,ue=Math.min(32767,f),T=Math.min(258,J);be<=ue&&--ce&&x!=W;){if(e[f+se]==e[f+se-be]){for(var G=0;G<T&&e[f+G]==e[f+G-be];++G);if(G>se){if(se=G,ae=be,G>de)break;for(var Ue=Math.min(be,G-2),Ve=0,X=0;X<Ue;++X){var Qe=f-be+X+32768&32767,dt=p[Qe],Rt=Qe-dt+32768&32767;Rt>Ve&&(Ve=Rt,W=Qe)}}}x=W,W=p[x],be+=x-W+32768&32767}if(ae){V[Q++]=268435456|jn[se]<<18|Li[ae];var Ye=jn[se]&31,xe=Li[ae]&31;ee+=ai[Ye]+li[xe],++j[257+Ye],++P[xe],Ie=f+se,++B}else V[Q++]=e[f],++j[e[f]]}}u=$i(e,c,s,V,j,P,ee,Q,D,f-D,u),s||(u=Br(c,u,fl))}return Qo(a,0,i+Wo(u)+o)},_l=function(){for(var n=new Ht(256),e=0;e<256;++e){for(var t=e,r=9;--r;)t=(t&1&&3988292384)^t>>>1;n[e]=t}return n}(),hl=function(){var e=4294967295;return{p:function(r){for(var i=e,o=0;o<r.length;++o)i=_l[i&255^r[o]]^i>>>8;e=i},d:function(){return e^4294967295}}},pl=function(e,t,r,i,o){return dl(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,r,i,!o)},Hn=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},gl=function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&Hn(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var i=0;i<=r.length;++i)e[i+10]=r.charCodeAt(i)}},vl=function(e){return 10+(e.filename&&e.filename.length+1||0)};function ml(n,e){e===void 0&&(e={});var t=hl(),r=n.length;t.p(n);var i=pl(n,e,vl(e),8),o=i.length;return gl(i,e),Hn(i,o-8,t.d()),Hn(i,o-4,r),i}function bl(n,e){var t=n.length;if(!e&&typeof TextEncoder<"u")return new TextEncoder().encode(n);for(var r=new Me(n.length+(n.length>>>1)),i=0,o=function(u){r[i++]=u},s=0;s<t;++s){if(i+5>r.length){var l=new Me(i+8+(t-s<<1));l.set(r),r=l}var a=n.charCodeAt(s);a<128||e?o(a):a<2048?(o(192|a>>>6),o(128|a&63)):a>55295&&a<57344?(a=65536+(a&1023<<10)|n.charCodeAt(++s)&1023,o(240|a>>>18),o(128|a>>>12&63),o(128|a>>>6&63),o(128|a&63)):(o(224|a>>>12),o(128|a>>>6&63),o(128|a&63))}return Qo(r,0,i)}var Ge;(function(n){n.GZipJS="gzip-js",n.LZ64="lz64",n.Base64="base64"})(Ge||(Ge={}));function yl(n){return n[Ge.GZipJS]?Ge.GZipJS:n[Ge.LZ64]?Ge.LZ64:Ge.Base64}function wl(n,e,t){return n===Ge.LZ64?[{data:Ae.compressToBase64(e),compression:Ge.LZ64},t]:n===Ge.GZipJS?[ml(bl(e),{mtime:0}),me(me({},t),{},{blob:!0,urlQueryArgs:{compression:Ge.GZipJS}})]:[{data:Zr(e)},t]}var kl=function(e,t,r){var i=t||{};i.ip=r.ip?1:0,i._=new Date().getTime().toString(),i.ver=He.LIB_VERSION;var o=e.split("?");if(o.length>1){var s=o[1].split("&"),l=ir(s),a;try{for(l.s();!(a=l.n()).done;){var c=a.value,u=c.split("=")[0];i[u]&&delete i[u]}}catch(d){l.e(d)}finally{l.f()}}var f=e.indexOf("?")>-1?"&":"?";return e+f+ga(i)},ci=function n(e,t){if(t.blob&&e.buffer)return new Blob([e.buffer],{type:"text/plain"});if(t.sendBeacon||t.blob){var r=n(e,{method:"POST"});return new Blob([r],{type:"application/x-www-form-urlencoded"})}if(t.method!=="POST")return null;var i,o=function(l){return Object.prototype.toString.call(l)==="[object Uint8Array]"};return Array.isArray(e)||o(e)?i="data="+encodeURIComponent(e):i="data="+encodeURIComponent(e.data),"compression"in e&&e.compression&&(i+="&compression="+e.compression),i},Yo=function(e){var t=e.url,r=e.data,i=e.headers,o=e.options,s=e.captureMetrics,l=e.callback,a=e.retriesPerformedSoFar,c=e.retryQueue,u=e.onXHRError,f=new XMLHttpRequest;f.open(o.method||"GET",t,!0);var d=ci(r,o);s.incr("_send_request"),s.incr("_send_request_inflight"),ie(i,function(h,y){f.setRequestHeader(y,h)}),o.method==="POST"&&!o.blob&&f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.withCredentials=!0,f.onreadystatechange=function(){if(f.readyState===4)if(s.incr("xhr-response"),s.incr("xhr-response-".concat(f.status)),s.decr("_send_request_inflight"),f.status===200){if(l){var h;try{h=JSON.parse(f.responseText)}catch(y){Se.error(y);return}l(h)}}else typeof u=="function"&&u(f),[401,403,404,500].indexOf(f.status)<0&&c.enqueue({url:t,data:r,options:o,headers:i,retriesPerformedSoFar:(a||0)+1,callback:l}),l&&l({status:0})},f.send(d)},Sl=function(n){Co(t,n);var e=Oo(t);function t(r,i){var o;return De(this,t),o=e.call(this),o.captureMetrics=r,o.isPolling=!1,o.queue=[],o.areWeOnline=!0,o.onXHRError=i,"onLine"in window.navigator&&(o.areWeOnline=window.navigator.onLine,window.addEventListener("online",function(){o._handleWeAreNowOnline()}),window.addEventListener("offline",function(){o.areWeOnline=!1})),o}return Te(t,[{key:"enqueue",value:function(i){var o=i.retriesPerformedSoFar||0;if(!(o>=10)){var s=3e3*Math.pow(2,o),l=new Date(Date.now()+s);console.warn("Enqueued failed request for retry in ".concat(s)),this.queue.push({retryAt:l,requestData:i}),this.isPolling||(this.isPolling=!0,this.poll())}}},{key:"poll",value:function(){var i=this;this._poller&&clearTimeout(this._poller),this._poller=setTimeout(function(){i.areWeOnline&&i.queue.length>0&&i.flush(),i.poll()},this._pollInterval)}},{key:"flush",value:function(){var i=new Date(Date.now()),o=this.queue.filter(function(c){var u=c.retryAt;return u<i});if(o.length>0){this.queue=this.queue.filter(function(c){var u=c.retryAt;return u>=i});var s=ir(o),l;try{for(s.s();!(l=s.n()).done;){var a=l.value.requestData;this._executeXhrRequest(a)}}catch(c){s.e(c)}finally{s.f()}}}},{key:"unload",value:function(){this._poller&&(clearTimeout(this._poller),this._poller=void 0);var i=ir(this.queue),o;try{for(i.s();!(o=i.n()).done;){var s=o.value.requestData,l=s.url,a=s.data,c=s.options;try{window.navigator.sendBeacon(l,ci(a,me(me({},c),{},{sendBeacon:!0})))}catch(u){He.DEBUG&&console.error(u)}}}catch(u){i.e(u)}finally{i.f()}this.queue=[]}},{key:"_executeXhrRequest",value:function(i){var o=i.url,s=i.data,l=i.options,a=i.headers,c=i.callback,u=i.retriesPerformedSoFar;Yo({url:o,data:s||{},options:l||{},headers:a||{},retriesPerformedSoFar:u||0,callback:c,captureMetrics:this.captureMetrics,retryQueue:this,onXHRError:this.onXHRError})}},{key:"_handleWeAreNowOnline",value:function(){this.areWeOnline=!0,this.flush()}}]),t}(zo),Pl=30*60*1e3,El=24*3600*1e3,Cl=function(){function n(e,t){De(this,n),this.persistence=t,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,e.persistence_name?this.window_id_storage_key="ph_"+e.persistence_name+"_window_id":this.window_id_storage_key="ph_"+e.token+"_window_id"}return Te(n,[{key:"_setWindowId",value:function(t){t!==this._windowId&&(this._windowId=t,!this.persistence.disabled&&Je.is_supported()&&Je.set(this.window_id_storage_key,t))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:!this.persistence.disabled&&Je.is_supported()?Je.parse(this.window_id_storage_key):null}},{key:"_setSessionId",value:function(t,r,i){(t!==this._sessionId||r!==this._sessionActivityTimestamp||i!==this._sessionStartTimestamp)&&(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=r,this._sessionId=t,this.persistence.register(nr({},Ln,[r,t,i])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var t=this.persistence.props[Ln];return Array.isArray(t)&&t.length===2&&t.push(t[0]),t||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"checkAndGetSessionAndWindowId",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=r||new Date().getTime(),o=this._getSessionId(),s=ni(o,3),l=s[0],a=s[1],c=s[2],u=this._getWindowId(),f=c&&c>0&&Math.abs(i-c)>El;!a||!t&&Math.abs(i-l)>Pl||f?(a=Ut(),u=Ut(),c=i):u||(u=Ut());var d=l===0||!t||f?i:l,h=c===0?new Date().getTime():c;return this._setWindowId(u),this._setSessionId(a,d,h),{sessionId:a,windowId:u}}}]),n}();function Ol(n){return Number(n)===n&&n%1!==0}function Il(n){return n.forEach(function(e,t){for(var r in e){var i=r;Ol(e[i])&&e[i].toString().match(/^\d+\.\d{4,}$/)&&(n[t][i]=Number(e[i].toFixed(3))),i==="serverTiming"&&e[i].length===0&&delete n[t][i],i==="entryType"&&e[i]==="resource"&&delete n[t][i],i==="nextHopProtocol"&&delete n[t][i],e[i]===0&&delete n[t][i]}}),Rl(n)}function dn(n){try{var e=JSON.parse(JSON.stringify(ge.performance.getEntriesByType(n)));return Il(e)}catch(t){return He.DEBUG&&console.warn("not able to capture performance data ("+n+") - "+t),[]}}function Rl(n){if(n.length===0)return[];var e=Object.keys(n[0]);return[e,n.map(function(t){return e.map(function(r){return t[r]})})]}function Fl(n){var e=n.navigation&&n.navigation[0],t=n.navigation&&n.navigation[1]&&n.navigation[1][0],r=e&&e.indexOf("duration");if(r>-1)return t[r];var i=e&&e.indexOf("loadEventEnd"),o=e&&e.indexOf("startTime");if(i>-1){var s=t&&t[i],l=t&&t[o]||0;return s-l}}function Dl(){var n={navigation:dn("navigation"),paint:dn("paint"),resource:dn("resource")};yt(ge)!==void 0&&ge.performance&&ge.performance.clearResourceTimings&&ge.performance.clearResourceTimings();var e={},t=Fl(n);return t&&(e.$performance_page_loaded=t),e.$performance_raw=JSON.stringify(n),e}var Tl=Te(function n(e,t,r,i){De(this,n),this.name="posthog-js",this.setupOnce=function(o){o(function(s){if(s.level!=="error"||!e.__loaded)return s;s.tags||(s.tags={}),s.tags["PostHog Person URL"]=e.config.api_host+"/person/"+e.get_distinct_id(),e.sessionRecordingStarted()&&(s.tags["PostHog Recording URL"]=e.config.api_host+"/recordings/#sessionRecordingId="+e.sessionManager.checkAndGetSessionAndWindowId(!0).sessionId);var l={$sentry_event_id:s.event_id,$sentry_exception:s.exception};return t&&r&&(l.$sentry_url=(i||"https://sentry.io/organizations/")+t+"/issues/?project="+r+"&query="+s.event_id),e.capture("$exception",l),s})}}),or;(function(n){n[n.INIT_MODULE=0]="INIT_MODULE",n[n.INIT_SNIPPET=1]="INIT_SNIPPET"})(or||(or={}));var ui,we,Vn=function(){},kr={},Ne="posthog",Nr=ge.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,Xo=!Nr&&ze.indexOf("MSIE")===-1&&ze.indexOf("Mozilla")===-1,Hi=function(){var e,t,r;return{api_host:"https://app.posthog.com",api_method:"POST",api_transport:"XHR",token:"",autocapture:!0,rageclick:!1,cross_subdomain_cookie:(Be==null||(e=Be.location)===null||e===void 0||(t=e.hostname)===null||t===void 0?void 0:t.indexOf("herokuapp.com"))===-1,persistence:"cookie",persistence_name:"",cookie_name:"",loaded:Vn,store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,capture_pageview:!0,debug:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_cookie:!1,enable_recording_console_log:!1,secure_cookie:(ge==null||(r=ge.location)===null||r===void 0?void 0:r.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,property_blacklist:[],respect_dnt:!1,sanitize_properties:null,xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{blockClass:"ph-no-capture",blockSelector:null,ignoreClass:"ph-ignore-input",maskAllInputs:!0,maskInputOptions:{},maskInputFn:null,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_toolbar_metrics:!1,on_xhr_error:function(o){var s="Bad HTTP status: "+o.status+" "+o.statusText;console.error(s)},get_device_id:function(o){return o},_onCapture:Vn,_capture_metrics:!1,_capture_performance:!1,name:"posthog",callback_fn:"posthog._jsc",bootstrap:{}}},xn=function(e,t,r){var i,o=r===Ne||!we?we:r?we[r]:void 0;if(o&&ui===or.INIT_MODULE)i=o;else{if(o&&!st(o)){console.error("You have already initialized "+r);return}i=new fi}if(i._init(e,t,r),i.toolbar.maybeLoadEditor(),i.sessionRecording=new el(i),i.sessionRecording.startRecordingIfEnabled(),i.__autocapture_enabled=i.get_config("autocapture"),i.get_config("autocapture")){var s=100,l=100;Lt.enabledForProject(i.get_config("token"),s,l)?Lt.isBrowserSupported()?Lt.init(i):(i.__autocapture_enabled=!1,Se.log("Disabling Automatic Event Collection because this browser is not supported")):(i.__autocapture_enabled=!1,Se.log("Not in active bucket: disabling Automatic Event Collection."))}return He.DEBUG=He.DEBUG||i.get_config("debug"),typeof o<"u"&&st(o)&&(i._execute_array.call(i.people,o.people),i._execute_array(o)),i},fi=function(){function n(){De(this,n),this.config=Hi(),this.compression={},this.decideEndpointWasHit=!1,this.SentryIntegration=Tl,this.__captureHooks=[],this.__request_queue=[],this.__loaded=!1,this.__autocapture_enabled=void 0,this._jsc=function(){},this.people=new Ta(this),this.featureFlags=new qa(this),this.feature_flags=this.featureFlags,this.toolbar=new rl(this),this._captureMetrics=void 0,this._requestQueue=void 0,this._retryQueue=void 0,this.persistence=void 0,this.sessionManager=void 0}return Te(n,[{key:"init",value:function(t,r,i){if(We(i)){console.error("You must name your new library: init(token, config, name)");return}if(i===Ne){console.error("You must initialize the main posthog object right after you include the PostHog js snippet");return}var o=xn(t,r,i);return we[i]=o,o._loaded(),o}},{key:"_init",value:function(t){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(this.__loaded=!0,this.config={},this._triggered_notifs=[],this.set_config(ye({},Hi(),i,{name:o,token:t,callback_fn:(o===Ne?o:Ne+"."+o)+"._jsc"})),this._jsc=function(){},this._captureMetrics=new il(this.get_config("_capture_metrics")),this._requestQueue=new nl(this._captureMetrics,this._handle_queued_event.bind(this)),this._retryQueue=new Sl(this._captureMetrics,this.get_config("on_xhr_error")),this.__captureHooks=[],this.__request_queue=[],this.persistence=new xa(this.config),this.sessionManager=new Cl(this.config,this.persistence),this._gdpr_init(),((r=i.bootstrap)===null||r===void 0?void 0:r.distinctID)!==void 0){var s,l=this.get_config("get_device_id")(Ut()),a=(s=i.bootstrap)!==null&&s!==void 0&&s.isIdentifiedID?l:i.bootstrap.distinctID;this.register({distinct_id:i.bootstrap.distinctID,$device_id:a})}if(this._hasBootstrappedFeatureFlags()){var c,u=Object.keys(((c=i.bootstrap)===null||c===void 0?void 0:c.featureFlags)||{}).filter(function(d){var h,y;return!!((h=i.bootstrap)!==null&&h!==void 0&&(y=h.featureFlags)!==null&&y!==void 0&&y[d])}).reduce(function(d,h){var y,b;return d[h]=((y=i.bootstrap)===null||y===void 0||(b=y.featureFlags)===null||b===void 0?void 0:b[h])||!1,d},{});this.featureFlags.receivedFeatureFlags({featureFlags:u})}if(!this.get_distinct_id()){var f=this.get_config("get_device_id")(Ut());this.register_once({distinct_id:f,$device_id:f},"")}ge.addEventListener&&ge.addEventListener("onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this))}},{key:"_loaded",value:function(){this.featureFlags.setReloadingPaused(!0);try{this.get_config("loaded")(this)}catch(t){console.error("`loaded` function failed",t)}this._start_queue_if_opted_in(),this.get_config("capture_pageview")&&this.capture("$pageview",{},{send_instantly:!0}),this.get_config("advanced_disable_decide")||new tl(this).call(),this.featureFlags.resetRequestQueue(),this.featureFlags.setReloadingPaused(!1)}},{key:"_start_queue_if_opted_in",value:function(){this.has_opted_out_capturing()||this.get_config("request_batching")&&this._requestQueue.poll()}},{key:"_dom_loaded",value:function(){var t=this;this.has_opted_out_capturing()||vt(this.__request_queue,function(r){t._send_request.apply(t,Fn(r))}),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_prepare_callback",value:function(t,r){if(We(t))return null;if(Nr)return function(l){t(l,r)};var i=this._jsc,o=""+Math.floor(Math.random()*1e8),s=this.get_config("callback_fn")+"["+o+"]";return i[o]=function(l){delete i[o],t(l,r)},s}},{key:"_handle_unload",value:function(){if(!this.get_config("request_batching")){this.get_config("capture_pageview")&&this.capture("$pageleave",null,{transport:"sendBeacon"});return}this.get_config("capture_pageview")&&this.capture("$pageleave"),this.get_config("_capture_metrics")&&(this._requestQueue.updateUnloadMetrics(),this.capture("$capture_metrics",this._captureMetrics.metrics)),this._requestQueue.unload(),this._retryQueue.unload()}},{key:"_handle_queued_event",value:function(t,r,i){var o=JSON.stringify(r);this.__compress_and_send_json_request(t,o,i||kr,Vn)}},{key:"__compress_and_send_json_request",value:function(t,r,i,o){var s=wl(yl(this.compression),r,i),l=ni(s,2),a=l[0],c=l[1];this._send_request(t,a,c,o)}},{key:"_send_request",value:function(t,r,i,o){if(Xo){this.__request_queue.push([t,r,i,o]);return}var s={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")};i=ye(s,i||{}),Nr||(i.method="GET");var l="sendBeacon"in ge.navigator&&i.transport==="sendBeacon";if(t=kl(t,i.urlQueryArgs||{},{ip:this.get_config("ip")}),mt(r)&&this.get_config("img")){var a=Be.createElement("img");a.src=t,Be.body.appendChild(a)}else if(l)try{ge.navigator.sendBeacon(t,ci(r,me(me({},i),{},{sendBeacon:!0})))}catch(d){this.get_config("debug")&&console.error(d)}else if(Nr)try{Yo({url:t,data:r,headers:this.get_config("xhr_headers"),options:i,captureMetrics:this._captureMetrics,callback:o,retriesPerformedSoFar:0,retryQueue:this._retryQueue,onXHRError:this.get_config("on_xhr_error")})}catch(d){console.error(d)}else{var c,u=Be.createElement("script");u.type="text/javascript",u.async=!0,u.defer=!0,u.src=t;var f=Be.getElementsByTagName("script")[0];(c=f.parentNode)===null||c===void 0||c.insertBefore(u,f)}}},{key:"_execute_array",value:function(t){var r=this,i,o=[],s=[],l=[];vt(t,function(c){c&&(i=c[0],st(i)?l.push(c):typeof c=="function"?c.call(r):st(c)&&i==="alias"?o.push(c):st(c)&&i.indexOf("capture")!==-1&&typeof r[i]=="function"?l.push(c):s.push(c))});var a=function(u,f){vt(u,function(d){if(st(d[0])){var h=f;ie(d,function(y){h=h[y[0]].apply(h,y.slice(1))})}else this[d[0]].apply(this,d.slice(1))},f)};a(o,this),a(s,this),a(l,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var t,r;return((t=this.config.bootstrap)===null||t===void 0?void 0:t.featureFlags)&&Object.keys((r=this.config.bootstrap)===null||r===void 0?void 0:r.featureFlags).length>0||!1}},{key:"push",value:function(t){this._execute_array([t])}},{key:"capture",value:function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kr;if(!!this.__loaded&&!Ho(this,!1)){this._captureMetrics.incr("capture"),t==="$snapshot"&&this._captureMetrics.incr("snapshot"),i=i||kr;var o=i.transport;if(o&&(i.transport=o),We(t)||typeof t!="string"){console.error("No event name provided to posthog.capture");return}if(!pa(ze)){var s=this.persistence.remove_event_timer(t);this.persistence.update_search_keyword(Be.referrer),this.get_config("store_google")&&this.persistence.update_campaign_params(),this.get_config("save_referrer")&&this.persistence.update_referrer_info(Be.referrer);var l={event:t,properties:this._calculate_event_properties(t,r||{},s)};t==="$identify"&&i.$set&&(l.$set=i.$set),l=Ao(l,i._noTruncate?null:this.get_config("properties_string_max_length")),l.timestamp=i.timestamp||new Date,this.get_config("debug")&&Se.log("PostHog.js send",l);var a=JSON.stringify(l),c=this.get_config("api_host")+(i.endpoint||"/e/"),u=i!==kr;return this.get_config("request_batching")&&(!u||i._batchKey)&&!i.send_instantly?this._requestQueue.enqueue(c,l,i):this.__compress_and_send_json_request(c,a,i),this._invokeCaptureHooks(t,l),l}}}},{key:"_addCaptureHook",value:function(t){this.__captureHooks.push(t)}},{key:"_invokeCaptureHooks",value:function(t,r){this.config._onCapture(t,r),ie(this.__captureHooks,function(i){return i(t)})}},{key:"_calculate_event_properties",value:function(t,r,i){var o=me({},r);if(o.token=this.get_config("token"),t==="$snapshot"){var s=this.persistence.properties();return o.distinct_id=s.distinct_id,o}if(typeof i<"u"){var l=new Date().getTime()-i;o.$duration=parseFloat((l/1e3).toFixed(3))}if(this.sessionManager){var a=this.sessionManager.checkAndGetSessionAndWindowId(),c=a.sessionId,u=a.windowId;o.$session_id=c,o.$window_id=u}o=ye({},Ee.properties(),this.persistence.properties(),o),t==="$pageview"&&this.get_config("_capture_performance")&&(o=ye(o,Dl()));var f=this.get_config("property_blacklist");st(f)?ie(f,function(h){delete o[h]}):console.error("Invalid value for property_blacklist config: "+f);var d=this.get_config("sanitize_properties");return d&&(o=d(o,t)),o}},{key:"register",value:function(t,r){this.persistence.register(t,r)}},{key:"register_once",value:function(t,r,i){this.persistence.register_once(t,r,i)}},{key:"unregister",value:function(t){this.persistence.unregister(t)}},{key:"_register_single",value:function(t,r){this.register(nr({},t,r))}},{key:"getFeatureFlag",value:function(t,r){return this.featureFlags.getFeatureFlag(t,r)}},{key:"isFeatureEnabled",value:function(t,r){return this.featureFlags.isFeatureEnabled(t,r)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"onFeatureFlags",value:function(t){return this.featureFlags.onFeatureFlags(t)}},{key:"identify",value:function(t,r,i){if(!t){console.error("Unique user id has not been set in posthog.identify");return}this._captureMetrics.incr("identify");var o=this.get_distinct_id();if(this.register({$user_id:t}),!this.get_property("$device_id")){var s=o;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}t!==o&&t!==this.get_property(qr)&&(this.unregister(qr),this.register({distinct_id:t})),t!==o&&(!this.get_property("$device_id")||o===this.get_property("$device_id"))?(this.capture("$identify",{distinct_id:t,$anon_distinct_id:o},{$set:r||{},$set_once:i||{}}),this.featureFlags.setAnonymousDistinctId(o)):(r&&this.people.set(r),i&&this.people.set_once(i)),t!==o&&this.reloadFeatureFlags()}},{key:"group",value:function(t,r,i){if(!t||!r){console.error("posthog.group requires a group type and group key");return}this._captureMetrics.incr("group");var o=this.getGroups();this.register({$groups:me(me({},o),{},nr({},t,r))}),i&&this.capture("$groupidentify",{$group_type:t,$group_key:r,$group_set:i}),o[t]!==r&&this.reloadFeatureFlags()}},{key:"reset",value:function(t){var r=this.get_property("$device_id");this.persistence.clear(),this.sessionManager.resetSessionId();var i=this.get_config("get_device_id")(Ut());this.register_once({distinct_id:i,$device_id:t?i:r},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"alias",value:function(t,r){return t===this.get_property(Vo)?(Se.critical("Attempting to create alias for existing People user - aborting."),-2):(We(r)&&(r=this.get_distinct_id()),t!==r?(this._register_single(qr,t),this.capture("$create_alias",{alias:t,distinct_id:r})):(console.error("alias matches current distinct_id - skipping api call."),this.identify(t),-1))}},{key:"set_config",value:function(t){var r=me({},this.config);mt(t)&&(ye(this.config,t),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),pe.is_supported()&&pe.get("ph_debug")==="true"&&(this.config.debug=!0),this.get_config("debug")&&(He.DEBUG=!0),this.sessionRecording&&typeof t.disable_session_recording<"u"&&r.disable_session_recording!==t.disable_session_recording&&(t.disable_session_recording?this.sessionRecording.stopRecording():this.sessionRecording.startRecordingIfEnabled()))}},{key:"startSessionRecording",value:function(){this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var t;return!!((t=this.sessionRecording)!==null&&t!==void 0&&t.started())}},{key:"get_config",value:function(t){var r;return(r=this.config)===null||r===void 0?void 0:r[t]}},{key:"get_property",value:function(t){return this.persistence.props[t]}},{key:"toString",value:function(){var t,r=(t=this.get_config("name"))!==null&&t!==void 0?t:Ne;return r!==Ne&&(r=Ne+"."+r),r}},{key:"_gdpr_init",value:function(){var t=this.get_config("opt_out_capturing_persistence_type")==="localStorage";t&&pe.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_capturing()&&(this.get_config("opt_out_capturing_by_default")||Ke.get("ph_optout"))&&(Ke.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.get_config("opt_out_persistence_by_default")}))}},{key:"_gdpr_update_persistence",value:function(t){var r;if(t&&t.clear_persistence)r=!0;else if(t&&t.enable_persistence)r=!1;else return;!this.get_config("disable_persistence")&&this.persistence.disabled!==r&&this.persistence.set_disabled(r)}},{key:"_gdpr_call_func",value:function(t,r){return r=ye({capture:this.capture.bind(this),persistence_type:this.get_config("opt_out_capturing_persistence_type"),cookie_prefix:this.get_config("opt_out_capturing_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),secure_cookie:this.get_config("secure_cookie")},r||{}),!pe.is_supported()&&r.persistence_type==="localStorage"&&(r.persistence_type="cookie"),t(this.get_config("token"),{capture:r.capture,captureEventName:r.capture_event_name,captureProperties:r.capture_properties,persistenceType:r.persistence_type,persistencePrefix:r.cookie_prefix,cookieExpiration:r.cookie_expiration,crossSubdomainCookie:r.cross_subdomain_cookie,secureCookie:r.secure_cookie})}},{key:"opt_in_capturing",value:function(t){t=ye({enable_persistence:!0},t||{}),this._gdpr_call_func(Ca,t),this._gdpr_update_persistence(t)}},{key:"opt_out_capturing",value:function(t){var r=ye({clear_persistence:!0},t||{});this._gdpr_call_func(Oa,r),this._gdpr_update_persistence(r)}},{key:"has_opted_in_capturing",value:function(t){return this._gdpr_call_func(Ia,t)}},{key:"has_opted_out_capturing",value:function(t){return this._gdpr_call_func(Lo,t)}},{key:"clear_opt_in_out_capturing",value:function(t){var r=ye({enable_persistence:!0},t!=null?t:{});this._gdpr_call_func(Ra,r),this._gdpr_update_persistence(r)}},{key:"debug",value:function(t){t===!1?(ge.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(ge.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}},{key:"decodeLZ64",value:function(t){return Ae.decompressFromBase64(t||null)}}]),n}();fa(fi,["identify"]);var qt={},Al=function(){ie(qt,function(e,t){t!==Ne&&(we[t]=e)})},ql=function(){we.init=function(e,t,r){if(r)return we[r]||(we[r]=qt[r]=xn(e||"",t||{},r),we[r]._loaded()),we[r];var i=we;return qt[Ne]?i=qt[Ne]:e&&(i=xn(e,t||{},Ne),i._loaded(),qt[Ne]=i),we=i,ui===or.INIT_SNIPPET&&(ge[Ne]=we),Al(),i}},Bl=function(){function e(){e.done||(e.done=!0,Xo=!1,ie(qt,function(t){t._dom_loaded()}))}Be.addEventListener&&(Be.readyState==="complete"?e():Be.addEventListener("DOMContentLoaded",e,!1)),tr(ge,"load",e,!0)};function Nl(){return ui=or.INIT_MODULE,we=new fi,ql(),we.init(),Bl(),we}var Sr=Nl();const z="src/components/Welcome.svelte";function Zo(n){let e,t,r,i,o,s;o=new sr({props:{icon:"check",css_class:"w-4 h-4 text-white"},$$inline:!0});const l={c:function(){e=E("button"),t=E("p"),r=N("Connected to Notion"),i=U(),lt(o.$$.fragment),this.h()},l:function(c){e=C(c,"BUTTON",{class:!0});var u=S(e);t=C(u,"P",{class:!0});var f=S(t);r=M(f,"Connected to Notion"),f.forEach(v),i=L(u),ct(o.$$.fragment,u),u.forEach(v),this.h()},h:function(){_(t,"class","font-medium text-sm whitespace-nowrap s-of_zlxC_FvlV"),k(t,z,47,4,1610),e.disabled=!0,_(e,"class","btn bg-[#1D49CC] text-white btn-inner-shadow flex gap-3 items-center justify-evenly font-inter min-h-[42px] s-of_zlxC_FvlV"),k(e,z,43,3,1459)},m:function(c,u){F(c,e,u),m(e,t),m(t,r),m(e,i),ut(o,e,null),s=!0},p:ne,i:function(c){s||(le(o.$$.fragment,c),s=!0)},o:function(c){_e(o.$$.fragment,c),s=!1},d:function(c){c&&v(e),ft(o)}};return A("SvelteRegisterBlock",{block:l,id:Zo.name,type:"else",source:"(43:2) {:else}",ctx:n}),l}function Ko(n){let e,t,r,i,o,s,l,a;const c={c:function(){e=E("button"),t=E("img"),i=U(),o=E("p"),s=N("Connect to Notion"),this.h()},l:function(f){e=C(f,"BUTTON",{class:!0});var d=S(e);t=C(d,"IMG",{src:!0,alt:!0,class:!0}),i=L(d),o=C(d,"P",{class:!0});var h=S(o);s=M(h,"Connect to Notion"),h.forEach(v),d.forEach(v),this.h()},h:function(){Zt(t.src,r="notion_icon_64_64.png")||_(t,"src",r),_(t,"alt","logo"),_(t,"class","w-5 h-5 s-of_zlxC_FvlV"),k(t,z,39,4,1296),_(o,"class","text-black text-sm whitespace-nowrap s-of_zlxC_FvlV"),k(o,z,40,4,1363),_(e,"class","btn primary flex gap-3 items-center justify-evenly font-inter text-base min-h-[42px] px-6 s-of_zlxC_FvlV"),k(e,z,35,3,1152)},m:function(f,d){F(f,e,d),m(e,t),m(e,i),m(e,o),m(o,s),l||(a=at(e,"click",n[2],!1,!1,!1),l=!0)},p:ne,i:ne,o:ne,d:function(f){f&&v(e),l=!1,a()}};return A("SvelteRegisterBlock",{block:c,id:Ko.name,type:"if",source:"(35:2) {#if !isLoggedIn}",ctx:n}),c}function zn(n){let e,t,r,i,o,s;o=new sr({props:{icon:"check",css_class:"w-4 h-4 text-white"},$$inline:!0});const l={c:function(){e=E("button"),t=E("p"),r=N("Fields connected"),i=U(),lt(o.$$.fragment),this.h()},l:function(c){e=C(c,"BUTTON",{class:!0});var u=S(e);t=C(u,"P",{class:!0});var f=S(t);r=M(f,"Fields connected"),f.forEach(v),i=L(u),ct(o.$$.fragment,u),u.forEach(v),this.h()},h:function(){_(t,"class","font-medium text-sm s-of_zlxC_FvlV"),k(t,z,77,5,2428),e.disabled=!0,_(e,"class","btn bg-[#1D49CC] text-white btn-inner-shadow flex gap-3 items-center justify-evenly font-inter min-h-[42px] s-of_zlxC_FvlV"),k(e,z,73,4,2273)},m:function(c,u){F(c,e,u),m(e,t),m(t,r),m(e,i),ut(o,e,null),s=!0},i:function(c){s||(le(o.$$.fragment,c),s=!0)},o:function(c){_e(o.$$.fragment,c),s=!1},d:function(c){c&&v(e),ft(o)}};return A("SvelteRegisterBlock",{block:l,id:zn.name,type:"if",source:"(73:3) {#if !isSave}",ctx:n}),l}function Jn(n){let e,t,r,i;function o(a){n[3](a)}let s={minimalDisplay:!0,timeout:300};n[1]!==void 0&&(s.isSave=n[1]),t=new ar({props:s,$$inline:!0}),Gi.push(()=>Wi(t,"isSave",o));const l={c:function(){e=E("div"),lt(t.$$.fragment),this.h()},l:function(c){e=C(c,"DIV",{class:!0});var u=S(e);ct(t.$$.fragment,u),u.forEach(v),this.h()},h:function(){_(e,"class","self-center flex flex-col items-center w-full s-of_zlxC_FvlV"),k(e,z,83,3,2602)},m:function(c,u){F(c,e,u),ut(t,e,null),i=!0},p:function(c,u){const f={};!r&&u&2&&(r=!0,f.isSave=c[1],Qi(()=>r=!1)),t.$set(f)},i:function(c){i||(le(t.$$.fragment,c),i=!0)},o:function(c){_e(t.$$.fragment,c),i=!1},d:function(c){c&&v(e),ft(t)}};return A("SvelteRegisterBlock",{block:l,id:Jn.name,type:"if",source:"(83:2) {#if isLoggedIn && isSave}",ctx:n}),l}function Gn(n){let e,t,r,i,o,s,l,a,c,u,f;const d={c:function(){e=E("div"),t=E("a"),r=E("p"),i=N("Open Linkedin"),o=U(),s=E("span"),l=N("or"),a=U(),c=E("a"),u=E("p"),f=N("Open Twitter"),this.h()},l:function(y){e=C(y,"DIV",{class:!0});var b=S(e);t=C(b,"A",{class:!0,href:!0,target:!0});var g=S(t);r=C(g,"P",{class:!0});var p=S(r);i=M(p,"Open Linkedin"),p.forEach(v),g.forEach(v),o=L(b),s=C(b,"SPAN",{class:!0});var w=S(s);l=M(w,"or"),w.forEach(v),a=L(b),c=C(b,"A",{class:!0,href:!0,target:!0});var I=S(c);u=C(I,"P",{class:!0});var q=S(u);f=M(q,"Open Twitter"),q.forEach(v),I.forEach(v),b.forEach(v),this.h()},h:function(){_(r,"class","text-black text-sm s-of_zlxC_FvlV"),k(r,z,101,5,3180),_(t,"class","btn primary flex gap-3 items-center justify-evenly font-inter min-h-[42px] max-w-fit s-of_zlxC_FvlV"),_(t,"href","https://www.linkedin.com/in/benissen/"),_(t,"target","_blank"),k(t,z,96,4,2997),_(s,"class","opacity-70 s-of_zlxC_FvlV"),k(s,z,103,4,3241),_(u,"class","text-black text-sm s-of_zlxC_FvlV"),k(u,z,109,5,3455),_(c,"class","btn primary flex gap-3 items-center justify-evenly font-inter min-h-[42px] max-w-fit s-of_zlxC_FvlV"),_(c,"href","https://twitter.com/ben_issen"),_(c,"target","_blank"),k(c,z,104,4,3280),_(e,"class","flex gap-2 items-center s-of_zlxC_FvlV"),k(e,z,95,3,2955)},m:function(y,b){F(y,e,b),m(e,t),m(t,r),m(r,i),m(e,o),m(e,s),m(s,l),m(e,a),m(e,c),m(c,u),m(u,f)},d:function(y){y&&v(e)}};return A("SvelteRegisterBlock",{block:d,id:Gn.name,type:"if",source:"(95:2) {#if (isLoggedIn && !isSave)}",ctx:n}),d}function Wn(n){let e,t,r,i,o,s,l,a,c,u,f,d,h,y,b,g,p,w,I,q,R,V,j,P,B,ee,Q,Ie,D,Y,x,W,J,X,se,ae,ce,be,de,ue,T,G,Ue,Ve,Qe,dt,Rt,Ye,xe,wt,lr,kt,cr;const di=[Ko,Zo],_t=[];function _i(rt,Z){return rt[0]?1:0}j=_i(n),P=_t[j]=di[j](n);let ve=!n[1]&&zn(n),he=n[0]&&n[1]&&Jn(n),Pe=n[0]&&!n[1]&&Gn(n);const hi={c:function(){e=E("h1"),t=N("Set up People"),r=E("span"),i=N("to"),o=N("Notion"),s=U(),l=E("div"),a=E("div"),c=E("h2"),u=E("span"),f=N("Step 1:"),d=N(`
			Connect to Notion `),h=E("br"),y=U(),b=E("span"),g=N('Tip: Select "Use a template provided '),p=E("span"),w=N('by the developer"'),I=N(" for quick setup"),q=U(),R=E("br"),V=U(),P.c(),B=U(),ee=E("div"),Q=E("span"),Ie=N(`Advanced:
			`),D=E("a"),Y=N("Connect to your custom database"),x=U(),W=E("div"),J=E("div"),X=E("h2"),se=E("span"),ae=N("Step 2:"),ce=N(`
				Connect your fields`),be=U(),ve&&ve.c(),de=U(),he&&he.c(),ue=U(),T=E("div"),G=E("h2"),Ue=E("span"),Ve=N("Step 3:"),Qe=N(`
			Add a profile`),dt=U(),Pe&&Pe.c(),Rt=U(),Ye=E("div"),xe=E("h2"),wt=E("span"),lr=N("Step 4:"),kt=N(`
			Pin the extension to your toolbar. You'll be able to edit settings directly from there.`),this.h()},l:function(Z){e=C(Z,"H1",{class:!0});var Re=S(e);t=M(Re,"Set up People"),r=C(Re,"SPAN",{class:!0});var Ft=S(r);i=M(Ft,"to"),Ft.forEach(v),o=M(Re,"Notion"),Re.forEach(v),s=L(Z),l=C(Z,"DIV",{class:!0});var Xe=S(l);a=C(Xe,"DIV",{class:!0});var ur=S(a);c=C(ur,"H2",{class:!0});var ht=S(c);u=C(ht,"SPAN",{class:!0});var pi=S(u);f=M(pi,"Step 1:"),pi.forEach(v),d=M(ht,`
			Connect to Notion `),h=C(ht,"BR",{class:!0}),y=L(ht),b=C(ht,"SPAN",{class:!0});var fr=S(b);g=M(fr,'Tip: Select "Use a template provided '),p=C(fr,"SPAN",{class:!0});var gi=S(p);w=M(gi,'by the developer"'),gi.forEach(v),I=M(fr," for quick setup"),fr.forEach(v),q=L(ht),R=C(ht,"BR",{class:!0}),ht.forEach(v),V=L(ur),P.l(ur),ur.forEach(v),B=L(Xe),ee=C(Xe,"DIV",{class:!0});var vi=S(ee);Q=C(vi,"SPAN",{class:!0});var en=S(Q);Ie=M(en,`Advanced:
			`),D=C(en,"A",{class:!0,href:!0,target:!0});var mi=S(D);Y=M(mi,"Connect to your custom database"),mi.forEach(v),en.forEach(v),vi.forEach(v),x=L(Xe),W=C(Xe,"DIV",{class:!0});var dr=S(W);J=C(dr,"DIV",{class:!0});var _r=S(J);X=C(_r,"H2",{class:!0});var tn=S(X);se=C(tn,"SPAN",{class:!0});var bi=S(se);ae=M(bi,"Step 2:"),bi.forEach(v),ce=M(tn,`
				Connect your fields`),tn.forEach(v),be=L(_r),ve&&ve.l(_r),_r.forEach(v),de=L(dr),he&&he.l(dr),dr.forEach(v),ue=L(Xe),T=C(Xe,"DIV",{class:!0});var hr=S(T);G=C(hr,"H2",{class:!0});var rn=S(G);Ue=C(rn,"SPAN",{class:!0});var yi=S(Ue);Ve=M(yi,"Step 3:"),yi.forEach(v),Qe=M(rn,`
			Add a profile`),rn.forEach(v),dt=L(hr),Pe&&Pe.l(hr),hr.forEach(v),Rt=L(Xe),Ye=C(Xe,"DIV",{class:!0});var wi=S(Ye);xe=C(wi,"H2",{class:!0});var nn=S(xe);wt=C(nn,"SPAN",{class:!0});var ki=S(wt);lr=M(ki,"Step 4:"),ki.forEach(v),kt=M(nn,`
			Pin the extension to your toolbar. You'll be able to edit settings directly from there.`),nn.forEach(v),wi.forEach(v),Xe.forEach(v),this.h()},h:function(){_(r,"class","opacity-40 s-of_zlxC_FvlV"),k(r,z,19,49,572),_(e,"class","text-5xl font-editorial s-of_zlxC_FvlV"),k(e,z,19,0,523),_(u,"class","font-semibold s-of_zlxC_FvlV"),k(u,z,25,3,878),_(h,"class","s-of_zlxC_FvlV"),k(h,z,26,21,944),_(p,"class","whitespace-nowrap s-of_zlxC_FvlV"),k(p,z,28,41,1021),_(b,"class","opacity-60 s-of_zlxC_FvlV"),k(b,z,27,3,954),_(R,"class","s-of_zlxC_FvlV"),k(R,z,31,3,1113),_(c,"class","font-light text-base py-3 s-of_zlxC_FvlV"),k(c,z,24,2,836),_(a,"class","w-full flex justify-between items-center gap-4 s-of_zlxC_FvlV"),k(a,z,23,1,773),_(D,"class","underline hover:no-underline s-of_zlxC_FvlV"),_(D,"href","https://www.peopletonotion.com/notion-permissions"),_(D,"target","_blank"),k(D,z,56,3,1842),_(Q,"class","opacity-60 s-of_zlxC_FvlV"),k(Q,z,54,2,1800),_(ee,"class","w-full -mt-4 s-of_zlxC_FvlV"),k(ee,z,53,1,1771),_(se,"class","font-semibold s-of_zlxC_FvlV"),k(se,z,69,4,2174),_(X,"class","font-light text-base py-3 s-of_zlxC_FvlV"),k(X,z,68,3,2131),_(J,"class","w-full flex justify-between items-center s-of_zlxC_FvlV"),k(J,z,67,2,2073),_(W,"class","w-full flex flex-col s-of_zlxC_FvlV"),k(W,z,66,1,2036),_(Ue,"class","font-semibold s-of_zlxC_FvlV"),k(Ue,z,91,3,2850),_(G,"class","font-light text-base py-3 s-of_zlxC_FvlV"),k(G,z,90,2,2808),_(T,"class","w-full flex justify-between items-center s-of_zlxC_FvlV"),k(T,z,89,1,2751),_(wt,"class","font-semibold s-of_zlxC_FvlV"),k(wt,z,117,3,3644),_(xe,"class","font-light text-base pt-3 s-of_zlxC_FvlV"),k(xe,z,116,2,3602),_(Ye,"class","w-full flex justify-between items-center text- s-of_zlxC_FvlV"),k(Ye,z,115,1,3539),_(l,"class","relative flex flex-col items-center justify-between p-9 max-w-xl w-full bg-[#2253EA] shadow-inner shadow-blue-900 rounded-xl gap-y-6 my-8 s-of_zlxC_FvlV"),k(l,z,20,0,618)},m:function(Z,Re){F(Z,e,Re),m(e,t),m(e,r),m(r,i),m(e,o),F(Z,s,Re),F(Z,l,Re),m(l,a),m(a,c),m(c,u),m(u,f),m(c,d),m(c,h),m(c,y),m(c,b),m(b,g),m(b,p),m(p,w),m(b,I),m(c,q),m(c,R),m(a,V),_t[j].m(a,null),m(l,B),m(l,ee),m(ee,Q),m(Q,Ie),m(Q,D),m(D,Y),m(l,x),m(l,W),m(W,J),m(J,X),m(X,se),m(se,ae),m(X,ce),m(J,be),ve&&ve.m(J,null),m(W,de),he&&he.m(W,null),m(l,ue),m(l,T),m(T,G),m(G,Ue),m(Ue,Ve),m(G,Qe),m(T,dt),Pe&&Pe.m(T,null),m(l,Rt),m(l,Ye),m(Ye,xe),m(xe,wt),m(wt,lr),m(xe,kt),cr=!0},p:function(Z,[Re]){let Ft=j;j=_i(Z),j===Ft?_t[j].p(Z,Re):(Kt(),_e(_t[Ft],1,1,()=>{_t[Ft]=null}),er(),P=_t[j],P?P.p(Z,Re):(P=_t[j]=di[j](Z),P.c()),le(P,1),P.m(a,null)),Z[1]?ve&&(Kt(),_e(ve,1,1,()=>{ve=null}),er()):ve?Re&2&&le(ve,1):(ve=zn(Z),ve.c(),le(ve,1),ve.m(J,null)),Z[0]&&Z[1]?he?(he.p(Z,Re),Re&3&&le(he,1)):(he=Jn(Z),he.c(),le(he,1),he.m(W,null)):he&&(Kt(),_e(he,1,1,()=>{he=null}),er()),Z[0]&&!Z[1]?Pe||(Pe=Gn(Z),Pe.c(),Pe.m(T,null)):Pe&&(Pe.d(1),Pe=null)},i:function(Z){cr||(le(P),le(ve),le(he),cr=!0)},o:function(Z){_e(P),_e(ve),_e(he),cr=!1},d:function(Z){Z&&v(e),Z&&v(s),Z&&v(l),_t[j].d(),ve&&ve.d(),he&&he.d(),Pe&&Pe.d()}};return A("SvelteRegisterBlock",{block:hi,id:Wn.name,type:"component",source:"",ctx:n}),hi}function Ml(n,e,t){let{$$slots:r={},$$scope:i}=e;Jt("Welcome",r,[]);let o=!0;const s=()=>{Vr("/login")};let{isLoggedIn:l=!1}=e;const a=["isLoggedIn"];Object.keys(e).forEach(u=>{!~a.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<Welcome> was created with unknown prop '${u}'`)});function c(u){o=u,t(1,o)}return n.$$set=u=>{"isLoggedIn"in u&&t(0,l=u.isLoggedIn)},n.$capture_state=()=>({Home:ar,browser:Zn,goto:Vr,Icon:sr,isSave:o,goToLogin:s,isLoggedIn:l}),n.$inject_state=u=>{"isSave"in u&&t(1,o=u.isSave),"isLoggedIn"in u&&t(0,l=u.isLoggedIn)},e&&"$$inject"in e&&n.$inject_state(e.$$inject),[l,o,s,c]}class es extends Vt{constructor(e){super(e),xt(this,e,Ml,Wn,zt,{isLoggedIn:0}),A("SvelteRegisterComponent",{component:this,tagName:"Welcome",options:e,id:Wn.name})}get isLoggedIn(){throw new Error("<Welcome>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set isLoggedIn(e){throw new Error("<Welcome>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Kr="src/routes/+page.svelte";function ts(n){let e,t,r;t=new Eo({$$inline:!0});const i={c:function(){e=E("div"),lt(t.$$.fragment),this.h()},l:function(s){e=C(s,"DIV",{class:!0});var l=S(e);ct(t.$$.fragment,l),l.forEach(v),this.h()},h:function(){_(e,"class","relative flex flex-col items-center justify-center p-9 min-h-screen max-w-sm m-auto"),k(e,Kr,99,1,3808)},m:function(s,l){F(s,e,l),ut(t,e,null),r=!0},p:ne,i:function(s){r||(le(t.$$.fragment,s),r=!0)},o:function(s){_e(t.$$.fragment,s),r=!1},d:function(s){s&&v(e),ft(t)}};return A("SvelteRegisterBlock",{block:i,id:ts.name,type:"else",source:"(99:0) {:else}",ctx:n}),i}function rs(n){let e,t,r,i;const o=[os,is],s=[];function l(c,u){return window.location.hash=="#popup"?0:1}e=l(),t=s[e]=o[e](n);const a={c:function(){t.c(),r=K()},l:function(u){t.l(u),r=K()},m:function(u,f){s[e].m(u,f),F(u,r,f),i=!0},p:ne,i:function(u){i||(le(t),i=!0)},o:function(u){_e(t),i=!1},d:function(u){s[e].d(u),u&&v(r)}};return A("SvelteRegisterBlock",{block:a,id:rs.name,type:"if",source:"(85:16) ",ctx:n}),a}function ns(n){let e,t,r;t=new es({props:{isLoggedIn:!!n[0]},$$inline:!0});const i={c:function(){e=E("div"),lt(t.$$.fragment),this.h()},l:function(s){e=C(s,"DIV",{class:!0});var l=S(e);ct(t.$$.fragment,l),l.forEach(v),this.h()},h:function(){_(e,"class","relative flex flex-col items-center justify-center p-9 min-h-screen w-full m-auto"),k(e,Kr,81,1,3315)},m:function(s,l){F(s,e,l),ut(t,e,null),r=!0},p:function(s,l){const a={};l&1&&(a.isLoggedIn=!!s[0]),t.$set(a)},i:function(s){r||(le(t.$$.fragment,s),r=!0)},o:function(s){_e(t.$$.fragment,s),r=!1},d:function(s){s&&v(e),ft(t)}};return A("SvelteRegisterBlock",{block:i,id:ns.name,type:"if",source:"(81:0) {#if browser && (window.location.hash === '#welcome' || $page.url.searchParams.get('state'))}",ctx:n}),i}function is(n){let e,t,r;t=new ar({$$inline:!0});const i={c:function(){e=E("div"),lt(t.$$.fragment),this.h()},l:function(s){e=C(s,"DIV",{class:!0});var l=S(e);ct(t.$$.fragment,l),l.forEach(v),this.h()},h:function(){_(e,"class","relative flex flex-col items-center justify-center p-9 min-h-screen max-w-sm m-auto"),k(e,Kr,92,2,3667)},m:function(s,l){F(s,e,l),ut(t,e,null),r=!0},i:function(s){r||(le(t.$$.fragment,s),r=!0)},o:function(s){_e(t.$$.fragment,s),r=!1},d:function(s){s&&v(e),ft(t)}};return A("SvelteRegisterBlock",{block:i,id:is.name,type:"else",source:"(92:1) {:else}",ctx:n}),i}function os(n){let e,t,r;t=new ar({$$inline:!0});const i={c:function(){e=E("div"),lt(t.$$.fragment),this.h()},l:function(s){e=C(s,"DIV",{class:!0});var l=S(e);ct(t.$$.fragment,l),l.forEach(v),this.h()},h:function(){_(e,"class","relative flex flex-col items-center justify-between px-9 py-6 min-h-screen max-w-sm m-auto"),k(e,Kr,86,2,3524)},m:function(s,l){F(s,e,l),ut(t,e,null),r=!0},i:function(s){r||(le(t.$$.fragment,s),r=!0)},o:function(s){_e(t.$$.fragment,s),r=!1},d:function(s){s&&v(e),ft(t)}};return A("SvelteRegisterBlock",{block:i,id:os.name,type:"if",source:"(86:1) {#if browser && window.location.hash == '#popup'}",ctx:n}),i}function Qn(n){let e,t,r,i,o;const s=[ns,rs,ts],l=[];function a(u,f){return f&2&&(e=null),e==null&&(e=!!(window.location.hash==="#welcome"||u[1].url.searchParams.get("state"))),e?0:u[0]?1:2}t=a(n,-1),r=l[t]=s[t](n);const c={c:function(){r.c(),i=K()},l:function(f){r.l(f),i=K()},m:function(f,d){l[t].m(f,d),F(f,i,d),o=!0},p:function(f,[d]){let h=t;t=a(f,d),t===h?l[t].p(f,d):(Kt(),_e(l[h],1,1,()=>{l[h]=null}),er(),r=l[t],r?r.p(f,d):(r=l[t]=s[t](f),r.c()),le(r,1),r.m(i.parentNode,i))},i:function(f){o||(le(r),o=!0)},o:function(f){_e(r),o=!1},d:function(f){l[t].d(f),f&&v(i)}};return A("SvelteRegisterBlock",{block:c,id:Qn.name,type:"component",source:"",ctx:n}),c}function Ul(n,e,t){let r,i,o;Bt(Gt,"user"),Nt(n,Gt,c=>t(0,r=c)),Bt(fe,"config"),Nt(n,fe,c=>t(2,i=c)),Bt(on,"page"),Nt(n,on,c=>t(1,o=c));let{$$slots:s={},$$scope:l}=e;Jt("Page",s,[]),Ur(async()=>{const c=await Mt.auth.getSession().then(u=>u.data.session);c&&c.user&&(Gt.set(c.user),c!=null&&c.provider_token&&(Ze(fe,i.notion_api_token=c==null?void 0:c.provider_token,i),await sn({notion_api_token:i.notion_api_token})))}),Mt.auth.onAuthStateChange(async(c,u)=>{c=="SIGNED_IN"&&u!=null&&u.provider_token&&(Ze(fe,i.notion_api_token=u==null?void 0:u.provider_token,i),await sn({notion_api_token:i.notion_api_token})),Gt.set(u&&u.user),r?Sr.identify(r.id,{email:r.email}):Sr.reset()}),Sr.init("phc_2lp5hv7I8KH0iP10kydtvaPkMl0R1aF0aKiCnYSMjHe",{api_host:"https://app.posthog.com",persistence:"localStorage",loaded(c){r&&c.identify(r.id,{email:r.email})}});const a=[];return Object.keys(e).forEach(c=>{!~a.indexOf(c)&&c.slice(0,2)!=="$$"&&c!=="slot"&&console.warn(`<Page> was created with unknown prop '${c}'`)}),n.$capture_state=()=>({Home:ar,supabase:Mt,config:fe,user:Gt,Login:Eo,browser:Zn,posthog:Sr,onMount:Ur,getUserConfig:jr,setUserConfig:$r,updateUserConfig:sn,Welcome:es,page:on,$user:r,$config:i,$page:o}),[r,o]}class xl extends Vt{constructor(e){super(e),xt(this,e,Ul,Qn,zt,{}),A("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:Qn.name})}}export{xl as default};
