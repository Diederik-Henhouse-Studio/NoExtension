import{S as C,i as M,d as V,s as Y,m as b,c as w,e as T,n as E,p as x,f as N,l as c,a4 as A,q as m,u as g,g as v,J as k,E as D,v as G,O as H,w as R,x as j,y as X}from"../../../chunks/index-da8c466b.js";import{b as L}from"../../../chunks/preload-helper-d17d48a2.js";import{s as U}from"../../../chunks/supabase-51bcc1ec.js";const{console:Z}=H,y="src/routes/login/+page.svelte";function q(_){let e,n,h,r,o,l,a;const i={c:function(){e=b("h2"),n=R("Ooops! Something has broken..."),h=w(),r=b("div"),o=w(),l=b("h3"),a=R(_[0]),this.h()},l:function(t){e=E(t,"H2",{class:!0});var f=x(e);n=j(f,"Ooops! Something has broken..."),f.forEach(c),h=N(t),r=E(t,"DIV",{class:!0}),x(r).forEach(c),o=N(t),l=E(t,"H3",{class:!0});var I=x(l);a=j(I,_[0]),I.forEach(c),this.h()},h:function(){m(e,"class","text-2xl font-inter"),g(e,y,47,1,1598),m(r,"class","p-4"),g(r,y,48,0,1666),m(l,"class","text-xl font-inter"),g(l,y,49,1,1687)},m:function(t,f){v(t,e,f),k(e,n),v(t,h,f),v(t,r,f),v(t,o,f),v(t,l,f),k(l,a)},p:function(t,f){f&1&&X(a,t[0])},d:function(t){t&&c(e),t&&c(h),t&&c(r),t&&c(o),t&&c(l)}};return V("SvelteRegisterBlock",{block:i,id:q.name,type:"else",source:"(47:0) {:else}",ctx:_}),i}function B(_){let e,n;const h={c:function(){e=b("h2"),n=R("Signing in to Notion... Don't close this tab!"),this.h()},l:function(o){e=E(o,"H2",{class:!0});var l=x(e);n=j(l,"Signing in to Notion... Don't close this tab!"),l.forEach(c),this.h()},h:function(){m(e,"class","text-2xl font-inter"),g(e,y,45,1,1506)},m:function(o,l){v(o,e,l),k(e,n)},p:D,d:function(o){o&&c(e)}};return V("SvelteRegisterBlock",{block:h,id:B.name,type:"if",source:"(45:0) {#if !error_message}",ctx:_}),h}function z(_){let e,n,h,r,o,l,a,i,p,t,f,I;function P(S,s){return S[0]?q:B}let O=P(_),d=O(_);const J={c:function(){e=b("div"),n=b("img"),r=w(),o=b("div"),l=w(),a=b("img"),p=w(),t=b("div"),f=w(),d.c(),I=T(),this.h()},l:function(s){e=E(s,"DIV",{class:!0});var u=x(e);n=E(u,"IMG",{src:!0,alt:!0,class:!0}),r=N(u),o=E(u,"DIV",{class:!0}),x(o).forEach(c),l=N(u),a=E(u,"IMG",{src:!0,alt:!0,class:!0}),u.forEach(c),p=N(s),t=E(s,"DIV",{class:!0}),x(t).forEach(c),f=N(s),d.l(s),I=T(),this.h()},h:function(){A(n.src,h="peopletonotion_logo_128.png")||m(n,"src",h),m(n,"alt","logo"),m(n,"class","h-16 w-16"),g(n,y,38,1,1247),m(o,"class","p-2"),g(o,y,39,1,1319),A(a.src,i="peopletonotion_full_logo.svg")||m(a,"src",i),m(a,"alt","peopletonotion"),m(a,"class","h-[70px] w-[235px] object-cover object-right"),g(a,y,40,2,1341),m(e,"class","flex flex-col items-center justify-self-start"),g(e,y,37,0,1186),m(t,"class","p-6"),g(t,y,42,0,1463)},m:function(s,u){v(s,e,u),k(e,n),k(e,r),k(e,o),k(e,l),k(e,a),v(s,p,u),v(s,t,u),v(s,f,u),d.m(s,u),v(s,I,u)},p:function(s,[u]){O===(O=P(s))&&d?d.p(s,u):(d.d(1),d=O(s),d&&(d.c(),d.m(I.parentNode,I)))},i:D,o:D,d:function(s){s&&c(e),s&&c(p),s&&c(t),s&&c(f),d.d(s),s&&c(I)}};return V("SvelteRegisterBlock",{block:J,id:z.name,type:"component",source:"",ctx:_}),J}function Q(_,e,n){let{$$slots:h={},$$scope:r}=e;G("Page",h,[]);let o="";const l=async()=>{try{let i;L&&(i=`https://app.peopletonotion.com/auth-redirect/${chrome.runtime.id}`);const{error:p}=await U.auth.signInWithOAuth({provider:"notion",options:{redirectTo:i}});if(p)throw new Error(p)}catch(i){i instanceof Error?(n(0,o=i.message),console.log(i.message)):(n(0,o=JSON.stringify(i)),console.log(i))}};l();const a=[];return Object.keys(e).forEach(i=>{!~a.indexOf(i)&&i.slice(0,2)!=="$$"&&i!=="slot"&&Z.warn(`<Page> was created with unknown prop '${i}'`)}),_.$capture_state=()=>({browser:L,supabase:U,error_message:o,handleLogin:l}),_.$inject_state=i=>{"error_message"in i&&n(0,o=i.error_message)},e&&"$$inject"in e&&_.$inject_state(e.$$inject),[o]}class $ extends C{constructor(e){super(e),M(this,e,Q,z,Y,{}),V("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:z.name})}}export{$ as default};
